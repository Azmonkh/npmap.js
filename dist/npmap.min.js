/**
 * NPMap.js 2.0.0
 * Built on 04/07/2014 at 09:57AM MDT
 * Copyright 2014 National Park Service
 * Licensed under MIT (https://github.com/nationalparkservice/npmap.js/blob/master/LICENSE.md)
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){window.L=a("leaflet/dist/leaflet-src")},{"leaflet/dist/leaflet-src":27}],2:[function(a){a("./leaflet"),a("./npmap")},{"./leaflet":1,"./npmap":33}],3:[function(){},{}],4:[function(a,b){b.exports=a(3)},{}],5:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.once=c,d.off=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],6:[function(a,b){function c(a){return!!a.match(/(Lat)(itude)?/gi)}function d(a){return!!a.match(/(L)(on|ng)(gitude)?/i)}function e(a){return"object"==typeof a?Object.keys(a).length:0}function f(a){var b=[",",";","	","|"],c=[];return b.forEach(function(b){var d=k(b).parse(a);if(d.length>=1){for(var f=e(d[0]),g=0;g<d.length;g++)if(e(d[g])!==f)return;c.push({delimiter:b,arity:Object.keys(d[0]).length})}}),c.length?c.sort(function(a,b){return b.arity-a.arity})[0].delimiter:null}function g(a){var b=f(a);return b?k(b).parse(a):null}function h(a,b,e){e||(e=b,b={}),b.delimiter=b.delimiter||",";var g=b.latfield||"",h=b.lonfield||"",i=[],j={type:"FeatureCollection",features:i};if("auto"===b.delimiter&&"string"==typeof a&&(b.delimiter=f(a),!b.delimiter))return e({type:"Error",message:"Could not autodetect delimiter"});var m="string"==typeof a?k(b.delimiter).parse(a):a;if(!m.length)return e(null,j);if(!g||!h){for(var n in m[0])!g&&c(n)&&(g=n),!h&&d(n)&&(h=n);if(!g||!h){var o=[];for(var p in m[0])o.push(p);return e({type:"Error",message:"Latitude and longitude fields not present",data:m,fields:o})}}for(var q=[],r=0;r<m.length;r++)if(void 0!==m[r][h]&&void 0!==m[r][h]){var s,t,u,v=m[r][h],w=m[r][g];u=l(v,"EW"),u&&(v=u),u=l(w,"NS"),u&&(w=u),s=parseFloat(v),t=parseFloat(w),isNaN(s)||isNaN(t)?q.push({message:"A row contained an invalid value for latitude or longitude",row:m[r]}):(b.includeLatLon||(delete m[r][h],delete m[r][g]),i.push({type:"Feature",properties:m[r],geometry:{type:"Point",coordinates:[parseFloat(s),parseFloat(t)]}}))}e(q.length?q:null,j)}function i(a){for(var b=a.features,c={type:"Feature",geometry:{type:"LineString",coordinates:[]}},d=0;d<b.length;d++)c.geometry.coordinates.push(b[d].geometry.coordinates);return c.properties=b[0].properties,{type:"FeatureCollection",features:[c]}}function j(a){for(var b=a.features,c={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},d=0;d<b.length;d++)c.geometry.coordinates[0].push(b[d].geometry.coordinates);return c.properties=b[0].properties,{type:"FeatureCollection",features:[c]}}var k=a("dsv"),l=a("sexagesimal");b.exports={isLon:d,isLat:c,csv:k.csv.parse,tsv:k.tsv.parse,dsv:k,auto:g,csv2geojson:h,toLine:i,toPolygon:j}},{dsv:7,sexagesimal:8}],7:[function(a,b){a("fs");b.exports=new Function('dsv.version = "0.0.3";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.substring(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.substring(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.substring(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && !(a = f(a, n++))) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()},{fs:3}],8:[function(a,b){b.exports=function(a,b){if(b||(b="NSEW"),"string"!=typeof a)return null;var c=/^([0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/,d=a.match(c);return d?d[4]&&-1===b.indexOf(d[4])?null:((d[1]?parseFloat(d[1]):0)+(d[2]?parseFloat(d[2])/60:0)+(d[3]?parseFloat(d[3])/3600:0))*(d[4]&&"S"===d[4]||"W"===d[4]?-1:1):null}},{}],9:[function(a,b,c){"use strict";var d=a("./handlebars.runtime")["default"],e=a("./handlebars/compiler/ast")["default"],f=a("./handlebars/compiler/base").parser,g=a("./handlebars/compiler/base").parse,h=a("./handlebars/compiler/compiler").Compiler,i=a("./handlebars/compiler/compiler").compile,j=a("./handlebars/compiler/compiler").precompile,k=a("./handlebars/compiler/javascript-compiler")["default"],l=d.create,m=function(){var a=l();return a.compile=function(b,c){return i(b,c,a)},a.precompile=function(b,c){return j(b,c,a)},a.AST=e,a.Compiler=h,a.JavaScriptCompiler=k,a.Parser=f,a.parse=g,a};d=m(),d.create=m,c["default"]=d},{"./handlebars.runtime":10,"./handlebars/compiler/ast":12,"./handlebars/compiler/base":13,"./handlebars/compiler/compiler":14,"./handlebars/compiler/javascript-compiler":15}],10:[function(a,b,c){"use strict";var d=a("./handlebars/base"),e=a("./handlebars/safe-string")["default"],f=a("./handlebars/exception")["default"],g=a("./handlebars/utils"),h=a("./handlebars/runtime"),i=function(){var a=new d.HandlebarsEnvironment;return g.extend(a,d),a.SafeString=e,a.Exception=f,a.Utils=g,a.VM=h,a.template=function(b){return h.template(b,a)},a},j=i();j.create=i,c["default"]=j},{"./handlebars/base":11,"./handlebars/exception":19,"./handlebars/runtime":20,"./handlebars/safe-string":21,"./handlebars/utils":22}],11:[function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function f(a,b){p.log(a,b)}var g=a("./utils"),h=a("./exception")["default"],i="1.3.0";c.VERSION=i;var j=4;c.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};c.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";c.HandlebarsEnvironment=d,d.prototype={constructor:d,logger:p,log:f,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};c.logger=p,c.log=f;var q=function(a){var b={};return g.extend(b,a),b};c.createFrame=q},{"./exception":19,"./utils":22}],12:[function(a,b,c){"use strict";function d(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var e=a("../exception")["default"],f={ProgramNode:function(a,b,c,e){var g,h;3===arguments.length?(e=c,c=null):2===arguments.length&&(e=b,b=null),d.call(this,e),this.type="program",this.statements=a,this.strip={},c?(h=c[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new f.ProgramNode(c,b,g)):this.inverse=new f.ProgramNode(c,b),this.strip.right=b.left):b&&(this.strip.left=b.right)},MustacheNode:function(a,b,c,e,g){if(d.call(this,g),this.type="mustache",this.strip=e,null!=c&&c.charAt){var h=c.charAt(3)||c.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!c;this.sexpr=a instanceof f.SexprNode?a:new f.SexprNode(a,b),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,b,c){d.call(this,c),this.type="sexpr",this.hash=b;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||b)},PartialNode:function(a,b,c,e){d.call(this,e),this.type="partial",this.partialName=a,this.context=b,this.strip=c},BlockNode:function(a,b,c,f,g){if(d.call(this,g),a.sexpr.id.original!==f.path.original)throw new e(a.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block",this.mustache=a,this.program=b,this.inverse=c,this.strip={left:a.strip.left,right:f.strip.right},(b||c).strip.left=a.strip.right,(c||b).strip.right=f.strip.left,c&&!b&&(this.isInverse=!0)},ContentNode:function(a,b){d.call(this,b),this.type="content",this.string=a},HashNode:function(a,b){d.call(this,b),this.type="hash",this.pairs=a},IdNode:function(a,b){d.call(this,b),this.type="ID";for(var c="",f=[],g=0,h=0,i=a.length;i>h;h++){var j=a[h].part;if(c+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new e("Invalid path: "+c,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=c,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,b){d.call(this,b),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,b){d.call(this,b),this.type="DATA",this.id=a},StringNode:function(a,b){d.call(this,b),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,b){d.call(this,b),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,b){d.call(this,b),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,b){d.call(this,b),this.type="comment",this.comment=a}};c["default"]=f},{"../exception":19}],13:[function(a,b,c){"use strict";function d(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var e=a("./parser")["default"],f=a("./ast")["default"];c.parser=e,c.parse=d},{"./ast":12,"./parser":16}],14:[function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new g("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new g("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var g=a("../exception")["default"];c.Compiler=d,d.prototype={compiler:d,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),this.opcode(a.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new g("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new g("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;d>c;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},c.precompile=e,c.compile=f},{"../exception":19}],15:[function(a,b,c){"use strict";function d(a){this.value=a}function e(){}var f=a("../base").COMPILER_REVISION,g=a("../base").REVISION_CHANGES,h=a("../base").log,i=a("../exception")["default"];e.prototype={nameLookup:function(a,b){var c,d;return 0===a.indexOf("depth")&&(c=!0),d=/^[0-9]+$/.test(b)?a+"["+b+"]":e.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",c?"("+a+" && "+d+")":d},compilerInfo:function(){var a=f,b=g[a];return"this.compilerInfo = ["+a+",'"+b+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},h("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var g=f.length;this.i<g;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}a.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push("depth"+this.environment.depths.list[e]);var g=this.mergeSource();if(this.isChild||(g=this.compilerInfo()+g),a)return d.push(g),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\n  "+g+"}";return h("debug",i+"\n\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;d>c;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){this.pushStackLiteral(null!=a?this.programExpression(a):null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:e,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],e.push(1===b?"depth0":"depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,c,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof d)b=h.value,e=!0;else{c=!this.stackSlot;var i=c?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),c&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var e=a[b];e instanceof d?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new i("Invalid stack pop");this.stackSlot--}return c},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,c=b[b.length-1];return!a&&c instanceof d?c.value:c},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[],e=this.setupParams(a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;a>i;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var j="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),k=e.RESERVED_WORDS={},l=0,m=j.length;m>l;l++)k[j[l]]=!0;e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)?!0:!1},c["default"]=e},{"../base":11,"../exception":19}],16:[function(a,b,c){"use strict";var d=function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}
}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g){var h=g.length-1;switch(f){case 1:return new e.ProgramNode(g[h-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[h-1],g[h],this._$);break;case 4:this.$=new e.ProgramNode(g[h-2],g[h-1],g[h],this._$);break;case 5:this.$=new e.ProgramNode(g[h-1],g[h],[],this._$);break;case 6:this.$=new e.ProgramNode(g[h],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[h]];break;case 10:g[h-1].push(g[h]),this.$=g[h-1];break;case 11:this.$=new e.BlockNode(g[h-2],g[h-1].inverse,g[h-1],g[h],this._$);break;case 12:this.$=new e.BlockNode(g[h-2],g[h-1],g[h-1].inverse,g[h],this._$);break;case 13:this.$=g[h];break;case 14:this.$=g[h];break;case 15:this.$=new e.ContentNode(g[h],this._$);break;case 16:this.$=new e.CommentNode(g[h],this._$);break;case 17:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 18:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 19:this.$={path:g[h-1],strip:a(g[h-2],g[h])};break;case 20:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 21:this.$=new e.MustacheNode(g[h-1],null,g[h-2],a(g[h-2],g[h]),this._$);break;case 22:this.$=new e.PartialNode(g[h-2],g[h-1],a(g[h-3],g[h]),this._$);break;case 23:this.$=a(g[h-1],g[h]);break;case 24:this.$=new e.SexprNode([g[h-2]].concat(g[h-1]),g[h],this._$);break;case 25:this.$=new e.SexprNode([g[h]],null,this._$);break;case 26:this.$=g[h];break;case 27:this.$=new e.StringNode(g[h],this._$);break;case 28:this.$=new e.IntegerNode(g[h],this._$);break;case 29:this.$=new e.BooleanNode(g[h],this._$);break;case 30:this.$=g[h];break;case 31:g[h-1].isHelper=!0,this.$=g[h-1];break;case 32:this.$=new e.HashNode(g[h],this._$);break;case 33:this.$=[g[h-2],g[h]];break;case 34:this.$=new e.PartialNameNode(g[h],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[h],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[h],this._$));break;case 37:this.$=new e.DataNode(g[h],this._$);break;case 38:this.$=new e.IdNode(g[h],this._$);break;case 39:g[h-2].push({part:g[h],separator:g[h-1]}),this.$=g[h-2];break;case 40:this.$=[{part:g[h]}];break;case 43:this.$=[];break;case 44:g[h-1].push(g[h]);break;case 47:this.$=[g[h]];break;case 48:g[h-1].push(g[h])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 24:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();c["default"]=d},{}],17:[function(a,b,c){"use strict";function d(a){return(new e).accept(a)}function e(){this.padding=0}var f=a("./visitor")["default"];c.print=d,c.PrintVisitor=e,e.prototype=new f,e.prototype.pad=function(a,b){for(var c="",d=0,e=this.padding;e>d;d++)c+="  ";return c+=a,b!==!1&&(c+="\n"),c},e.prototype.program=function(a){var b,c,d="",e=a.statements;for(b=0,c=e.length;c>b;b++)d+=this.accept(e[b]);return this.padding--,d},e.prototype.block=function(a){var b="";return b+=this.pad("BLOCK:"),this.padding++,b+=this.accept(a.mustache),a.program&&(b+=this.pad("PROGRAM:"),this.padding++,b+=this.accept(a.program),this.padding--),a.inverse&&(a.program&&this.padding++,b+=this.pad("{{^}}"),this.padding++,b+=this.accept(a.inverse),this.padding--,a.program&&this.padding--),this.padding--,b},e.prototype.sexpr=function(a){for(var b,c=a.params,d=[],e=0,f=c.length;f>e;e++)d.push(this.accept(c[e]));return c="["+d.join(", ")+"]",b=a.hash?" "+this.accept(a.hash):"",this.accept(a.id)+" "+c+b},e.prototype.mustache=function(a){return this.pad("{{ "+this.accept(a.sexpr)+" }}")},e.prototype.partial=function(a){var b=this.accept(a.partialName);return a.context&&(b=b+" "+this.accept(a.context)),this.pad("{{> "+b+" }}")},e.prototype.hash=function(a){for(var b,c,d=a.pairs,e=[],f=0,g=d.length;g>f;f++)b=d[f][0],c=this.accept(d[f][1]),e.push(b+"="+c);return"HASH{"+e.join(", ")+"}"},e.prototype.STRING=function(a){return'"'+a.string+'"'},e.prototype.INTEGER=function(a){return"INTEGER{"+a.integer+"}"},e.prototype.BOOLEAN=function(a){return"BOOLEAN{"+a.bool+"}"},e.prototype.ID=function(a){var b=a.parts.join("/");return a.parts.length>1?"PATH:"+b:"ID:"+b},e.prototype.PARTIAL_NAME=function(a){return"PARTIAL:"+a.name},e.prototype.DATA=function(a){return"@"+this.accept(a.id)},e.prototype.content=function(a){return this.pad("CONTENT[ '"+a.string+"' ]")},e.prototype.comment=function(a){return this.pad("{{! '"+a.comment+"' }}")}},{"./visitor":18}],18:[function(a,b,c){"use strict";function d(){}d.prototype={constructor:d,accept:function(a){return this[a.type](a)}},c["default"]=d},{}],19:[function(a,b,c){"use strict";function d(a,b){var c;b&&b.firstLine&&(c=b.firstLine,a+=" - "+c+":"+b.firstColumn);for(var d=Error.prototype.constructor.call(this,a),f=0;f<e.length;f++)this[e[f]]=d[e[f]];c&&(this.lineNumber=c,this.column=b.firstColumn)}var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d},{}],20:[function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=l;if(b!==c){if(c>b){var d=m[c],e=m[b];throw new k("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new k("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new k("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new k("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:j.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},j.extend(c,b),j.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new k("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j=a("./utils"),k=a("./exception")["default"],l=a("./base").COMPILER_REVISION,m=a("./base").REVISION_CHANGES;c.checkRevision=d,c.template=e,c.programWithDepth=f,c.program=g,c.invokePartial=h,c.noop=i},{"./base":11,"./exception":19,"./utils":22}],21:[function(a,b,c){"use strict";function d(a){this.string=a}d.prototype.toString=function(){return""+this.string},c["default"]=d},{}],22:[function(a,b,c){"use strict";function d(a){return i[a]||"&amp;"}function e(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function f(a){return a instanceof h?a.toString():a||0===a?(a=""+a,k.test(a)?a.replace(j,d):a):""}function g(a){return a||0===a?n(a)&&0===a.length?!0:!1:!0}var h=a("./safe-string")["default"],i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=/[&<>"'`]/g,k=/[&<>"'`]/;c.extend=e;var l=Object.prototype.toString;c.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)});var m;c.isFunction=m;var n=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===l.call(a):!1};c.isArray=n,c.escapeExpression=f,c.isEmpty=g},{"./safe-string":21}],23:[function(a,b){var c=a("../dist/cjs/handlebars")["default"];c.Visitor=a("../dist/cjs/handlebars/compiler/visitor")["default"];var d=a("../dist/cjs/handlebars/compiler/printer");if(c.PrintVisitor=d.PrintVisitor,c.print=d.print,b.exports=c,"undefined"!=typeof a&&a.extensions){var e=function(b,d){var e=a("fs"),f=e.readFileSync(d,"utf8");b.exports=c.compile(f)};a.extensions[".handlebars"]=e,a.extensions[".hbs"]=e}},{"../dist/cjs/handlebars":9,"../dist/cjs/handlebars/compiler/printer":17,"../dist/cjs/handlebars/compiler/visitor":18,fs:3}],24:[function(a,b){!function(a,c,d){"undefined"!=typeof b?b.exports=d(a,c):"function"==typeof define&&"object"==typeof define.amd?define(d):c[a]=d(a,c)}("humane",this,function(){var a=window,b=document,c={on:function(b,c,d){"addEventListener"in a?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)},off:function(b,c,d){"removeEventListener"in a?b.removeEventListener(c,d,!1):b.detachEvent("on"+c,d)},bind:function(a,b){return function(){a.apply(b,arguments)}},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},config:function(a,b){return null!=a?a:b},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var a=b.createElement("div"),c={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var d in c)d+"Transition"in a.style&&(this.vendorPrefix=c[d],this.transSupport=!0)}};c._checkTransition();var d=function(b){b||(b={}),this.queue=[],this.baseCls=b.baseCls||"humane",this.addnCls=b.addnCls||"",this.timeout="timeout"in b?b.timeout:2500,this.waitForMove=b.waitForMove||!1,this.clickToClose=b.clickToClose||!1,this.timeoutAfterMove=b.timeoutAfterMove||!1,this.container=b.container;try{this._setupEl()}catch(d){c.on(a,"load",c.bind(this._setupEl,this))}};return d.prototype={constructor:d,_setupEl:function(){var a=b.createElement("div");if(a.style.display="none",!this.container){if(!b.body)throw"document.body is null";this.container=b.body}this.container.appendChild(a),this.el=a,this.removeEvent=c.bind(function(){this.timeoutAfterMove?setTimeout(c.bind(this.remove,this),this.timeout):this.remove()},this),this.transEvent=c.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){c.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(c.on(b.body,"mousemove",this.removeEvent),c.on(b.body,"click",this.removeEvent),c.on(b.body,"keypress",this.removeEvent),c.on(b.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var a=this.queue.shift(),b=c.config(a.clickToClose,this.clickToClose);b&&(c.on(this.el,"click",this.removeEvent),c.on(this.el,"touchstart",this.removeEvent));var d=c.config(a.timeout,this.timeout);d>0&&(this.currentTimer=setTimeout(c.bind(this._afterTimeout,this),d)),c.isArray(a.html)&&(a.html="<ul><li>"+a.html.join("<li>")+"</ul>"),this.el.innerHTML=a.html,this.currentMsg=a,this.el.className=this.baseCls,c.transSupport?(this.el.style.display="block",setTimeout(c.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(a){if(c.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*a}catch(b){}else this.el.style.opacity=String(a)},_showMsg:function(){var a=c.config(this.currentMsg.addnCls,this.addnCls);if(c.transSupport)this.el.className=this.baseCls+" "+a+" "+this.baseCls+"-animate";else{var b=0;this.el.className=this.baseCls+" "+a+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var d=this,e=setInterval(function(){1>b?(b+=.1,b>1&&(b=1),d._setOpacity(b)):clearInterval(e)},30)}},_hideMsg:function(){var a=c.config(this.currentMsg.addnCls,this.addnCls);if(c.transSupport)this.el.className=this.baseCls+" "+a,c.on(this.el,c.vendorPrefix?c.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var b=1,d=this,e=setInterval(function(){b>0?(b-=.1,0>b&&(b=0),d._setOpacity(b)):(d.el.className=d.baseCls+" "+a,clearInterval(e),d._afterAnimation())},30)},_afterAnimation:function(){c.transSupport&&c.off(this.el,c.vendorPrefix?c.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(a){var d="function"==typeof a?a:null;c.off(b.body,"mousemove",this.removeEvent),c.off(b.body,"click",this.removeEvent),c.off(b.body,"keypress",this.removeEvent),c.off(b.body,"touchstart",this.removeEvent),c.off(this.el,"click",this.removeEvent),c.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,d&&this.currentMsg&&(this.currentMsg.cb=d),this._animating?this._hideMsg():d&&d()},log:function(a,b,c,d){var e={};if(d)for(var f in d)e[f]=d[f];if("function"==typeof b)c=b;else if(b)for(var f in b)e[f]=b[f];return e.html=a,c&&(e.cb=c),this.queue.push(e),this._run(),this},spawn:function(a){var b=this;return function(c,d,e){return b.log.call(b,c,d,e,a),b}},create:function(a){return new d(a)}},new d})},{}],25:[function(){!function(a,b){L.drawVersion="0.2.2",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(a,b){this._map=a,this._container=a._container,this._overlayPane=a._panes.overlayPane,this._popupPane=a._panes.popupPane,b&&b.shapeOptions&&(b.shapeOptions=L.Util.extend({},this.options.shapeOptions,b.shapeOptions)),L.Util.extend(this.options,b)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){this._map&&(L.DomUtil.disableTextSelection(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(a){L.setOptions(this,a)},_fireCreatedEvent:function(a){this._map.fire("draw:created",{layer:a,layerType:this.type})},_cancelDrawing:function(a){27===a.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(a,b){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,b&&b.drawError&&(b.drawError=L.Util.extend({},this.options.drawError,b.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},_finishShape:function(){var a=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&a||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(a){var b=a.layerPoint,c=a.latlng;this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(b),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(a.originalEvent)},_onClick:function(a){var b=a.target.getLatLng(),c=this._markers.length;return c>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(b)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(b)),this._poly.addLatLng(b),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._updateFinishHandler(),this._vertexAdded(b),this._clearGuides(),void this._updateTooltip())},_updateFinishHandler:function(){var a=this._markers.length;a>1&&this._markers[a-1].on("click",this._finishShape,this),a>2&&this._markers[a-2].off("click",this._finishShape,this)
},_createMarker:function(a){var b=new L.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(b),b},_updateGuide:function(a){var b=this._markers.length;b>0&&(a=a||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[b-1].getLatLng()),a))},_updateTooltip:function(a){var b=this._getTooltipText();a&&this._tooltip.updatePosition(a),this._errorShown||this._tooltip.updateContent(b)},_drawGuide:function(a,b){var c,d,e,f,g=Math.floor(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)));for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane)),c=this.options.guidelineDistance;g>c;c+=this.options.guidelineDistance)d=c/g,e={x:Math.floor(a.x*(1-d)+d*b.x),y:Math.floor(a.y*(1-d)+d*b.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,e)},_updateGuideColor:function(a){if(this._guidesContainer)for(var b=0,c=this._guidesContainer.childNodes.length;c>b;b++)this._guidesContainer.childNodes[b].style.backgroundColor=a},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var a,b,c=this.options.showLength;return 0===this._markers.length?a={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(b=c?this._getMeasurementString():"",a=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:b}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:b}),a},_getMeasurementString:function(){var a,b=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return a=this._measurementRunningTotal+b.distanceTo(c),L.GeometryUtil.readableDistance(a,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_vertexAdded:function(a){1===this._markers.length?this._measurementRunningTotal=0:this._measurementRunningTotal+=a.distanceTo(this._markers[this._markers.length-2].getLatLng())},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var a=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(a,b){L.Draw.Polyline.prototype.initialize.call(this,a,b),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var a=this._markers.length;1===a&&this._markers[0].on("click",this._finishShape,this),a>2&&(this._markers[a-1].on("dblclick",this._finishShape,this),a>3&&this._markers[a-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var a,b;return 0===this._markers.length?a=L.drawLocal.draw.handlers.polygon.tooltip.start:3>this._markers.length?a=L.drawLocal.draw.handlers.polygon.tooltip.cont:(a=L.drawLocal.draw.handlers.polygon.tooltip.end,b=this._getMeasurementString()),{text:a,subtext:b}},_getMeasurementString:function(){var a=this._area;return a?L.GeometryUtil.readableArea(a,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexAdded:function(){if(!this.options.allowIntersection&&this.options.showArea){var a=this._poly.getLatLngs();this._area=L.GeometryUtil.geodesicArea(a)}},_cleanUpShape:function(){var a=this._markers.length;a>0&&(this._markers[0].off("click",this._finishShape,this),a>2&&this._markers[a-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(a,b){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(b,"mouseup",this._onMouseUp),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_onMouseDown:function(a){this._isDrawing=!0,this._startLatLng=a.latlng,L.DomEvent.on(b,"mouseup",this._onMouseUp,this).preventDefault(a.originalEvent)},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b),this._isDrawing&&(this._tooltip.updateContent({text:this._endLabelText}),this._drawShape(b))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(a,b){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,a)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0},initialize:function(a,b){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(a)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(a){var b,c=a.latlng,d=(this.options.metric,this.options.showRadius),e=this.options.metric;this._tooltip.updatePosition(c),this._isDrawing&&(this._drawShape(c),b=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:d?"Radius: "+L.GeometryUtil.readableDistance(b,e):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(a,b){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b),this._mouseMarker.setLatLng(b),this._marker?this._marker.setLatLng(b):(this._marker=new L.Marker(b,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var a=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(a,b){this._poly=a,L.setOptions(this,b)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var a,b,c,d,e=this._poly._latlngs;for(a=0,c=e.length;c>a;a++)d=this._createMarker(e[a],a),d.on("click",this._onMarkerClick,this),this._markers.push(d);var f,g;for(a=0,b=c-1;c>a;b=a++)(0!==a||L.Polygon&&this._poly instanceof L.Polygon)&&(f=this._markers[b],g=this._markers[a],this._createMiddleMarker(f,g),this._updatePrevNext(f,g))},_createMarker:function(a,b){var c=new L.Marker(a,{draggable:!0,icon:this.options.icon});return c._origLatLng=a,c._index=b,c.on("drag",this._onMarkerDrag,this),c.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(c),c},_removeMarker:function(a){var b=a._index;this._markerGroup.removeLayer(a),this._markers.splice(b,1),this._poly.spliceLatLngs(b,1),this._updateIndexes(b,-1),a.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(a){var b=a.target;L.extend(b._origLatLng,b._latlng),b._middleLeft&&b._middleLeft.setLatLng(this._getMiddleLatLng(b._prev,b)),b._middleRight&&b._middleRight.setLatLng(this._getMiddleLatLng(b,b._next)),this._poly.redraw()},_onMarkerClick:function(a){if(!(3>this._poly._latlngs.length)){var b=a.target;this._removeMarker(b),this._updatePrevNext(b._prev,b._next),b._middleLeft&&this._markerGroup.removeLayer(b._middleLeft),b._middleRight&&this._markerGroup.removeLayer(b._middleRight),b._prev&&b._next?this._createMiddleMarker(b._prev,b._next):b._prev?b._next||(b._prev._middleRight=null):b._next._middleLeft=null,this._fireEdit()}},_updateIndexes:function(a,b){this._markerGroup.eachLayer(function(c){c._index>a&&(c._index+=b)})},_createMiddleMarker:function(a,b){var c,d,e,f=this._getMiddleLatLng(a,b),g=this._createMarker(f);g.setOpacity(.6),a._middleRight=b._middleLeft=g,d=function(){var d=b._index;g._index=d,g.off("click",c,this).on("click",this._onMarkerClick,this),f.lat=g.getLatLng().lat,f.lng=g.getLatLng().lng,this._poly.spliceLatLngs(d,0,f),this._markers.splice(d,0,g),g.setOpacity(1),this._updateIndexes(d,1),b._index++,this._updatePrevNext(a,g),this._updatePrevNext(g,b)},e=function(){g.off("dragstart",d,this),g.off("dragend",e,this),this._createMiddleMarker(a,g),this._createMiddleMarker(g,b)},c=function(){d.call(this),e.call(this),this._fireEdit()},g.on("click",c,this).on("dragstart",d,this).on("dragend",e,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(a,b){a&&(a._next=b),b&&(b._prev=a)},_getMiddleLatLng:function(a,b){var c=this._poly._map,d=c.latLngToLayerPoint(a.getLatLng()),e=c.latLngToLayerPoint(b.getLatLng());return c.layerPointToLatLng(d._add(e)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(a,b){this._shape=a,L.Util.setOptions(this,b)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var a=0,b=this._resizeMarkers.length;b>a;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(a,b){var c=new L.Marker(a,{draggable:!0,icon:b,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(a){a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(a){a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(a){var b=a.target;b.setOpacity(0)},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(a){var b=a.target,c=b.getLatLng();b===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw()},_onMarkerDragEnd:function(a){var b=a.target;b.setOpacity(1),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getBounds(),b=a.getCenter();this._moveMarker=this._createMarker(b,this.options.moveIcon)},_createResizeMarker:function(){var a=this._getCorners();this._resizeMarkers=[];for(var b=0,c=a.length;c>b;b++)this._resizeMarkers.push(this._createMarker(a[b],this.options.resizeIcon)),this._resizeMarkers[b]._cornerIndex=b},_onMarkerDragStart:function(a){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a);var b=this._getCorners(),c=a.target,d=c._cornerIndex;this._oppositeCorner=b[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(a){var b,c,d=a.target;d===this._moveMarker&&(b=this._shape.getBounds(),c=b.getCenter(),d.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,a)},_move:function(a){for(var b,c=this._shape.getLatLngs(),d=this._shape.getBounds(),e=d.getCenter(),f=[],g=0,h=c.length;h>g;g++)b=[c[g].lat-e.lat,c[g].lng-e.lng],f.push([a.lat+b[0],a.lng+b[1]]);this._shape.setLatLngs(f),this._repositionCornerMarkers()},_resize:function(a){var b;this._shape.setBounds(L.latLngBounds(a,this._oppositeCorner)),b=this._shape.getBounds(),this._moveMarker.setLatLng(b.getCenter())},_getCorners:function(){var a=this._shape.getBounds(),b=a.getNorthWest(),c=a.getNorthEast(),d=a.getSouthEast(),e=a.getSouthWest();return[b,c,d,e]},_toggleCornerMarkers:function(a){for(var b=0,c=this._resizeMarkers.length;c>b;b++)this._resizeMarkers[b].setOpacity(a)},_repositionCornerMarkers:function(){for(var a=this._getCorners(),b=0,c=this._resizeMarkers.length;c>b;b++)this._resizeMarkers[b].setLatLng(a[b])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getLatLng();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var a=this._shape.getLatLng(),b=this._getResizeMarkerPoint(a);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(b,this.options.resizeIcon))},_getResizeMarkerPoint:function(a){var b=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(a);return this._map.unproject([c.x+b,c.y-b])},_move:function(a){var b=this._getResizeMarkerPoint(a);this._resizeMarkers[0].setLatLng(b),this._shape.setLatLng(a)},_resize:function(a){var b=this._moveMarker.getLatLng(),c=b.distanceTo(a);this._shape.setRadius(c)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(this.cloneLatLng(a[c]));return b},cloneLatLng:function(a){return L.latLng(a.lat,a.lng)}},L.GeometryUtil={geodesicArea:function(a){var b,c,d=a.length,e=0,f=L.LatLng.DEG_TO_RAD;if(d>2){for(var g=0;d>g;g++)b=a[g],c=a[(g+1)%d],e+=(c.lng-b.lng)*f*(2+Math.sin(b.lat*f)+Math.sin(c.lat*f));e=40680631590769*e/2}return Math.abs(e)},readableArea:function(a,b){var c;return b?c=a>=1e4?(1e-4*a).toFixed(2)+" ha":a.toFixed(2)+" m&sup2;":(a*=.836127,c=a>=3097600?(a/3097600).toFixed(2)+" mi&sup2;":a>=4840?(a/4840).toFixed(2)+" acres":Math.ceil(a)+" yd&sup2;"),c},readableDistance:function(a,b){var c;return b?c=a>1e3?(a/1e3).toFixed(2)+" km":Math.ceil(a)+" m":(a*=1.09361,c=a>1760?(a/1760).toFixed(2)+" miles":Math.ceil(a)+" yd"),c}},L.Util.extend(L.LineUtil,{segmentsIntersect:function(a,b,c,d){return this._checkCounterclockwise(a,c,d)!==this._checkCounterclockwise(b,c,d)&&this._checkCounterclockwise(a,b,c)!==this._checkCounterclockwise(a,b,d)},_checkCounterclockwise:function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}}),L.Polyline.include({intersects:function(){var a,b,c,d=this._originalPoints,e=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(a=e-1;a>=3;a--)if(b=d[a-1],c=d[a],this._lineSegmentsIntersectsRange(b,c,a-2))return!0;return!1},newLatLngIntersects:function(a,b){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(a),b):!1},newPointIntersects:function(a,b){var c=this._originalPoints,d=c?c.length:0,e=c?c[d-1]:null,f=d-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(e,a,f,b?1:0)},_tooFewPointsForIntersection:function(a){var b=this._originalPoints,c=b?b.length:0;return c+=a||0,!this._originalPoints||3>=c},_lineSegmentsIntersectsRange:function(a,b,c,d){var e,f,g=this._originalPoints;d=d||0;for(var h=c;h>d;h--)if(e=g[h-1],f=g[h],L.LineUtil.segmentsIntersect(a,b,e,f))return!0;return!1}}),L.Polygon.include({intersects:function(){var a,b,c,d,e,f=this._originalPoints;return this._tooFewPointsForIntersection()?!1:(a=L.Polyline.prototype.intersects.call(this))?!0:(b=f.length,c=f[0],d=f[b-1],e=b-2,this._lineSegmentsIntersectsRange(d,c,e,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(a){if("0.5.1">=L.version)throw Error("Leaflet.draw 0.2.0+ requires Leaflet 0.6.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,a);var b,c;this._toolbars={},L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),b=L.stamp(c),this._toolbars[b]=c,this._toolbars[b].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),b=L.stamp(c),this._toolbars[b]=c,this._toolbars[b].on("enable",this._toolbarEnabled,this))},onAdd:function(a){var b,c=L.DomUtil.create("div","leaflet-draw"),d=!1,e="leaflet-draw-toolbar-top";for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(b=this._toolbars[f].addToolbar(a),d||(L.DomUtil.hasClass(b,e)||L.DomUtil.addClass(b.childNodes[0],e),d=!0),c.appendChild(b));return c},onRemove:function(){for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&this._toolbars[a].removeToolbar()},setDrawingOptions:function(a){for(var b in this._toolbars)this._toolbars[b]instanceof L.DrawToolbar&&this._toolbars[b].setOptions(a)},_toolbarEnabled:function(a){var b=""+L.stamp(a.target);for(var c in this._toolbars)this._toolbars.hasOwnProperty(c)&&c!==b&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(a){L.setOptions(this,a),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},removeToolbar:function(){for(var a in this._modes)this._modes.hasOwnProperty(a)&&(this._disposeButton(this._modes[a].button,this._modes[a].handler.enable),this._modes[a].handler.disable(),this._modes[a].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var b=0,c=this._actionButtons.length;c>b;b++)this._disposeButton(this._actionButtons[b].button,this._actionButtons[b].callback);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(a,b,c,d,e){var f=a.type;this._modes[f]={},this._modes[f].handler=a,this._modes[f].button=this._createButton({title:e,className:d+"-"+f,container:b,callback:this._modes[f].handler.enable,context:this._modes[f].handler}),this._modes[f].buttonIndex=c,this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(a){var b=L.DomUtil.create("a",a.className||"",a.container);return b.href="#",a.text&&(b.innerHTML=a.text),a.title&&(b.title=a.title),L.DomEvent.on(b,"click",L.DomEvent.stopPropagation).on(b,"mousedown",L.DomEvent.stopPropagation).on(b,"dblclick",L.DomEvent.stopPropagation).on(b,"click",L.DomEvent.preventDefault).on(b,"click",a.callback,a.context),b},_disposeButton:function(a,b){L.DomEvent.off(a,"click",L.DomEvent.stopPropagation).off(a,"mousedown",L.DomEvent.stopPropagation).off(a,"dblclick",L.DomEvent.stopPropagation).off(a,"click",L.DomEvent.preventDefault).off(a,"click",b)},_handlerActivated:function(a){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[a.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(a){for(var b,c,d=L.DomUtil.create("ul","leaflet-draw-actions"),e=a.length,f=0;e>f;f++)b=L.DomUtil.create("li","",d),c=this._createButton({title:a[f].title,text:a[f].text,container:b,callback:a[f].callback,context:a[f].context}),this._actionButtons.push({button:c,callback:a[f].callback});return d},_showActionsToolbar:function(){var a=this._activeMode.buttonIndex,b=this._lastButtonIndex,c=26,d=1,e=a*c+a*d-1;this._actionsContainer.style.top=e+"px",0===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),a===b&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(a){this._map=a,this._popupPane=a._panes.popupPane,this._container=a.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(a){return this._container?(a.subtext=a.subtext||"",0!==a.subtext.length||this._singleLineLabel?a.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(a.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+a.subtext+"</span><br />":"")+"<span>"+a.text+"</span>",this):this},updatePosition:function(a){var b=this._map.latLngToLayerPoint(a);return this._container&&L.DomUtil.setPosition(this._container,b),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(a){for(var b in this.options)this.options.hasOwnProperty(b)&&a[b]&&(a[b]=L.extend({},this.options[b],a[b]));L.Toolbar.prototype.initialize.call(this,a)},addToolbar:function(a){var b=L.DomUtil.create("div","leaflet-draw-section"),c=0,d="leaflet-draw-draw";return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(a,this.options.polyline),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(a,this.options.polygon),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(a,this.options.rectangle),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(a,this.options.circle),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(a,this.options.marker),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.marker),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),b.appendChild(this._toolbarContainer),b.appendChild(this._actionsContainer),b},setOptions:function(a){L.setOptions(this,a);for(var b in this._modes)this._modes.hasOwnProperty(b)&&a.hasOwnProperty(b)&&this._modes[b].handler.setOptions(a[b])}}),L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},initialize:function(a){a.edit&&(void 0===a.edit.selectedPathOptions&&(a.edit.selectedPathOptions=this.options.edit.selectedPathOptions),a.edit=L.extend({},this.options.edit,a.edit)),a.remove&&(a.remove=L.extend({},this.options.remove,a.remove)),L.Toolbar.prototype.initialize.call(this,a),this._selectedFeatureCount=0},addToolbar:function(a){var b=L.DomUtil.create("div","leaflet-draw-section"),c=0,d="leaflet-draw-edit",e=this.options.featureGroup;return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=a,this.options.edit&&this._initModeHandler(new L.EditToolbar.Edit(a,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,c++,d,L.drawLocal.edit.toolbar.buttons.edit),this.options.remove&&this._initModeHandler(new L.EditToolbar.Delete(a,{featureGroup:e}),this._toolbarContainer,c++,d,L.drawLocal.edit.toolbar.buttons.remove),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]),b.appendChild(this._toolbarContainer),b.appendChild(this._actionsContainer),this._checkDisabled(),e.on("layeradd layerremove",this._checkDisabled,this),b},removeToolbar:function(){L.Toolbar.prototype.removeToolbar.call(this),this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var a,b=this.options.featureGroup,c=0===b.getLayers().length;this.options.edit&&(a=this._modes[L.EditToolbar.Edit.TYPE].button,L.DomUtil.toggleClass(a,"leaflet-disabled"),a.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(a=this._modes[L.EditToolbar.Delete.TYPE].button,L.DomUtil.toggleClass(a,"leaflet-disabled"),a.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.DomUtil.toggleClass||L.Util.extend(L.DomUtil,{toggleClass:function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),this._selectedPathOptions=b.selectedPathOptions,this._featureGroup=b.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){this._map&&(this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))
},revertLayers:function(){this._featureGroup.eachLayer(function(a){this._revertLayer(a)},this)},save:function(){var a=new L.LayerGroup;this._featureGroup.eachLayer(function(b){b.edited&&(a.addLayer(b),b.edited=!1)}),this._map.fire("draw:edited",{layers:a})},_backupLayer:function(a){var b=L.Util.stamp(a);this._uneditedLayerProps[b]||(this._uneditedLayerProps[b]=a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?{latlngs:L.LatLngUtil.cloneLatLngs(a.getLatLngs())}:a instanceof L.Circle?{latlng:L.LatLngUtil.cloneLatLng(a.getLatLng()),radius:a.getRadius()}:{latlng:L.LatLngUtil.cloneLatLng(a.getLatLng())})},_revertLayer:function(a){var b=L.Util.stamp(a);a.edited=!1,this._uneditedLayerProps.hasOwnProperty(b)&&(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?a.setLatLngs(this._uneditedLayerProps[b].latlngs):a instanceof L.Circle?(a.setLatLng(this._uneditedLayerProps[b].latlng),a.setRadius(this._uneditedLayerProps[b].radius)):a.setLatLng(this._uneditedLayerProps[b].latlng))},_toggleMarkerHighlight:function(a){if(a._icon){var b=a._icon;b.style.display="none",L.DomUtil.hasClass(b,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(b,"leaflet-edit-marker-selected"),this._offsetMarker(b,-4)):(L.DomUtil.addClass(b,"leaflet-edit-marker-selected"),this._offsetMarker(b,4)),b.style.display=""}},_offsetMarker:function(a,b){var c=parseInt(a.style.marginTop,10)-b,d=parseInt(a.style.marginLeft,10)-b;a.style.marginTop=c+"px",a.style.marginLeft=d+"px"},_enableLayerEdit:function(a){var b,c=a.layer||a.target||a,d=c instanceof L.Marker;(!d||c._icon)&&(this._backupLayer(c),this._selectedPathOptions&&(b=L.Util.extend({},this._selectedPathOptions),d?this._toggleMarkerHighlight(c):(c.options.previousOptions=c.options,c instanceof L.Circle||c instanceof L.Polygon||c instanceof L.Rectangle||(b.fill=!1),c.setStyle(b))),d?(c.dragging.enable(),c.on("dragend",this._onMarkerDragEnd)):c.editing.enable())},_disableLayerEdit:function(a){var b=a.layer||a.target||a;b.edited=!1,this._selectedPathOptions&&(b instanceof L.Marker?this._toggleMarkerHighlight(b):(b.setStyle(b.options.previousOptions),delete b.options.previousOptions)),b instanceof L.Marker?(b.dragging.disable(),b.off("dragend",this._onMarkerDragEnd,this)):b.editing.disable()},_onMarkerDragEnd:function(a){var b=a.target;b.edited=!0},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),L.Util.setOptions(this,b),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}))},addHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(a){this._deletableLayers.addLayer(a)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(a){var b=a.layer||a.target||a;b.on("click",this._removeLayer,this)},_disableLayerDelete:function(a){var b=a.layer||a.target||a;b.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(b)},_removeLayer:function(a){var b=a.layer||a.target||a;this._deletableLayers.removeLayer(b),this._deletedLayers.addLayer(b)},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(this,document)},{}],26:[function(){!function(a,b){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(a){if(a instanceof L.LayerGroup){var b=[];for(var c in a._layers)b.push(a._layers[c]);return this.addLayers(b)}if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this;if(!this._map)return this._needsClustering.push(a),this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(a,this._maxZoom);var d=a,e=this._map.getZoom();if(a.__parent)for(;d.__parent._zoom>=e;)d=d.__parent;return this._currentShownBounds.contains(d.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,d):this._animationAddLayerNonAnimated(a,d)),this},removeLayer:function(a){if(a instanceof L.LayerGroup){var b=[];for(var c in a._layers)b.push(a._layers[c]);return this.removeLayers(b)}return a.getLatLng?this._map?a.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a)),this._removeLayer(a,!0),this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.setOpacity&&a.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,a)&&this.hasLayer(a)&&this._needsRemoving.push(a),this):(this._nonPointGroup.removeLayer(a),this)},addLayers:function(a){var b,c,d,e=this._map,f=this._featureGroup,g=this._nonPointGroup;for(b=0,c=a.length;c>b;b++)if(d=a[b],d.getLatLng){if(!this.hasLayer(d))if(e){if(this._addLayer(d,this._maxZoom),d.__parent&&2===d.__parent.getChildCount()){var h=d.__parent.getAllChildMarkers(),i=h[0]===d?h[1]:h[0];f.removeLayer(i)}}else this._needsClustering.push(d)}else g.addLayer(d);return e&&(f.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)),this},removeLayers:function(a){var b,c,d,e=this._featureGroup,f=this._nonPointGroup;if(!this._map){for(b=0,c=a.length;c>b;b++)d=a[b],this._arraySplice(this._needsClustering,d),f.removeLayer(d);return this}for(b=0,c=a.length;c>b;b++)d=a[b],d.__parent?(this._removeLayer(d,!0,!0),e.hasLayer(d)&&(e.removeLayer(d),d.setOpacity&&d.setOpacity(1))):f.removeLayer(d);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),e.eachLayer(function(a){a instanceof L.MarkerCluster&&a._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(a){delete a.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var a=new L.LatLngBounds;if(this._topClusterLevel)a.extend(this._topClusterLevel._bounds);else for(var b=this._needsClustering.length-1;b>=0;b--)a.extend(this._needsClustering[b].getLatLng());return a.extend(this._nonPointGroup.getBounds()),a},eachLayer:function(a,b){var c,d=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(d),c=d.length-1;c>=0;c--)a.call(b,d[c]);this._nonPointGroup.eachLayer(a,b)},getLayers:function(){var a=[];return this.eachLayer(function(b){a.push(b)}),a},getLayer:function(a){var b=null;return this.eachLayer(function(c){L.stamp(c)===a&&(b=c)}),b},hasLayer:function(a){if(!a)return!1;var b,c=this._needsClustering;for(b=c.length-1;b>=0;b--)if(c[b]===a)return!0;for(c=this._needsRemoving,b=c.length-1;b>=0;b--)if(c[b]===a)return!1;return!(!a.__parent||a.__parent._group!==this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,b){var c=function(){if((a._icon||a.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",c,this),this.off("animationend",c,this),a._icon)b();else if(a.__parent._icon){var d=function(){this.off("spiderfied",d,this),b()};this.on("spiderfied",d,this),a.__parent.spiderfy()}};a._icon&&this._map.getBounds().contains(a.getLatLng())?b():a.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",c,this),this._map.panTo(a.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),this._map.setView(a.getLatLng(),a.__parent._zoom+1),a.__parent.zoomToBounds())},onAdd:function(a){this._map=a;var b,c,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(a),this._nonPointGroup.onAdd(a),this._gridClusters||this._generateInitialClusters(),b=0,c=this._needsRemoving.length;c>b;b++)d=this._needsRemoving[b],this._removeLayer(d,!0);for(this._needsRemoving=[],b=0,c=this._needsClustering.length;c>b;b++)d=this._needsClustering[b],d.getLatLng?d.__parent||this._addLayer(d,this._maxZoom):this._featureGroup.addLayer(d);this._needsClustering=[],this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this),a.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(a),this._nonPointGroup.onRemove(a),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(a){for(var b=a;b&&!b._icon;)b=b.__parent;return b||null},_arraySplice:function(a,b){for(var c=a.length-1;c>=0;c--)if(a[c]===b)return a.splice(c,1),!0},_removeLayer:function(a,b,c){var d=this._gridClusters,e=this._gridUnclustered,f=this._featureGroup,g=this._map;if(b)for(var h=this._maxZoom;h>=0&&e[h].removeObject(a,g.project(a.getLatLng(),h));h--);var i,j=a.__parent,k=j._markers;for(this._arraySplice(k,a);j&&(j._childCount--,!(j._zoom<0));)b&&j._childCount<=1?(i=j._markers[0]===a?j._markers[1]:j._markers[0],d[j._zoom].removeObject(j,g.project(j._cLatLng,j._zoom)),e[j._zoom].addObject(i,g.project(i.getLatLng(),j._zoom)),this._arraySplice(j.__parent._childClusters,j),j.__parent._markers.push(i),i.__parent=j.__parent,j._icon&&(f.removeLayer(j),c||f.addLayer(i))):(j._recalculateBounds(),c&&j._icon||j._updateIcon()),j=j.__parent;delete a.__parent},_isOrIsParent:function(a,b){for(;b;){if(a===b)return!0;b=b.parentNode}return!1},_propagateEvent:function(a){if(a.layer instanceof L.MarkerCluster){if(a.originalEvent&&this._isOrIsParent(a.layer._icon,a.originalEvent.relatedTarget))return;a.type="cluster"+a.type}this.fire(a.type,a)},_defaultIconCreateFunction:function(a){var b=a.getChildCount(),c=" marker-cluster-";return c+=10>b?"small":100>b?"medium":"large",new L.DivIcon({html:"<div><span>"+b+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,b=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick;(b||d)&&this.on("clusterclick",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(a){var b=this._map;b.getMaxZoom()===b.getZoom()?this.options.spiderfyOnMaxZoom&&a.layer.spiderfy():this.options.zoomToBoundsOnClick&&a.layer.zoomToBounds(),a.originalEvent&&13===a.originalEvent.keyCode&&b._container.focus()},_showCoverage:function(a){var b=this._map;this._inZoomAnimation||(this._shownPolygon&&b.removeLayer(this._shownPolygon),a.layer.getChildCount()>2&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),b.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var a=this.options.spiderfyOnMaxZoom,b=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this._map;(a||c)&&this.off("clusterclick",this._zoomOrSpiderfy,this),b&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,a),this._currentShownBounds=a}},_generateInitialClusters:function(){var a=this._map.getMaxZoom(),b=this.options.maxClusterRadius;this.options.disableClusteringAtZoom&&(a=this.options.disableClusteringAtZoom-1),this._maxZoom=a,this._gridClusters={},this._gridUnclustered={};for(var c=a;c>=0;c--)this._gridClusters[c]=new L.DistanceGrid(b),this._gridUnclustered[c]=new L.DistanceGrid(b);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(a,b){var c,d,e=this._gridClusters,f=this._gridUnclustered;for(this.options.singleMarkerMode&&(a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}}));b>=0;b--){c=this._map.project(a.getLatLng(),b);var g=e[b].getNearObject(c);if(g)return g._addChild(a),void(a.__parent=g);if(g=f[b].getNearObject(c)){var h=g.__parent;h&&this._removeLayer(g,!1);var i=new L.MarkerCluster(this,b,g,a);e[b].addObject(i,this._map.project(i._cLatLng,b)),g.__parent=i,a.__parent=i;var j=i;for(d=b-1;d>h._zoom;d--)j=new L.MarkerCluster(this,d,j),e[d].addObject(j,this._map.project(g.getLatLng(),d));for(h._addChild(j),d=b;d>=0&&f[d].removeObject(g,this._map.project(g.getLatLng(),d));d--);return}f[b].addObject(a,c)}this._topClusterLevel._addChild(a),a.__parent=this._topClusterLevel},_enqueue:function(a){this._queue.push(a),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var a=0;a<this._queue.length;a++)this._queue[a].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.contains(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var a=this._map,b=a.getBounds(),c=b._southWest,d=b._northEast,e=L.Browser.mobile?0:Math.abs(c.lat-d.lat),f=L.Browser.mobile?0:Math.abs(c.lng-d.lng);return new L.LatLngBounds(new L.LatLng(c.lat-e,c.lng-f,!0),new L.LatLng(d.lat+e,d.lng+f,!0))},_animationAddLayerNonAnimated:function(a,b){if(b===a)this._featureGroup.addLayer(a);else if(2===b._childCount){b._addToMap();var c=b.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else b._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(a,b){var c,d=this._getExpandedVisibleBounds(),e=this._featureGroup;this._topClusterLevel._recursively(d,a,0,function(f){var g,h=f._latlng,i=f._markers;for(d.contains(h)||(h=null),f._isSingleParent()&&a+1===b?(e.removeLayer(f),f._recursivelyAddChildrenToMap(null,b,d)):(f.setOpacity(0),f._recursivelyAddChildrenToMap(h,b,d)),c=i.length-1;c>=0;c--)g=i[c],d.contains(g._latlng)||e.removeLayer(g)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(d,b),e.eachLayer(function(a){a instanceof L.MarkerCluster||!a._icon||a.setOpacity(1)}),this._topClusterLevel._recursively(d,a,b,function(a){a._recursivelyRestoreChildPositions(b)}),this._enqueue(function(){this._topClusterLevel._recursively(d,a,0,function(a){e.removeLayer(a),a.setOpacity(1)}),this._animationEnd()})},_animationZoomOut:function(a,b){this._animationZoomOutSingle(this._topClusterLevel,a-1,b),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(a,b,c){var d=this._getExpandedVisibleBounds();a._recursivelyAnimateChildrenInAndAddSelfToMap(d,b+1,c);var e=this;this._forceLayout(),a._recursivelyBecomeVisible(d,c),this._enqueue(function(){if(1===a._childCount){var f=a._markers[0];f.setLatLng(f.getLatLng()),f.setOpacity(1)}else a._recursively(d,c,0,function(a){a._recursivelyRemoveChildrenFromMap(d,b+1)});e._animationEnd()})},_animationAddLayer:function(a,b){var c=this,d=this._featureGroup;d.addLayer(a),b!==a&&(b._childCount>2?(b._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(b.getLatLng())),a.setOpacity(0),this._enqueue(function(){d.removeLayer(a),a.setOpacity(1),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(b,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(b.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds())},_animationZoomOut:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,b){this._animationAddLayerNonAnimated(a,b)}}),L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)},L.MarkerCluster=L.Marker.extend({initialize:function(a,b,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=a,this._zoom=b,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),d&&this._addChild(d)},getAllChildMarkers:function(a){a=a||[];for(var b=this._childClusters.length-1;b>=0;b--)this._childClusters[b].getAllChildMarkers(a);for(var c=this._markers.length-1;c>=0;c--)a.push(this._markers[c]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var a,b=this._childClusters.slice(),c=this._group._map,d=c.getBoundsZoom(this._bounds),e=this._zoom+1,f=c.getZoom();b.length>0&&d>e;){e++;var g=[];for(a=0;a<b.length;a++)g=g.concat(b[a]._childClusters);b=g}d>e?this._group._map.setView(this._latlng,e):f>=d?this._group._map.setView(this._latlng,f+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var a=new L.LatLngBounds;return a.extend(this._bounds),a},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,b){this._iconNeedsUpdate=!0,this._expandBounds(a),a instanceof L.MarkerCluster?(b||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(b||this._markers.push(a),this._childCount++),this.__parent&&this.__parent._addChild(a,!0)},_expandBounds:function(a){var b,c=a._wLatLng||a._latlng;a instanceof L.MarkerCluster?(this._bounds.extend(a._bounds),b=a._childCount):(this._bounds.extend(c),b=1),this._cLatLng||(this._cLatLng=a._cLatLng||c);var d=this._childCount+b;this._wLatLng?(this._wLatLng.lat=(c.lat*b+this._wLatLng.lat*this._childCount)/d,this._wLatLng.lng=(c.lng*b+this._wLatLng.lng*this._childCount)/d):this._latlng=this._wLatLng=new L.LatLng(c.lat,c.lng)},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,b,c){this._recursively(a,0,c-1,function(a){var c,d,e=a._markers;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.setOpacity(0))},function(a){var c,d,e=a._childClusters;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,b,c){this._recursively(a,c,0,function(d){d._recursivelyAnimateChildrenIn(a,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),b),d._isSingleParent()&&b-1===c?(d.setOpacity(1),d._recursivelyRemoveChildrenFromMap(a,b)):d.setOpacity(0),d._addToMap()})},_recursivelyBecomeVisible:function(a,b){this._recursively(a,0,b,null,function(a){a.setOpacity(1)})},_recursivelyAddChildrenToMap:function(a,b,c){this._recursively(c,-1,b,function(d){if(b!==d._zoom)for(var e=d._markers.length-1;e>=0;e--){var f=d._markers[e];c.contains(f._latlng)&&(a&&(f._backupLatlng=f.getLatLng(),f.setLatLng(a),f.setOpacity&&f.setOpacity(0)),d._group._featureGroup.addLayer(f))}},function(b){b._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var b=this._markers.length-1;b>=0;b--){var c=this._markers[b];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(a-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,b,c){var d,e;this._recursively(a,-1,b-1,function(a){for(e=a._markers.length-1;e>=0;e--)d=a._markers[e],c&&c.contains(d._latlng)||(a._group._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1))},function(a){for(e=a._childClusters.length-1;e>=0;e--)d=a._childClusters[e],c&&c.contains(d._latlng)||(a._group._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1))})},_recursively:function(a,b,c,d,e){var f,g,h=this._childClusters,i=this._zoom;if(b>i)for(f=h.length-1;f>=0;f--)g=h[f],a.intersects(g._bounds)&&g._recursively(a,b,c,d,e);else if(d&&d(this),e&&this._zoom===c&&e(this),c>i)for(f=h.length-1;f>=0;f--)g=h[f],a.intersects(g._bounds)&&g._recursively(a,b,c,d,e)},_recalculateBounds:function(){var a,b=this._markers,c=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,a=b.length-1;a>=0;a--)this._expandBounds(b[a]);for(a=c.length-1;a>=0;a--)this._expandBounds(c[a])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(a){this._cellSize=a,this._sqCellSize=a*a,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(a,b){var c=this._getCoord(b.x),d=this._getCoord(b.y),e=this._grid,f=e[d]=e[d]||{},g=f[c]=f[c]||[],h=L.Util.stamp(a);this._objectPoint[h]=b,g.push(a)},updateObject:function(a,b){this.removeObject(a),this.addObject(a,b)},removeObject:function(a,b){var c,d,e=this._getCoord(b.x),f=this._getCoord(b.y),g=this._grid,h=g[f]=g[f]||{},i=h[e]=h[e]||[];for(delete this._objectPoint[L.Util.stamp(a)],c=0,d=i.length;d>c;c++)if(i[c]===a)return i.splice(c,1),1===d&&delete h[e],!0},eachObject:function(a,b){var c,d,e,f,g,h,i,j=this._grid;for(c in j){g=j[c];for(d in g)for(h=g[d],e=0,f=h.length;f>e;e++)i=a.call(b,h[e]),i&&(e--,f--)}},getNearObject:function(a){var b,c,d,e,f,g,h,i,j=this._getCoord(a.x),k=this._getCoord(a.y),l=this._objectPoint,m=this._sqCellSize,n=null;for(b=k-1;k+1>=b;b++)if(e=this._grid[b])for(c=j-1;j+1>=c;c++)if(f=e[c])for(d=0,g=f.length;g>d;d++)h=f[d],i=this._sqDist(l[L.Util.stamp(h)],a),m>i&&(m=i,n=h);return n},_getCoord:function(a){return Math.floor(a/this._cellSize)},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}},function(){L.QuickHull={getDistant:function(a,b){var c=b[1].lat-b[0].lat,d=b[0].lng-b[1].lng;return d*(a.lat-b[0].lat)+c*(a.lng-b[0].lng)},findMostDistantPointFromBaseLine:function(a,b){var c,d,e,f=0,g=null,h=[];for(c=b.length-1;c>=0;c--)d=b[c],e=this.getDistant(d,a),e>0&&(h.push(d),e>f&&(f=e,g=d));return{maxPoint:g,newPoints:h}},buildConvexHull:function(a,b){var c=[],d=this.findMostDistantPointFromBaseLine(a,b);return d.maxPoint?(c=c.concat(this.buildConvexHull([a[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,a[1]],d.newPoints))):[a[0]]},getConvexHull:function(a){var b,c=!1,d=!1,e=null,f=null;for(b=a.length-1;b>=0;b--){var g=a[b];(c===!1||g.lat>c)&&(e=g,c=g.lat),(d===!1||g.lat<d)&&(f=g,d=g.lat)}var h=[].concat(this.buildConvexHull([f,e],a),this.buildConvexHull([e,f],a));return h}}}(),L.MarkerCluster.include({getConvexHull:function(){var a,b,c=this.getAllChildMarkers(),d=[];for(b=c.length-1;b>=0;b--)a=c[b].getLatLng(),d.push(a);return L.QuickHull.getConvexHull(d)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var a,b=this.getAllChildMarkers(),c=this._group,d=c._map,e=d.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,b.length>=this._circleSpiralSwitchover?a=this._generatePointsSpiral(b.length,e):(e.y+=10,a=this._generatePointsCircle(b.length,e)),this._animationSpiderfy(b,a)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,b){var c,d,e=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+a),f=e/this._2PI,g=this._2PI/a,h=[];for(h.length=a,c=a-1;c>=0;c--)d=this._circleStartAngle+c*g,h[c]=new L.Point(b.x+f*Math.cos(d),b.y+f*Math.sin(d))._round();return h},_generatePointsSpiral:function(a,b){var c,d=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,e=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,f=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,g=0,h=[];for(h.length=a,c=a-1;c>=0;c--)g+=e/d+5e-4*c,h[c]=new L.Point(b.x+d*Math.cos(g),b.y+d*Math.sin(g))._round(),d+=this._2PI*f/g;return h},_noanimationUnspiderfy:function(){var a,b,c=this._group,d=c._map,e=c._featureGroup,f=this.getAllChildMarkers();for(this.setOpacity(1),b=f.length-1;b>=0;b--)a=f[b],e.removeLayer(a),a._preSpiderfyLatlng&&(a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng),a.setZIndexOffset&&a.setZIndexOffset(0),a._spiderLeg&&(d.removeLayer(a._spiderLeg),delete a._spiderLeg);c._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return b.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(a,c){var d,e,f,g,h=this,i=this._group,j=i._map,k=i._featureGroup,l=j.latLngToLayerPoint(this._latlng);for(d=a.length-1;d>=0;d--)e=a[d],e.setOpacity?(e.setZIndexOffset(1e6),e.setOpacity(0),k.addLayer(e),e._setPos(l)):k.addLayer(e);i._forceLayout(),i._animationStart();var m=L.Path.SVG?0:.3,n=L.Path.SVG_NS;for(d=a.length-1;d>=0;d--)if(g=j.layerPointToLatLng(c[d]),e=a[d],e._preSpiderfyLatlng=e._latlng,e.setLatLng(g),e.setOpacity&&e.setOpacity(1),f=new L.Polyline([h._latlng,g],{weight:1.5,color:"#222",opacity:m}),j.addLayer(f),e._spiderLeg=f,L.Path.SVG&&this.SVG_ANIMATION){var o=f._path.getTotalLength();f._path.setAttribute("stroke-dasharray",o+","+o);var p=b.createElementNS(n,"animate");p.setAttribute("attributeName","stroke-dashoffset"),p.setAttribute("begin","indefinite"),p.setAttribute("from",o),p.setAttribute("to",0),p.setAttribute("dur",.25),f._path.appendChild(p),p.beginElement(),p=b.createElementNS(n,"animate"),p.setAttribute("attributeName","stroke-opacity"),p.setAttribute("attributeName","stroke-opacity"),p.setAttribute("begin","indefinite"),p.setAttribute("from",0),p.setAttribute("to",.5),p.setAttribute("dur",.25),f._path.appendChild(p),p.beginElement()}if(h.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),d=a.length-1;d>=0;d--)e=a[d]._spiderLeg,e.options.opacity=.5,e._path.setAttribute("stroke-opacity",.5);setTimeout(function(){i._animationEnd(),i.fire("spiderfied")},200)},_animationUnspiderfy:function(a){var b,c,d,e=this._group,f=e._map,g=e._featureGroup,h=a?f._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):f.latLngToLayerPoint(this._latlng),i=this.getAllChildMarkers(),j=L.Path.SVG&&this.SVG_ANIMATION;for(e._animationStart(),this.setOpacity(1),c=i.length-1;c>=0;c--)b=i[c],b._preSpiderfyLatlng&&(b.setLatLng(b._preSpiderfyLatlng),delete b._preSpiderfyLatlng,b.setOpacity?(b._setPos(h),b.setOpacity(0)):g.removeLayer(b),j&&(d=b._spiderLeg._path.childNodes[0],d.setAttribute("to",d.getAttribute("from")),d.setAttribute("from",0),d.beginElement(),d=b._spiderLeg._path.childNodes[1],d.setAttribute("from",.5),d.setAttribute("to",0),d.setAttribute("stroke-opacity",0),d.beginElement(),b._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var a=0;for(c=i.length-1;c>=0;c--)b=i[c],b._spiderLeg&&a++;for(c=i.length-1;c>=0;c--)b=i[c],b._spiderLeg&&(b.setOpacity&&(b.setOpacity(1),b.setZIndexOffset(0)),a>1&&g.removeLayer(b),f.removeLayer(b._spiderLeg),delete b._spiderLeg);e._animationEnd()},200)}}:{_animationSpiderfy:function(a,b){var c,d,e,f,g=this._group,h=g._map,i=g._featureGroup;for(c=a.length-1;c>=0;c--)f=h.layerPointToLatLng(b[c]),d=a[c],d._preSpiderfyLatlng=d._latlng,d.setLatLng(f),d.setZIndexOffset&&d.setZIndexOffset(1e6),i.addLayer(d),e=new L.Polyline([this._latlng,f],{weight:1.5,color:"#222"}),h.addLayer(e),d._spiderLeg=e;this.setOpacity(.3),g.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()
},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&(this._featureGroup.removeLayer(a),a.setOpacity(1),a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}})}(window,document)},{}],27:[function(a,b){!function(a,c,d){var e=a.L,f={};f.version="0.7.2","object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return a.L=e,this},a.L=f,f.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return f.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=f.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){var e=b[c];if(e===d)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};f.Util.requestAnimFrame=function(b,d,g,h){return b=f.bind(b,d),g&&e===c?void b():e.call(a,b,h)},f.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);a.statics&&(f.extend(b,a.statics),delete a.statics),a.includes&&(f.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=f.extend({},d.options,a.options)),f.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},f.Class.include=function(a){f.extend(this.prototype,a)},f.Class.mergeOptions=function(a){f.extend(this.prototype.options,a)},f.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var g="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m=this[g]=this[g]||{},n=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;e>d;d++)h={action:b,context:c||this},i=a[d],n?(j=i+"_idx",k=j+"_len",l=m[j]=m[j]||{},l[n]||(l[n]=[],m[k]=(m[k]||0)+1),l[n].push(h)):(m[i]=m[i]||[],m[i].push(h));return this},hasEventListeners:function(a){var b=this[g];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[g])return this;if(!a)return this.clearAllEventListeners();if(f.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var d,e,h,i,j,k,l,m,n,o=this[g],p=c&&c!==this&&f.stamp(c);for(a=f.Util.splitWords(a),d=0,e=a.length;e>d;d++)if(h=a[d],k=h+"_idx",l=k+"_len",m=o[k],b){if(i=p&&m?m[p]:o[h]){for(j=i.length-1;j>=0;j--)i[j].action!==b||c&&i[j].context!==c||(n=i.splice(j,1),n[0].action=f.Util.falseFn);c&&m&&0===i.length&&(delete m[p],o[l]--)}}else delete o[h],delete o[k],delete o[l];return this},clearAllEventListeners:function(){return delete this[g],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,d,e,h,i,j=f.Util.extend({},b,{type:a,target:this}),k=this[g];if(k[a])for(c=k[a].slice(),d=0,e=c.length;e>d;d++)c[d].action.call(c[d].context,j);h=k[a+"_idx"];for(i in h)if(c=h[i].slice())for(d=0,e=c.length;e>d;d++)c[d].action.call(c[d].context,j);return this},addOneTimeEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=f.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,function(){var b="ActiveXObject"in a,e=b&&!c.addEventListener,g=navigator.userAgent.toLowerCase(),h=-1!==g.indexOf("webkit"),i=-1!==g.indexOf("chrome"),j=-1!==g.indexOf("phantom"),k=-1!==g.indexOf("android"),l=-1!==g.search("android [23]"),m=-1!==g.indexOf("gecko"),n=typeof orientation!=d+"",o=a.navigator&&a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints&&!a.PointerEvent,p=a.PointerEvent&&a.navigator.pointerEnabled&&a.navigator.maxTouchPoints||o,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=c.documentElement,s=b&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!l,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!j,x=!a.L_NO_TOUCH&&!j&&function(){var a="ontouchstart";if(p||a in r)return!0;var b=c.createElement("div"),d=!1;return b.setAttribute?(b.setAttribute(a,"return;"),"function"==typeof b[a]&&(d=!0),b.removeAttribute(a),b=null,d):!1}();f.Browser={ie:b,ielt9:e,webkit:h,gecko:m&&!h&&!a.opera&&!b,android:k,android23:l,chrome:i,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:n,mobileWebkit:n&&h,mobileWebkit3d:n&&t,mobileOpera:n&&a.opera,touch:x,msPointer:o,pointer:p,retina:q}}(),f.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(a){return this.clone()._add(f.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(f.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=f.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=f.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=f.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(a,b,c){return a instanceof f.Point?a:f.Util.isArray(a)?new f.Point(a[0],a[1]):a===d||null===a?a:new f.Point(a,b,c)},f.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},f.Bounds.prototype={extend:function(a){return a=f.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof f.Point?f.point(a):f.bounds(a),a instanceof f.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(a,b){return!a||a instanceof f.Bounds?a:new f.Bounds(a,b)},f.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},f.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new f.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},f.DomUtil={get:function(a){return"string"==typeof a?c.getElementById(a):a},getStyle:function(a,b){var d=a.style[b];if(!d&&a.currentStyle&&(d=a.currentStyle[b]),(!d||"auto"===d)&&c.defaultView){var e=c.defaultView.getComputedStyle(a,null);d=e?e[b]:null}return"auto"===d?null:d},getViewportOffset:function(a){var b,d=0,e=0,g=a,h=c.body,i=c.documentElement;do{if(d+=g.offsetTop||0,e+=g.offsetLeft||0,d+=parseInt(f.DomUtil.getStyle(g,"borderTopWidth"),10)||0,e+=parseInt(f.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,b=f.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===b)break;if("fixed"===b){d+=h.scrollTop||i.scrollTop||0,e+=h.scrollLeft||i.scrollLeft||0;break}if("relative"===b&&!g.offsetLeft){var j=f.DomUtil.getStyle(g,"width"),k=f.DomUtil.getStyle(g,"max-width"),l=g.getBoundingClientRect();("none"!==j||"none"!==k)&&(e+=l.left+g.clientLeft),d+=l.top+(h.scrollTop||i.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;d-=g.scrollTop||0,e-=g.scrollLeft||0,g=g.parentNode}while(g);return new f.Point(e,d)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(c.body,"direction")),f.DomUtil._docIsLtr},create:function(a,b,d){var e=c.createElement(a);return e.className=b,d&&d.appendChild(e),e},hasClass:function(a,b){if(a.classList!==d)return a.classList.contains(b);var c=f.DomUtil._getClass(a);return c.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){if(a.classList!==d)for(var c=f.Util.splitWords(b),e=0,g=c.length;g>e;e++)a.classList.add(c[e]);else if(!f.DomUtil.hasClass(a,b)){var h=f.DomUtil._getClass(a);f.DomUtil._setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==d?a.classList.remove(b):f.DomUtil._setClass(a,f.Util.trim((" "+f.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===d?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===d?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var b=c.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},getTranslateString:function(a){var b=f.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=f.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&f.Browser.any3d?a.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in c)f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(a,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(a,"selectstart",f.DomEvent.preventDefault)}});else{var b=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(b){var a=c.documentElement.style;this._userSelect=a[b],a[b]="none"}},enableTextSelection:function(){b&&(c.documentElement.style[b]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(a,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(a,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(a,b,c){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=a,this.lng=b,c!==d&&(this.alt=parseFloat(c))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(a){if(!a)return!1;a=f.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=f.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+f.Util.formatNum(this.lat,a)+", "+f.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=f.latLng(a);var b=6378137,c=f.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,e=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(e/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new f.LatLng(this.lat,c)}},f.latLng=function(a,b){return a instanceof f.LatLng?a:f.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new f.LatLng(a[0],a[1],a[2]):null:a===d||null===a?a:"object"==typeof a&&"lat"in a?new f.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===d?null:new f.LatLng(a,b)},f.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},f.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=f.latLng(a);return a=null!==b?b:f.latLngBounds(a),a instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new f.LatLng(a.lat,a.lng),this._northEast=new f.LatLng(a.lat,a.lng)):a instanceof f.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new f.LatLngBounds(new f.LatLng(b.lat-d,b.lng-e),new f.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof f.LatLng?f.latLng(a):f.latLngBounds(a);var b,c,d=this._southWest,e=this._northEast;return a instanceof f.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=e.lat&&b.lng>=d.lng&&c.lng<=e.lng},intersects:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return a?(a=f.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(a,b){return!a||a instanceof f.LatLngBounds?a:new f.LatLngBounds(a,b)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new f.Point(e,g)},unproject:function(a){var b=f.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new f.LatLng(d,c)}},f.Projection.LonLat={project:function(a){return new f.Point(a.lng,a.lat)},unproject:function(a){return new f.LatLng(a.y,a.x)}},f.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){var b=this.scale(a);return f.point(b,b)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(a,b){b=f.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==d&&this.setView(f.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return b=b===d?this.getZoom():b,this._resetView(f.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),g=a instanceof f.Point?a:this.latLngToContainerPoint(a),h=g.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():f.latLngBounds(a);var c=f.point(b.paddingTopLeft||b.padding||[0,0]),d=f.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d)),g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(g),e);return e=b&&b.maxZoom?Math.min(b.maxZoom,e):e,this.setView(j,e,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(f.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=f.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=f.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=f.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return a?f.stamp(a)in this._layers:!1},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=f.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),e=c.divideBy(2).round(),g=d.subtract(e);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=d}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new f.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===d?this._layersMinZoom===d?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===d?this._layersMaxZoom===d?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=f.latLngBounds(a);var d,e=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=f.point(c||[0,0]);do e++,d=this.project(j,e).subtract(this.project(i,e)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=e);return k&&b?null:b?e:e-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new f.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===d?this._zoom:b,this.options.crs.latLngToPoint(f.latLng(a),b)},unproject:function(a,b){return b=b===d?this._zoom:b,this.options.crs.pointToLatLng(f.point(a),b)},layerPointToLatLng:function(a){var b=f.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(f.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return f.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return f.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(f.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(a)))},mouseEventToContainerPoint:function(a){return f.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=f.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;f.DomUtil.addClass(a,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=f.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(a.markerPane,b),f.DomUtil.addClass(a.shadowPane,b),f.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return f.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?f.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var e=this._zoom!==b;d||(this.fire("movestart"),e&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!c}),this.fire("move"),(e||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-1/0,e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(c=Math.max(c,f.options.maxZoom))}a===d?this._layersMaxZoom=this._layersMinZoom=d:(this._layersMaxZoom=c,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(f.DomEvent){b=b||"on",f.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,d,e=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(c=0,d=e.length;d>c;c++)f.DomEvent[b](this._container,e[c],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!f.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&f.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),e=this.layerPointToLatLng(d);this.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),e=this.getSize().divideBy(2),g=new f.Bounds(d.subtract(e),d.add(e)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new f.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),e=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-e.x),h=this._rebound(d.y,-e.y);return new f.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();
return Math.max(b,Math.min(c,a))}}),f.map=function(a,b){return new f.Map(a,b)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*e,i=d*b,j=g/e,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-e*Math.log(m),new f.Point(h,i)},unproject:function(a){for(var b,c=f.LatLng.RAD_TO_DEG,d=this.R_MAJOR,e=this.R_MINOR,g=a.x*c/d,h=e/d,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/d),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new f.LatLng(k*c,g)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var a=f.Projection.Mercator,b=a.R_MAJOR,c=.5/(Math.PI*b);return new f.Transformation(c,.5,-c,.5)}()}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(a,b){b=f.setOptions(this,b),b.detectRetina&&f.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=f.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==d&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-1/0);for(d=0,e=f.length;e>d;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(f.Browser.ielt9)for(a in b)f.DomUtil.setOpacity(b[a],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",b,this._container),this._tileContainer=f.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),c=a.getZoom(),d=this._getTileSize();if(!(c>this.options.maxZoom||c<this.options.minZoom)){var e=f.bounds(b.min.divideBy(d)._floor(),b.max.divideBy(d)._floor());this._addTilesFromCenterOut(e),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(e)}}},_addTilesFromCenterOut:function(a){var b,d,e,g=[],h=a.getCenter();for(b=a.min.y;b<=a.max.y;b++)for(d=a.min.x;d<=a.max.x;d++)e=new f.Point(d,b),this._tileShouldBeLoaded(e)&&g.push(e);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var j=c.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,d=0;i>d;d++)this._addTile(g[d],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c.x)||a.y<0||a.y>=c.y)return!1}if(b.bounds){var d=b.tileSize,e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(f.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),f.Browser.android||(b.onload=null,b.src=f.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();f.DomUtil.setPosition(d,c,f.Browser.chrome),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return f.Util.template(this._url,f.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){var a=this._map.options.crs,b=a.getSize(this._map.getZoom());return b.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x),this.options.tms&&(a.y=b.y-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=f.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==d&&f.DomUtil.setOpacity(a,this.options.opacity),f.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b),this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),f.tileLayer=function(a,b){return new f.TileLayer(a,b)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=f.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;c.width=c.height=b.detectRetina&&f.Browser.retina?2*d:d;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(c[e]=b[e]);this.wmsParams=c,f.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,d=a.multiplyBy(c),e=d.add([c,c]),g=this._crs.project(b.unproject(d,a.z)),h=this._crs.project(b.unproject(e,a.z)),i=this._wmsVersion>=1.3&&this._crs===f.CRS.EPSG4326?[h.y,g.x,g.y,h.x].join(","):[g.x,h.y,h.x,g.y].join(","),j=f.Util.template(this._url,{s:this._getSubdomain(a)});return j+f.Util.getParamString(this.wmsParams,j,!0)+"&BBOX="+i},setParams:function(a,b){return f.extend(this.wmsParams,a),b||this.redraw(),this}}),f.tileLayer.wms=function(a,b){return new f.TileLayer.WMS(a,b)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(a){f.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=f.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=f.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),f.tileLayer.canvas=function(a){return new f.TileLayer.Canvas(a)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=f.latLngBounds(b),f.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&f.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),e=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(e,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);f.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(a,b,c){return new f.ImageOverlay(a,b,c)},f.Icon=f.Class.extend({options:{className:""},initialize:function(a){f.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,d=this.options,e=f.point(d[b+"Size"]);c=f.point("shadow"===b?d.shadowAnchor||d.iconAnchor:d.iconAnchor),!c&&e&&(c=e.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+d.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),e&&(a.style.width=e.x+"px",a.style.height=e.y+"px")},_createImg:function(a,b){return b=b||c.createElement("img"),b.src=a,b},_getIconUrl:function(a){return f.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),f.icon=function(a){return new f.Icon(a)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];f.Browser.retina&&"icon"===a&&(a+="-2x");var c=f.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),f.Icon.Default.imagePath=function(){var a,b,d,e,f,g=c.getElementsByTagName("script"),h=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,b=g.length;b>a;a++)if(d=g[a].src,e=d.match(h))return f=d.split(h)[0],(f?f+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",e=a.icon.createIcon(this._icon),g=!1;e!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(e.title=a.title),a.alt&&(e.alt=a.alt)),f.DomUtil.addClass(e,d),a.keyboard&&(e.tabIndex="0"),this._icon=e,this._initInteraction(),a.riseOnHover&&f.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0),h&&f.DomUtil.addClass(h,d),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){f.DomUtil.setPosition(this._icon,a),this._shadow&&f.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(a,"leaflet-clickable"),f.DomEvent.on(a,"click",this._onMouseClick,this),f.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)f.DomEvent.on(a,b[c],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&f.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&f.DomEvent.preventDefault(a),"mousedown"!==a.type?f.DomEvent.stopPropagation(a):f.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(a,b){return new f.Marker(a,b)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:c.createElement("div"),d=this.options;return b.innerHTML=d.html!==!1?d.html:"",d.bgPos&&(b.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(b,"icon"),b},createShadow:function(){return null}}),f.divIcon=function(a){return new f.DivIcon(a)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){f.setOptions(this,a),this._source=b,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout();var b=a.options.fadeAnimation;b&&f.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this.update(),b&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),d=this._container=f.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=f.DomUtil.create("a",b+"-close-button",d),a.href="#close",a.innerHTML="&#215;",f.DomEvent.disableClickPropagation(a),f.DomEvent.on(a,"click",this._onCloseButtonClick,this));var e=this._wrapper=f.DomUtil.create("div",b+"-content-wrapper",d);f.DomEvent.disableClickPropagation(e),this._contentNode=f.DomUtil.create("div",b+"-content",e),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(e,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",b+"-tip-container",d),this._tip=f.DomUtil.create("div",b+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,g="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",f.DomUtil.addClass(a,g)):f.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=f.point(this.options.offset);b&&f.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);f.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new f.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(f.DomUtil.getPosition(this._container));var e=a.layerPointToContainerPoint(d),g=f.point(this.options.autoPanPadding),h=f.point(this.options.autoPanPaddingTopLeft||g),i=f.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;e.x+c+i.x>j.x&&(k=e.x+c-j.x+i.x),e.x-k-h.x<0&&(k=e.x-h.x),e.y+b+i.y>j.y&&(l=e.y+b-j.y+i.y),e.y-l-h.y<0&&(l=e.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),f.DomEvent.stop(a)}}),f.popup=function(a,b){return new f.Popup(a,b)},f.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof f.Popup)){var d=a;a=new f.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var c=f.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(f.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=f.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof f.Popup?(f.setOptions(a,b),this._popup=a):this._popup=new f.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f.stamp(a)}}),f.layerGroup=function(a){return new f.LayerGroup(a)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new f.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof f.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=f.extend({layer:a.target,target:this},a),this.fire(a.type,a)}}),f.featureGroup=function(a){return new f.FeatureGroup(a)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:function(){var b=f.Browser.mobile?1280:2e3,c=(b/Math.max(a.outerWidth,a.outerHeight)-1)/2;return Math.max(0,Math.min(.5,c))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){f.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return f.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var a=f.Path.CLIP_PADDING,b=this.getSize(),c=f.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),e=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new f.Bounds(d,e)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!c.createElementNS||!c.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return c.createElementNS(f.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){(f.Browser.svg||!f.Browser.vml)&&f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)f.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)
}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),e=b.layerPointToLatLng(d);this.fire(a.type,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&f.DomEvent.preventDefault(a),"mousemove"!==a.type&&f.DomEvent.stopPropagation(a)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,e=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;f.Browser.mobileWebkit&&h.removeChild(g),f.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",e),g.setAttribute("viewBox",[b.x,b.y,d,e].join(" ")),f.Browser.mobileWebkit&&h.appendChild(g)}}}),f.Path.include({bindPopup:function(a,b){return a instanceof f.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new f.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var a=c.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(d){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return c.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return c.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return c.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");f.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,a.dashStyle=c.dashArray?f.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):"",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=c.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=function(){return!!c.createElement("canvas").getContext}(),f.Path=f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return f.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b,c,d,e,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;c>a;a++){for(b=0,d=this._parts[a].length;d>b;b++)e=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](e.x,e.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill()),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),f.Map.include(f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var a,b=this._pathRoot;b||(b=this._pathRoot=c.createElement("canvas"),b.style.position="absolute",a=this._canvasCtx=b.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(b),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;f.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),f.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,e=typeof Uint8Array!=d+""?Uint8Array:Array,f=new e(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;c>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var e=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new f.Point(a.x+e*(i.y-a.y)/g,i.y):4&c?new f.Point(a.x+e*(h.y-a.y)/g,h.y):2&c?new f.Point(i.x,a.y+g*(i.x-a.x)/e):1&c?new f.Point(h.x,a.y+g*(h.x-a.x)/e):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var e,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(e=((a.x-g)*i+(a.y-h)*j)/k,e>1?(g=c.x,h=c.y):e>0&&(g+=i*e,h+=j*e)),i=a.x-g,j=a.y-h,d?i*i+j*j:new f.Point(g,h)}},f.Polyline=f.Path.extend({initialize:function(a,b){f.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(f.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,e=this._parts,g=null,h=0,i=e.length;i>h;h++)for(var j=e[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=f.LineUtil._sqClosestPointOnSegment(a,b,c,!0);d>m&&(d=m,g=f.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(d)),g},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,e=b?a:[];for(c=0,d=a.length;d>c;c++){if(f.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;e[c]=f.latLng(a[c])}return e},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=f.Path.VML,d=0,e=a.length,g="";e>d;d++)b=a[d],c&&b._round(),g+=(d?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,c,d=this._originalPoints,e=d.length;if(this.options.noClip)return void(this._parts=[d]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=f.LineUtil;for(a=0,b=0;e-1>a;a++)c=i.clipSegment(d[a],d[a+1],h,a),c&&(g[b]=g[b]||[],g[b].push(c[0]),(c[1]!==d[a+1]||a===e-2)&&(g[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=f.LineUtil,c=0,d=a.length;d>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(a,b){return new f.Polyline(a,b)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(a,b){var c,d,e,g,h,i,j,k,l,m=[1,4,2,8],n=f.LineUtil;for(d=0,j=a.length;j>d;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;4>g;g++){for(k=m[g],c=[],d=0,j=a.length,e=j-1;j>d;e=d++)h=a[d],i=a[e],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(a,b){f.Polyline.prototype.initialize.call(this,a,b),this._initWithHoles(a)},_initWithHoles:function(a){var b,c,d;if(a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),b=0,c=this._holes.length;c>b;b++)d=this._holes[b]=this._convertLatLngs(this._holes[b]),d[0].equals(d[d.length-1])&&d.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;d>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;d>c;c++){var e=f.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);e.length&&b.push(e)}this._parts=b}},_getPathPartStr:function(a){var b=f.Polyline.prototype._getPathPartStr.call(this,a);return b+(f.Browser.svg?"z":"x")}}),f.polygon=function(a,b){return new f.Polygon(a,b)},function(){function a(a){return f.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}f.MultiPolyline=a(f.Polyline),f.MultiPolygon=a(f.Polygon),f.multiPolyline=function(a,b){return new f.MultiPolyline(a,b)},f.multiPolygon=function(a,b){return new f.MultiPolygon(a,b)}}(),f.Rectangle=f.Polygon.extend({initialize:function(a,b){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=f.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),f.rectangle=function(a,b){return new f.Rectangle(a,b)},f.Circle=f.Path.extend({initialize:function(a,b,c){f.Path.prototype.initialize.call(this,c),this._latlng=f.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=f.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new f.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),f.circle=function(a,b,c){return new f.Circle(a,b,c)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){f.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(a){return f.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(a,b){return new f.CircleMarker(a,b)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(a,b){var c,d,e,g,h,i,j,k=this.options.weight/2;for(f.Browser.touch&&(k+=10),c=0,g=this._parts.length;g>c;c++)for(j=this._parts[c],d=0,h=j.length,e=h-1;h>d;e=d++)if((b||0!==d)&&(i=f.LineUtil.pointToSegmentDistance(a,j[e],j[d]),k>=i))return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(a){var b,c,d,e,g,h,i,j,k=!1;if(f.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(e=0,i=this._parts.length;i>e;e++)for(b=this._parts[e],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(a,b){f.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=f.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;c>b;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(e[b]);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=f.GeoJSON.geometryToLayer(a,g.pointToLayer,g.coordsToLatLng,g);return h.feature=f.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){var b=this.options.style;b&&(f.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),f.extend(f.GeoJSON,{geometryToLayer:function(a,b,c,d){var e,g,h,i,j="Feature"===a.type?a.geometry:a,k=j.coordinates,l=[];switch(c=c||this.coordsToLatLng,j.type){case"Point":return e=c(k),b?b(a,e):new f.Marker(e);case"MultiPoint":for(h=0,i=k.length;i>h;h++)e=c(k[h]),l.push(b?b(a,e):new f.Marker(e));return new f.FeatureGroup(l);case"LineString":return g=this.coordsToLatLngs(k,0,c),new f.Polyline(g,d);case"Polygon":if(2===k.length&&!k[1].length)throw new Error("Invalid GeoJSON object.");return g=this.coordsToLatLngs(k,1,c),new f.Polygon(g,d);case"MultiLineString":return g=this.coordsToLatLngs(k,1,c),new f.MultiPolyline(g,d);case"MultiPolygon":return g=this.coordsToLatLngs(k,2,c),new f.MultiPolygon(g,d);case"GeometryCollection":for(h=0,i=j.geometries.length;i>h;h++)l.push(this.geometryToLayer({geometry:j.geometries[h],type:"Feature",properties:a.properties},b,c,d));return new f.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new f.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return a.alt!==d&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(f.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?f.extend({},a.feature,{geometry:b}):f.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var h={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(h),f.Circle.include(h),f.CircleMarker.include(h),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var a,b,c,d=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=f.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:a,coordinates:b})}}f.MultiPolyline.include({toGeoJSON:a("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:a("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var e=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(e?b.geometry:f.GeoJSON.asFeature(b)))}),e?f.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),f.geoJson=function(a,b){return new f.GeoJSON(a,b)},f.DomEvent={addListener:function(a,b,c,d){var e,g,h,i=f.stamp(c),j="_leaflet_"+b+i;return a[j]?this:(e=function(b){return c.call(d||a,b||f.DomEvent._getEvent())},f.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,e,i):(f.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,e,i),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",e,!1),a.addEventListener(b,e,!1)):"mouseenter"===b||"mouseleave"===b?(g=e,h="mouseenter"===b?"mouseover":"mouseout",e=function(b){return f.DomEvent._checkMouse(a,b)?g(b):void 0},a.addEventListener(h,e,!1)):"click"===b&&f.Browser.android?(g=e,e=function(a){return f.DomEvent._filterClick(a,g)},a.addEventListener(b,e,!1)):a.addEventListener(b,e,!1):"attachEvent"in a&&a.attachEvent("on"+b,e),a[j]=e,this))},removeListener:function(a,b,c){var d=f.stamp(c),e="_leaflet_"+b+d,g=a[e];return g?(f.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,d):f.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,f.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=f.DomEvent.stopPropagation;return f.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=f.DomEvent.stopPropagation,c=f.Draggable.START.length-1;c>=0;c--)f.DomEvent.on(a,f.Draggable.START[c],b);return f.DomEvent.on(a,"click",f.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return f.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new f.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new f.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){f.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=f.DomEvent._lastClick&&c-f.DomEvent._lastClick;return d&&d>100&&1e3>d||a.target._simulatedClick&&!a._simulated?void f.DomEvent.stop(a):(f.DomEvent._lastClick=c,b(a))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(this._moved=!1,!(a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(f.DomEvent.stopPropagation(a),f.Draggable._disabled||(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),this._moving)))){var b=a.touches?a.touches[0]:a;this._startPoint=new f.Point(b.clientX,b.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(c,f.Draggable.MOVE[a.type],this._onMove,this).on(c,f.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var b=a.touches&&1===a.touches.length?a.touches[0]:a,d=new f.Point(b.clientX,b.clientY),e=d.subtract(this._startPoint);(e.x||e.y)&&(f.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(e),f.DomUtil.addClass(c.body,"leaflet-dragging"),f.DomUtil.addClass(a.target||a.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(e),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(a){f.DomUtil.removeClass(c.body,"leaflet-dragging"),f.DomUtil.removeClass(a.target||a.srcElement,"leaflet-drag-target");for(var b in f.Draggable.MOVE)f.DomEvent.off(c,f.Draggable.MOVE[b],this._onMove).off(c,f.Draggable.END[b],this._onUp);f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new f.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,e=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),e)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),f.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=f.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),c),f.DomEvent.preventDefault(a),f.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,d){function e(a){var b;if(f.Browser.pointer?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&k>=d,h=c}}function g(a){if(f.Browser.pointer){var c=o.indexOf(a.pointerId);if(-1===c)return;o.splice(c,1)}if(j){if(f.Browser.pointer){var d,e={};for(var g in i)d=i[g],e[g]="function"==typeof d?d.bind(i):d;i=e}i.type="dblclick",b(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+d]=e,a[l+n+d]=g;var p=f.Browser.pointer?c.documentElement:a;return a.addEventListener(m,e,!1),p.addEventListener(n,g,!1),f.Browser.pointer&&p.addEventListener(f.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,b){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+b],!1),(f.Browser.pointer?c.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+b],!1),f.Browser.pointer&&c.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,a[d+this._touchend+b],!1),this
}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case"touchstart":return this.addPointerListenerStart(a,b,c,d);case"touchend":return this.addPointerListenerEnd(a,b,c,d);case"touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addPointerListenerStart:function(a,b,d,e){var g="_leaflet_",h=this._pointers,i=function(a){f.DomEvent.preventDefault(a);for(var b=!1,c=0;c<h.length;c++)if(h[c].pointerId===a.pointerId){b=!0;break}b||h.push(a),a.touches=h.slice(),a.changedTouches=[a],d(a)};if(a[g+"touchstart"+e]=i,a.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var j=function(a){for(var b=0;b<h.length;b++)if(h[b].pointerId===a.pointerId){h.splice(b,1);break}};c.documentElement.addEventListener(this.POINTER_UP,j,!1),c.documentElement.addEventListener(this.POINTER_CANCEL,j,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._pointers;return a[f+"touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._pointers,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener(this.POINTER_UP,g,!1),a.addEventListener(this.POINTER_CANCEL,g,!1),this},removePointerListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener(this.POINTER_DOWN,e,!1);break;case"touchmove":a.removeEventListener(this.POINTER_MOVE,e,!1);break;case"touchend":a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),g=b._getCenterLayerPoint();this._startCenter=d.add(e)._divideBy(2),this._startDist=d.distanceTo(e),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),b._panAnim&&b._panAnim.stop(),f.DomEvent.on(c,"touchmove",this._onTouchMove,this).on(c,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(b.options.bounceAtZoomLimits||!(b.getZoom()===b.getMinZoom()&&this._scale<1||b.getZoom()===b.getMaxZoom()&&this._scale>1))&&(this._moved||(f.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,f.DomUtil.removeClass(a._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(c,"touchmove",this._onTouchMove).off(c,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),d=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(e+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,b,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(f.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var b=a.touches[0],d=b.target;this._startPos=this._newPos=new f.Point(b.clientX,b.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),f.DomEvent.on(c,"touchmove",this._onMove,this).on(c,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),f.DomEvent.off(c,"touchmove",this._onMove,this).off(c,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],d=b.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&f.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new f.Point(b.clientX,b.clientY)},_simulateEvent:function(b,d){var e=c.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(b,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!a.shiftKey||1!==a.which&&1!==a.button?!1:(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void f.DomEvent.on(c,"mousemove",this._onMouseMove,this).on(c,"mouseup",this._onMouseUp,this).on(c,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),e=d.subtract(b),g=new f.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));f.DomUtil.setPosition(c,g),this._moved=!0,c.style.width=Math.max(0,Math.abs(e.x)-4)+"px",c.style.height=Math.max(0,Math.abs(e.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(c,"mousemove",this._onMouseMove).off(c,"mouseup",this._onMouseUp).off(c,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new f.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),f.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;f.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var b=c.body,d=c.documentElement,e=b.scrollTop||d.scrollTop,f=b.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){f.DomEvent.on(c,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(c,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}f.DomEvent.stop(a)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=f.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&f.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(a){f.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return f.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(a){return new f.Control(a)},f.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,e){var g=c+a+" "+c+e;b[a+e]=f.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=f.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=f.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,e,g){var h=f.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=f.DomEvent.stopPropagation;return f.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",f.DomEvent.preventDefault).on(h,"click",e,g).on(h,"click",this._refocusOnMap,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,b),f.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,b)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(a){return new f.Control.Zoom(a)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){f.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(a){return new f.Control.Attribution(a)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=f.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=f.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=f.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=1e3>b?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),f.control.scale=function(a){return new f.Control.Scale(a)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){f.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=f.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=f.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(b,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=f.DomUtil.create("form",a+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=f.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",f.Browser.touch?f.DomEvent.on(d,"click",f.DomEvent.stop).on(d,"click",this._expand,this):f.DomEvent.on(d,"focus",this._expand,this),f.DomEvent.on(c,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",a+"-base",c),this._separator=f.DomUtil.create("div",a+"-separator",c),this._overlaysList=f.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=f.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[f.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(d+=' checked="checked"'),d+="/>";var e=c.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var b,d=c.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(b=c.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=e):b=this._createRadioElement("leaflet-base-layers",e),b.layerId=f.stamp(a.layer),f.DomEvent.on(b,"click",this._onInputClick,this);var g=c.createElement("span");g.innerHTML=" "+a.name,d.appendChild(b),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(a,b,c){return new f.Control.Layers(a,b,c)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[f.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",f.DomEvent.on(a,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(a,b),f.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,e=this._el,g=a.getComputedStyle(e);if(f.Browser.any3d){if(d=g[f.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new f.Point(b,c,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(a,b,c){if(b=b===d?this._zoom:this._limitZoom(b),a=this._limitCenter(f.latLng(a),b,this.options.maxBounds),c=c||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==d&&(c.zoom=f.extend({animate:c.animate},c.zoom),c.pan=f.extend({animate:c.animate},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=f.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=f.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));f.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return c.animate===!0||this.getSize().contains(e)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0):!1},_animateZoom:function(a,b,c,d,e,g){this._animatingZoom=!0,f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,f.Draggable&&(f.Draggable._disabled=!0),this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:e,backwards:g})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)}}:{}),f.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=f.DomUtil.TRANSFORM,d=a.delta?f.DomUtil.getTranslateString(a.delta):b.style[c],e=f.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?e+" "+d:d+" "+e},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),f.Util.falseFn(b.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&.5>d?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[f.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;c>b;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,d,e=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=e.length;c>b;b++)d=e[b],d.complete||(d.onload=f.Util.falseFn,d.onerror=f.Util.falseFn,d.src=f.Util.emptyImageUrl,d.parentNode.removeChild(d))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=f.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=f.bind(this._handleGeolocationResponse,this),c=f.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new f.LatLng(b,c),e=180*a.coords.accuracy/40075017,g=e/Math.cos(f.LatLng.DEG_TO_RAD*b),h=f.latLngBounds([b-e,c-g],[b+e,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document)},{}],28:[function(a,b){b.exports=[{name:"Circle stroked",tags:["circle","disc","shape","shapes","geometric","stroke","round"],icon:"circle-stroked"},{name:"Circle solid",tags:["circle","shape","shapes","geometric","round"],icon:"circle"},{name:"Square stroked",tags:["box","square","shapes","shape","geometric","stroke"],icon:"square-stroked"},{name:"Square solid",tags:["box","square","shape","shapes","geometric"],icon:"square"},{name:"Triangle stroked",tags:["triangle","shape","shapes","geometric","stroke"],icon:"triangle-stroked"},{name:"Triangle solid",tags:["triangle","shape","shapes","geometric"],icon:"triangle"},{name:"Star stroked",tags:["star","shape","shapes","geometric","stroke"],icon:"star-stroked"},{name:"Star solid",tags:["star","shape","shapes","geometric"],icon:"star"},{name:"Cross",tags:["cross","x","ex","shape","shapes","geometric"],icon:"cross"},{name:"Marker Stroke",tags:["marker","point","shape","shapes","stroke"],icon:"marker-stroked"},{name:"Marker Solid",tags:["marker","point","shape","shapes"],icon:"marker"},{name:"Religious Jewish",tags:["jewish","judaism","hebrew","star","david","religious","religion","temple","synagogue"],icon:"religious-jewish"},{name:"Religious Christian",tags:["christian","cross","religious","religion","church","cathedral"],icon:"religious-christian"},{name:"Religious Muslim",tags:["muslim","crescent","star","religious","religion","mosque"],icon:"religious-muslim"},{name:"Cemetery",tags:["cemetery","graveyard","funeral","religious","religion","memorial"],icon:"cemetery"},{name:"Rocket",tags:["rocket","space","launch","transportation"],icon:"rocket"},{name:"Airport",tags:["airplane","plane","airport","transportation"],icon:"airport"},{name:"Heliport",tags:["heliport","helicopter","transportation"],icon:"heliport"},{name:"Rail",tags:["rail","train","transportation"],icon:"rail"},{name:"Rail Metro",tags:["rail","train","metro","subway","rapid-transit","transportation"],icon:"rail-metro"},{name:"Rail Light",tags:["rail","train","light-rail","transportation"],icon:"rail-light"},{name:"Bus",tags:["vehicle","bus","transportation"],icon:"bus"},{name:"Fuel",tags:["petrol","fuel","gas","transportation","station"],icon:"fuel"},{name:"Parking",tags:["parking","transportation"],icon:"parking"},{name:"Parking Garage",tags:["parking","transportation","garage"],icon:"parking-garage"},{name:"Airfield",tags:["airfield","airport","plane","landing strip"],icon:"airfield"},{name:"Roadblock",tags:["roadblock","stop","warning","dead end"],icon:"roadblock"},{name:"Ferry",tags:["ship","boat","water","ferry","transportation"],icon:"ferry"},{name:"Harbor",tags:["marine","dock","water","wharf"],icon:"harbor"},{name:"Bicycle",tags:["cycling","cycle","transportation"],icon:"bicycle"},{name:"Park",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park"},{name:"Park 2",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park2"},{name:"Museum",tags:["recreation","museum","tourism"],icon:"museum"},{name:"Lodging",tags:["lodging","hotel","recreation","motel","tourism"],icon:"lodging"},{name:"Monument",tags:["recreation","statue","monument","tourism"],icon:"monument"},{name:"Zoo",tags:["recreation","zoo","animal","giraffe"],icon:"zoo"},{name:"Garden",tags:["recreation","garden","park","flower","nature"],icon:"garden"},{name:"Campsite",tags:["recreation","campsite","camp","camping","tent","nature"],icon:"campsite"},{name:"Theatre",tags:["recreation","theatre","theater","entertainment","play","performance"],icon:"theatre"},{name:"Art gallery",tags:["art","center","museum","gallery","creative","recreation","entertainment","studio"],icon:"art-gallery"},{name:"Pitch",tags:["pitch","track","athletic","sports","field"],icon:"pitch"},{name:"Soccer",tags:["soccer","sports"],icon:"soccer"},{name:"American Football",tags:["football","sports"],icon:"america-football"},{name:"Tennis",tags:["tennis","court","ball","sports"],icon:"tennis"},{name:"Basketball",tags:["basketball","ball","sports"],icon:"basketball"},{name:"Baseball",tags:["baseball","softball","ball","sports"],icon:"baseball"},{name:"Golf",tags:["golf","sports","course"],icon:"golf"},{name:"Swimming",tags:["swimming","water","swim","sports"],icon:"swimming"},{name:"Cricket",tags:["cricket","sports"],icon:"cricket"},{name:"Skiing",tags:["winter","skiing","ski","sports"],icon:"skiing"},{name:"School",tags:["school","highschool","elementary","children","amenity","middle"],icon:"school"},{name:"College",tags:["college","school","amenity","university"],icon:"college"},{name:"Library",tags:["library","books","amenity"],icon:"library"},{name:"Post",tags:["post","office","amenity","mail","letter"],icon:"post"},{name:"Fire station",tags:["fire","station","amenity"],icon:"fire-station"},{name:"Town hall",tags:["townhall","mayor","building","amenity","government"],icon:"town-hall"},{name:"Police",tags:["police","jail","arrest","amenity","station"],icon:"police"},{name:"Prison",tags:["prison","jail","amenity"],icon:"prison"},{name:"Embassy",tags:["embassy","diplomacy","consulate","amenity","flag"],icon:"embassy"},{name:"Beer",tags:["bar","beer","drink","commercial","biergarten","pub"],icon:"beer"},{name:"Restaurant",tags:["restaurant","commercial"],icon:"restaurant"},{name:"Cafe",tags:["cafe","coffee","commercial","tea"],icon:"cafe"},{name:"Shop",tags:["shop","mall","commercial","store"],icon:"shop"},{name:"Fast Food",tags:["food","fast","commercial","burger","drive-through"],icon:"fast-food"},{name:"Bar",tags:["bar","drink","commercial","club","martini","lounge"],icon:"bar"},{name:"Bank",tags:["bank","atm","commercial","money"],icon:"bank"},{name:"Grocery",tags:["food","grocery","commercial","store","market"],icon:"grocery"},{name:"Cinema",tags:["cinema","theatre","film","movie","commercial","theater","entertainment"],icon:"cinema"},{name:"Pharmacy",tags:["pharmacy","drugs","medication","social","medicine","prescription"],icon:"pharmacy"},{name:"Hospital",tags:["hospital","health","medication","social","medicine","medical","clinic"],icon:"hospital"},{name:"Danger",tags:["minefield","landmine","disaster","dangerous","hazard"],icon:"danger"},{name:"Industrial",tags:["industrial","factory","property","building"],icon:"industrial"},{name:"Warehouse",tags:["warehouse","property","storage","building"],icon:"warehouse"},{name:"Commercial",tags:["commercial","property","business","building"],icon:"commercial"},{name:"Building",tags:["building","property","structure","business","building"],icon:"building"},{name:"Place of worship",tags:["religion","ceremony","religious","nondenominational","church","temple"],icon:"place-of-worship"},{name:"Alcohol shop",tags:["alcohol","liquor","store","shop","beer","wine","vodka"],icon:"alcohol-shop"},{name:"Logging",tags:["logger","chainsaw","woods","industry"],icon:"logging"},{name:"Oil well",tags:["oil","natural","environment","industry","resources"],icon:"oil-well"},{name:"Slaughterhouse",tags:["cows","cattle","food","meat","industry","resources"],icon:"slaughterhouse"},{name:"Dam",tags:["water","natural","hydro","hydroelectric","energy","environment","industry","resources"],icon:"dam"},{name:"Water",tags:["water","natural","hydro","lake","river","ocean","resources"],icon:"water"},{name:"Wetland",tags:["water","swamp","natural"],icon:"wetland"},{name:"Disability",tags:["handicap","wheelchair","access"],icon:"disability"},{name:"Telephone",tags:["payphone","call"],icon:"telephone"},{name:"Emergency Telephone",tags:["payphone","danger","safety","call"],icon:"emergency-telephone"},{name:"Toilets",tags:["bathroom","men","women","sink","washroom","lavatory"],icon:"toilets"},{name:"Waste Basket",tags:["trash","rubbish","bin","garbage"],icon:"waste-basket"},{name:"Music",tags:["stage","performance","band","concert","venue"],icon:"music"},{name:"Land Use",tags:["zoning","usage","area"],icon:"land-use"},{name:"City",tags:["area","point","place","urban"],icon:"city"},{name:"Town",tags:["area","point","place","small"],icon:"town"},{name:"Village",tags:["area","point","place","small","rural"],icon:"village"},{name:"Farm",tags:["building","farming","crops","plants","agriculture","rural"],icon:"farm"},{name:"Bakery",tags:["bakery","pastry","croissant","food","shop","bread"],icon:"bakery"},{name:"Dog Park",tags:["dog","pet"],icon:"dog-park"},{name:"Lighthouse",tags:["building","navigation","nautical","ocean","logistics"],icon:"lighthouse"},{name:"Clothing Store",tags:["clothing","store","shop"],icon:"clothing-store"},{name:"Polling Place",tags:["poll","polling","vote"],icon:"polling-place"},{name:"Playground",tags:["playground","play","park","children"],icon:"playground"},{name:"Entrance",tags:["entrance","enter","subway","rail"],icon:"entrance"},{name:"Heart",tags:["heart","love","shape","shapes","wedding"],icon:"heart"},{name:"London Underground",tags:["deprecated"],icon:"london-underground"},{name:"Minefield",tags:["deprecated"],icon:"minefield"},{name:"Rail Underground",tags:["deprecated"],icon:"rail-underground"},{name:"Rail Above",tags:["deprecated"],icon:"rail-above"},{name:"Camera",tags:["camera","photo","commercial","shop"],icon:"camera"},{name:"Laundry",tags:["laundry","washing machine","dry_cleaning","commercial","store"],icon:"laundry"},{name:"Car",tags:["car","auto","vehicle","transportation"],icon:"car"},{name:"Suitcase",tags:["suitcase","travel","travel agency","commercial","store"],icon:"suitcase"}]
},{}],29:[function(a,b){var c=function(){"use strict";var a,b,c,d,e,f=".nanobar{float:left;width:100%;height:4px;z-index:9999;}.nanobarbar{width:0;height:100%;float:left;transition:all .3s;}",g=document.head||document.getElementsByTagName("head")[0];return a=function(){var a=document.getElementById("nanobar-style");null===a&&(a=document.createElement("style"),a.type="text/css",a.id="nanobar-style",g.insertBefore(a,g.firstChild),a.styleSheet?a.styleSheet.cssText=f:a.appendChild(document.createTextNode(f)))},b=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]},c=b(),d=function(a){var b=document.createElement("div");return b.setAttribute("class","nanobarbar"),b.style.background=a.opts.bg,b.setAttribute("on","1"),a.cont.appendChild(b),c&&b.addEventListener(c,function(){"100%"===b.style.width&&"1"===b.getAttribute("on")&&(b.setAttribute("on",0),a.bars.pop(),b.style.height=0,setTimeout(function(){a.cont.removeChild(b)},300))}),b},e=function(b){var c,d=this.opts=b||{};return d.bg=d.bg||"#000",this.bars=[],a(),c=this.cont=document.createElement("div"),c.setAttribute("class","nanobar"),d.id&&(c.id=d.id),d.target?c.style.position="relative":(c.style.position="fixed",c.style.top="0"),d.target?d.target.insertBefore(c,d.target.firstChild):document.getElementsByTagName("body")[0].appendChild(c),this.init()},e.prototype.init=function(){var a=d(this);this.bars.unshift(a)},e.prototype.go=function(a){this.bars[0].style.width=a+"%",100==a&&this.init()},e}();b.exports=c},{}],30:[function(a,b){b.exports=[{name:"Airport (Black)",tags:["airport","plane","travel"],icon:"airport-black"},{name:"Airport (White)",tags:["airport","plane","travel"],icon:"airport-white"},{name:"Amphitheater (Black)",tags:["amphitheater","theater","leisure"],icon:"amphitheater-black"},{name:"Amphitheater (White)",tags:["amphitheater","theater","leisure"],icon:"amphitheater-white"},{name:"Boat Launch (Black)",tags:["boats","sailing","recreation"],icon:"boat-launch-black"},{name:"Boat Launch (White)",tags:["boats","sailing","recreation"],icon:"boat-launch-white"},{name:"Bike Trail (Black)",tags:["bike","cycling","trail"],icon:"bike-trail-black"},{name:"Bike Trail (White)",tags:["bike","cycling","trail"],icon:"bike-trail-white"},{name:"Camping (Black)",tags:["camp","campsite","tent"],icon:"camping-black"},{name:"Camping (White)",tags:["camp","campsite","tent"],icon:"camping-white"},{name:"Bus and Shuttle Stop (Black)",tags:["bus","shuttle","transportation"],icon:"bus-shuttle-stop-black"},{name:"Bus and Shuttle Stop (White)",tags:["bus","shuttle","transportation"],icon:"bus-shuttle-stop-white"},{name:"Food Service (Black)",tags:["food","restaurant","dining"],icon:"food-service-black"},{name:"Food Service (White)",tags:["food","restaurant","dining"],icon:"food-service-white"},{name:"Gas Station (Black)",tags:["gas","fuel","service"],icon:"gas-station-black"},{name:"Gas Station (White)",tags:["gas","fuel","service"],icon:"gas-station-white"},{name:"Information (Black)",tags:["information","sevice",""],icon:"information-black"},{name:"Information (White)",tags:["information","sevice",""],icon:"information-white"},{name:"Lodging (Black)",tags:["hotel","motel","lodging"],icon:"lodging-black"},{name:"Lodging (White)",tags:["hotel","motel","lodging"],icon:"lodging-white"},{name:"Parking (Black)",tags:["parking","park",""],icon:"parking-black"},{name:"Parking (White)",tags:["parking","park",""],icon:"parking-white"},{name:"Picnic Area (Black)",tags:["picnic","recreation",""],icon:"picnic-black"},{name:"Picnic Area (White)",tags:["picnic","recreation",""],icon:"picnic-white"},{name:"Ranger Station (Black)",tags:["ranger station","ranger",""],icon:"ranger-station-black"},{name:"Ranger Station (White)",tags:["ranger station","ranger",""],icon:"ranger-station-white"},{name:"Restroom (Black)",tags:["restroom","bathroom","toilet"],icon:"restroom-black"},{name:"Restroom (White)",tags:["restroom","bathroom","toilet"],icon:"restroom-white"},{name:"Store (Black)",tags:["store","food","shopping"],icon:"store-black"},{name:"Store (White)",tags:["store","food","shopping"],icon:"store-white"},{name:"First Aid (Black)",tags:["first aid","medical",""],icon:"first-aid-black"},{name:"First Aid (White)",tags:["first aid","medical",""],icon:"first-aid-white"},{name:"Campfire (Black)",tags:["campfire","",""],icon:"campfire-black"},{name:"Campfire (White)",tags:["campfire","",""],icon:"campfire-white"},{name:"Canoe Access (Black)",tags:["canoe access","canoe","recreation"],icon:"canoe-access-black"},{name:"Canoe Access (White)",tags:["canoe access","canoe","recreation"],icon:"canoe-access-white"},{name:"Cross Country Ski Trail (Black)",tags:["cross country ski trail","skiing","cross country"],icon:"cross-country-ski-trail-black"},{name:"Cross Country Ski Trail (White)",tags:["cross country ski trail","skiing","cross country"],icon:"cross-country-ski-trail-white"},{name:"Drinking Water (Black)",tags:["drinking water","water"],icon:"drinking-water-black"},{name:"Drinking Water (White)",tags:["drinking water","water"],icon:"drinking-water-white"},{name:"Fishing (Black)",tags:["fishing","recreation"],icon:"fishing-black"},{name:"Fishing (White)",tags:["fishing","recreation",""],icon:"fishing-white"},{name:"Downhill Skiing (Black)",tags:["downhill skiing","ski","recreation"],icon:"downhill-skiing-black"},{name:"Downhill Skiing (White)",tags:["downhill skiing","ski","recreation"],icon:"downhill-skiing-white"},{name:"4 Wheel Drive (Black)",tags:["4 wheel drive","off road",""],icon:"4-wheel-drive-black"},{name:"4 Wheel Drive (White)",tags:["4 wheel drive","off road",""],icon:"4-wheel-drive-white"},{name:"Golfing (Black)",tags:["golfing","golf",""],icon:"golfing-black"},{name:"Golfing (White)",tags:["golifing","golf",""],icon:"golfing-white"},{name:"Horseback Riding (Black)",tags:["horseback riding","horeseback rental","horseback tour"],icon:"horseback-riding-black"},{name:"Horseback Riding (White)",tags:["horseback riding","horeseback rental","horseback tour"],icon:"horseback-riding-white"},{name:"Hospital (Black)",tags:["hospital","",""],icon:"hospital-black"},{name:"Hospital (White)",tags:["hospital","",""],icon:"hospital-white"},{name:"Ice Skating (Black)",tags:["ice skating","skating",""],icon:"ice-skating-black"},{name:"Ice Skating (White)",tags:["ice skating","skating"],icon:"ice-skating-white"},{name:"Litter Receptacle (Black)",tags:["litter receptacle","trash can"],icon:"litter-receptacle-black"},{name:"Litter Receptacle (White)",tags:["litter receptacle","trash can"],icon:"litter-receptacle-white"},{name:"Motor Bike Trail (Black)",tags:["motor bike trail"],icon:"motor-bike-trail-black"},{name:"Motor Bike Trail (White)",tags:["motor bike trail"],icon:"motor-bike-trail-white"},{name:"Marina (Black)",tags:["marina"],icon:"marina-black"},{name:"Marina (White)",tags:["marina"],icon:"marina-white"},{name:"Pets on Leash (Black)",tags:["pets on leash"],icon:"pets-on-leash-black"},{name:"Pets on Leash (White)",tags:["pets on leash"],icon:"pets-on-leash-white"},{name:"Bear (Black)",tags:["bear"],icon:"bear-black"},{name:"Bear (White)",tags:["bear"],icon:"bear-white"}]},{}],31:[function(require,module,exports){!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("reqwest",this,function(){function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,twoHundo.test(a.request.status)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,"undefined"==typeof j.onreadystatechange||l||(j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),void(k=1))},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){return a.match("json")?"json":a.match("javascript")?"js":a.match("text")?"html":a.match("xml")?"xml":void 0}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){var type=o.type||setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest})},{}],32:[function(a,b,c){(function(d){toGeoJSON=function(){"use strict";function b(a){if(!a||!a.length)return 0;for(var b=0,c=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b)|0;return c}function e(a,b){return a.getElementsByTagName(b)}function f(a,b){return a.getAttribute(b)}function g(a,b){return parseFloat(f(a,b))}function h(a,b){var c=e(a,b);return c.length?c[0]:null}function i(a){return a.normalize&&a.normalize(),a}function j(a){for(var b=0,c=[];b<a.length;b++)c[b]=parseFloat(a[b]);return c}function k(a){var b={};for(var c in a)a[c]&&(b[c]=a[c]);return b}function l(a){return a&&i(a),a&&a.firstChild&&a.firstChild.nodeValue}function m(a){return j(a.replace(s,"").split(","))}function n(a){for(var b=a.replace(t,"").split(u),c=[],d=0;d<b.length;d++)c.push(m(b[d]));return c}function o(a){var b=[g(a,"lon"),g(a,"lat")],c=h(a,"ele");return c&&b.push(parseFloat(l(c))),b}function p(){return{type:"FeatureCollection",features:[]}}function q(a){return r.serializeToString(a)}var r,s=/\s*/g,t=/^\s*|\s*$/g,u=/\s+/;"undefined"!=typeof XMLSerializer?r=new XMLSerializer:"object"!=typeof c||"object"!=typeof d||d.browser||(r=new(a("xmldom").XMLSerializer));var v={kml:function(a,c){function d(a){var b,c;return a=a||"","#"===a.substr(0,1)&&(a=a.substr(1)),(6===a.length||3===a.length)&&(b=a),8===a.length&&(c=parseInt(a.substr(0,2),16)/255,b=a.substr(2)),[b,isNaN(c)?void 0:c]}function g(a){return j(a.split(" "))}function i(a){for(var b=e(a,"coord","gx"),c=[],d=0;d<b.length;d++)c.push(g(l(b[d])));return c}function k(a){var b,c,d,f,g,j=[];if(h(a,"MultiGeometry"))return k(h(a,"MultiGeometry"));if(h(a,"MultiTrack"))return k(h(a,"MultiTrack"));for(d=0;d<t.length;d++)if(c=e(a,t[d]))for(f=0;f<c.length;f++)if(b=c[f],"Point"==t[d])j.push({type:"Point",coordinates:m(l(h(b,"coordinates")))});else if("LineString"==t[d])j.push({type:"LineString",coordinates:n(l(h(b,"coordinates")))});else if("Polygon"==t[d]){var o=e(b,"LinearRing"),p=[];for(g=0;g<o.length;g++)p.push(n(l(h(o[g],"coordinates"))));j.push({type:"Polygon",coordinates:p})}else"Track"==t[d]&&j.push({type:"LineString",coordinates:i(b)});return j}function o(a){var b,c=k(a),f={},g=l(h(a,"name")),i=l(h(a,"styleUrl")),j=l(h(a,"description")),m=h(a,"TimeSpan"),n=h(a,"ExtendedData"),o=h(a,"LineStyle"),p=h(a,"PolyStyle");if(!c.length)return[];if(g&&(f.name=g),i&&s[i]&&(f.styleUrl=i,f.styleHash=s[i]),j&&(f.description=j),m){var q=l(h(m,"begin")),r=l(h(m,"end"));f.timespan={begin:q,end:r}}if(o){var t=d(l(h(o,"color"))),u=t[0],v=t[1],w=parseFloat(l(h(o,"width")));u&&(f.stroke=u),isNaN(v)||(f["stroke-opacity"]=v),isNaN(w)||(f["stroke-width"]=w)}if(p){var x=d(l(h(p,"color"))),y=x[0],z=x[1],A=l(h(p,"fill")),B=l(h(p,"outline"));y&&(f.fill=y),isNaN(z)||(f["fill-opacity"]=z),A&&(f["fill-opacity"]="1"===A?1:0),B&&(f["stroke-opacity"]="1"===B?1:0)}if(n){var C=e(n,"Data"),D=e(n,"SimpleData");for(b=0;b<C.length;b++)f[C[b].getAttribute("name")]=l(h(C[b],"value"));for(b=0;b<D.length;b++)f[D[b].getAttribute("name")]=l(D[b])}return[{type:"Feature",geometry:1===c.length?c[0]:{type:"GeometryCollection",geometries:c},properties:f}]}c=c||{};for(var r=p(),s={},t=["Polygon","LineString","Point","Track"],u=e(a,"Placemark"),v=e(a,"Style"),w=0;w<v.length;w++)s["#"+f(v[w],"id")]=b(q(v[w])).toString(16);for(var x=0;x<u.length;x++)r.features=r.features.concat(o(u[x]));return r},gpx:function(a){function b(a,b){for(var c=e(a,b),d=[],f=0;f<c.length;f++)d.push(o(c[f]));return d}function c(a){for(var c=e(a,"trkseg"),d=[],f=0;f<c.length;f++)d.push(b(c[f],"trkpt"));return{type:"Feature",properties:g(a),geometry:{type:1===d.length?"LineString":"MultiLineString",coordinates:1===d.length?d[0]:d}}}function d(a){return{type:"Feature",properties:g(a),geometry:{type:"LineString",coordinates:b(a,"rtept")}}}function f(a){var b=g(a);return b.sym=l(h(a,"sym")),{type:"Feature",properties:b,geometry:{type:"Point",coordinates:o(a)}}}function g(a){var b,c=["name","desc","author","copyright","link","time","keywords"],d={};for(b=0;b<c.length;b++)d[c[b]]=l(h(a,c[b]));return k(d)}var i,j=e(a,"trk"),m=e(a,"rte"),n=e(a,"wpt"),q=p();for(i=0;i<j.length;i++)q.features.push(c(j[i]));for(i=0;i<m.length;i++)q.features.push(d(m[i]));for(i=0;i<n.length;i++)q.features.push(f(n[i]));return q}};return v}(),"undefined"!=typeof b&&(b.exports=toGeoJSON)}).call(this,a("/Development/npmap/npmap.js/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Development/npmap/npmap.js/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":5,xmldom:4}],33:[function(a,b){var c=a("./package.json").version;window.L.Icon.Default.imagePath="http://www.nps.gov/npmap/npmap.js/"+c+"/images",L.npmap=b.exports={VERSION:c,control:{download:a("./src/control/download"),home:a("./src/control/home"),smallzoom:a("./src/control/smallzoom"),locate:a("./src/control/locate"),measure:a("./src/control/measure"),edit:a("./src/control/edit"),fullscreen:a("./src/control/fullscreen"),geocoder:a("./src/control/geocoder"),legend:a("./src/control/legend"),overview:a("./src/control/overview"),print:a("./src/control/print"),scale:a("./src/control/scale"),share:a("./src/control/share"),switcher:a("./src/control/switcher")},icon:{maki:a("./src/icon/maki"),npmaki:a("./src/icon/npmaki")},layer:{_cluster:a("./src/layer/cluster"),arcgisserver:{dynamic:a("./src/layer/arcgisserver/dynamic"),tiled:a("./src/layer/arcgisserver/tiled")},bing:a("./src/layer/bing"),cartodb:a("./src/layer/cartodb"),csv:a("./src/layer/csv"),geojson:a("./src/layer/geojson"),github:a("./src/layer/github"),kml:a("./src/layer/kml"),mapbox:a("./src/layer/mapbox"),spot:a("./src/layer/spot"),tiled:a("./src/layer/tiled"),wms:a("./src/layer/wms"),zoomify:a("./src/layer/zoomify")},map:a("./src/map"),popup:a("./src/popup"),preset:{baselayers:a("./src/preset/baselayers.json"),colors:a("./src/preset/colors.json"),layers:a("./src/preset/overlays.json"),maki:a("./node_modules/maki/_includes/maki.json"),npmaki:a("./node_modules/npmaki/_includes/maki.json")},tooltip:a("./src/tooltip"),util:{_:a("./src/util/util"),geocode:a("./src/util/geocode"),topojson:a("./src/util/topojson")}}},{"./node_modules/maki/_includes/maki.json":28,"./node_modules/npmaki/_includes/maki.json":30,"./package.json":34,"./src/control/download":35,"./src/control/edit":36,"./src/control/fullscreen":37,"./src/control/geocoder":38,"./src/control/home":39,"./src/control/legend":40,"./src/control/locate":41,"./src/control/measure":42,"./src/control/overview":43,"./src/control/print":44,"./src/control/scale":45,"./src/control/share":46,"./src/control/smallzoom":47,"./src/control/switcher":48,"./src/icon/maki":49,"./src/icon/npmaki":50,"./src/layer/arcgisserver/dynamic":51,"./src/layer/arcgisserver/tiled":52,"./src/layer/bing":53,"./src/layer/cartodb":54,"./src/layer/cluster":55,"./src/layer/csv":56,"./src/layer/geojson":57,"./src/layer/github":58,"./src/layer/kml":59,"./src/layer/mapbox":60,"./src/layer/spot":61,"./src/layer/tiled":62,"./src/layer/wms":63,"./src/layer/zoomify":64,"./src/map":65,"./src/popup":68,"./src/preset/baselayers.json":69,"./src/preset/colors.json":70,"./src/preset/overlays.json":71,"./src/tooltip":72,"./src/util/geocode":73,"./src/util/topojson":76,"./src/util/util":78}],34:[function(a,b){b.exports={author:{email:"nate_irwin@nps.gov",name:"Nate Irwin",url:"http://www.nps.gov/npmap/team/nate-irwin.html"},bugs:{email:"npmap@nps.gov",url:"https://github.com/nationalparkservice/npmap.js/issues"},contributors:[{email:"james_mcandrew@partner.nps.gov",name:"Jim McAndrew",url:"http://www.nps.gov/npmap/team/jim-mcandrew.html"},{email:"mamata_akella@partner.nps.gov",name:"Mamata Akella",url:"http://www.nps.gov/npmap/team/mamata-akella.html"}],dependencies:{csv2geojson:"3.7.0",handlebars:"1.3.0","humane-js":"https://github.com/wavded/humane-js/archive/3.2.0.tar.gz",leaflet:"0.7.2","leaflet-draw":"0.2.2","leaflet-markercluster":"https://github.com/Leaflet/Leaflet.markercluster/archive/0.4.tar.gz",maki:"~0.4.0",nanobar:"0.0.6",npmaki:"0.4.1",reqwest:"1.1.0",togeojson:"0.7.0"},description:"A JavaScript web mapping library, built as a Leaflet plugin, for the National Park Service.",devDependencies:{brfs:"1.0.0",browserify:"3.38.0","expect.js":"0.3.1",grunt:"0.4.4","grunt-aws-s3":"0.8.1","grunt-banner":"0.2.2","grunt-browserify":"2.0.1","grunt-contrib-clean":"0.5.0","grunt-contrib-compress":"0.7.0","grunt-contrib-concat":"0.4.0","grunt-contrib-copy":"0.5.0","grunt-contrib-csslint":"0.2.0","grunt-contrib-cssmin":"0.9.0","grunt-contrib-uglify":"0.4.0","grunt-curl":"1.4.0","grunt-http":"1.1.0","grunt-invalidate-cloudfront":"0.1.4","grunt-mkdir":"0.1.1","grunt-mocha-phantomjs":"0.4.3",happen:"0.1.3",mocha:"1.18.2","mocha-phantomjs":"3.3.2",sinon:"1.9.0","uglify-js":"2.4.13"},engines:{node:"*"},homepage:"http://www.nps.gov/npmap",keywords:["Cartography","Department of Interior","JavaScript","Leaflet","Map","National Park Service","NPMaki","NPMap","Park Tiles","Places","US Government","Web Map"],licenses:[{type:"MIT",url:"https://github.com/nationalparkservice/npmap.js/blob/master/LICENSE.md"}],main:"main.js",name:"npmap.js",repository:{type:"git",url:"https://github.com/nationalparkservice/npmap.js.git"},version:"2.0.0"}},{}],35:[function(a,b){"use strict";var c=a("../util/util"),d=L.Control.extend({initialize:function(){return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","download",this._li),this._button.title="Download data",L.DomEvent.addListener(this._button,"click",this.download,this),this},addTo:function(a){var b=c.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._map=a,c.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="26px",this},download:function(){window.alert("The download tool has not yet been implemented.")}});L.Map.mergeOptions({downloadControl:!1}),L.Map.addInitHook(function(){if(this.options.downloadControl){var a={};"object"==typeof this.options.downloadControl&&(a=this.options.downloadControl),this.downloadControl=L.npmap.control.download(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{"../util/util":78}],36:[function(a,b){"use strict";var c=a("../icon/maki");a("leaflet-draw");var d=L.Control.extend({includes:L.Mixin.Events,options:{circle:{metric:!1},marker:{icon:new c},polygon:{metric:!1},polyline:{metric:!1},position:"topleft",rectangle:{metric:!1}},initialize:function(a){return L.Util.setOptions(this,a),this._activeMode=null,this._featureGroup=new L.FeatureGroup,this._modes={},this},onAdd:function(a){var b,c,d=L.DomUtil.create("div","leaflet-control-edit leaflet-bar"),e=this;return this.options.marker&&this._initializeMode(d,new L.Draw.Marker(a,this.options.marker),"Draw a marker"),this.options.polyline&&this._initializeMode(d,new L.Draw.Polyline(a,this.options.polyline),"Draw a line"),this.options.polygon&&this._initializeMode(d,new L.Draw.Polygon(a,this.options.polygon),"Draw a polygon"),this.options.rectangle&&this._initializeMode(d,new L.Draw.Rectangle(a,this.options.rectangle),"Draw a rectangle"),this.options.circle&&this._initializeMode(d,new L.Draw.Circle(a,this.options.circle),"Draw a circle"),this._featureGroup.on("click",function(a){var d,e=a.layer.editing;e?(d=e._poly?e._poly._leaflet_id:e._shape._leaflet_id,b===d?(a.layer.editing.disable(),b=null,c=null):(c&&c.editing.disable(),a.layer.editing.enable(),b=d,c=a.layer)):c&&(c.editing.disable(),b=null,c=null)}),a.addLayer(this._featureGroup),a.on("click",function(){c&&(c.editing.disable(),b=null,c=null)}),a.on("draw:created",function(a){e._featureGroup.addLayer(a.layer),"marker"===a.layerType&&(a.layer.dragging.enable(),a.layer.on("dragstart",function(){c&&(c.editing.disable(),b=null,c=null)}))}),a.on("draw:drawstart",function(){c&&(c.editing.disable(),b=null,c=null)}),d},_handlerActivated:function(a){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[a.handler],this._activeMode.button&&L.DomUtil.addClass(this._activeMode.button,"pressed"),this.fire("enable")},_handlerDeactivated:function(){this._activeMode.button&&L.DomUtil.removeClass(this._activeMode.button,"pressed"),this._activeMode=null,this.fire("disable")},_initializeMode:function(a,b,c){var d=b.type,e=this,f=null;this._modes[d]={},this._modes[d].handler=b,this.options.ui&&(f=L.DomUtil.create("button",d,a),f.title=c,L.DomEvent.disableClickPropagation(f),L.DomEvent.on(f,"click",function(){e._activeMode&&e._activeMode.handler.type===d?e._modes[d].handler.disable():e._modes[d].handler.enable()},this._modes[d].handler)),this._modes[d].button=f,this._modes[d].handler.on("disabled",this._handlerDeactivated,this).on("enabled",this._handlerActivated,this)},activateMode:function(a){this._modes[a].handler.enable()},clearShapes:function(){this._featureGroup.clearLayers()},deactivateMode:function(a){this._modes[a].handler.disable()}});L.Map.mergeOptions({editControl:!1}),L.Map.addInitHook(function(){if(this.options.editControl){var a={};"object"==typeof this.options.drawControl&&(a=this.options.drawControl),a.ui=!0,this.editControl=L.npmap.control.edit(a).addTo(this)}else{var b=!1,c=this.options.overlays;if(c&&L.Util.isArray(c))for(var d=0;d<c.length;d++)if(c[d].edit){b=!0;break}b&&(this.editControl=L.npmap.control.edit({ui:!1}).addTo(this))}}),b.exports=function(a){return new d(a)}},{"../icon/maki":49,"leaflet-draw":25}],37:[function(a,b){"use strict";var c=a("../util/util"),d=L.Control.extend({initialize:function(){if(this._frame=null,this._supported=!0,window.self!==window.top&&""!==document.referrer)if(c.parseDomainFromUrl(document.referrer)===c.parseDomainFromUrl(window.location.href))try{this._frame=window.frameElement,this._frame&&(this._frameBody=this._getParentDocumentBody(this._frame))}catch(a){this._supported=!1}else this._supported=!1;return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","fullscreen enter",this._li),this._button.title="Enter fullscreen",L.DomEvent.addListener(this._button,"click",this.fullscreen,this),this},_onKeyUp:function(a){a||(a=window.event),this._isFullscreen===!0&&27===a.keyCode&&this.fullscreen()},addTo:function(a){var b=c.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._isFullscreen=!1,this._map=a,c.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="26px",this},_getParentDocumentBody:function(a){for(;a.parentNode;)if(a=a.parentNode,"body"===a.tagName.toLowerCase())return a;return null},fullscreen:function(){if(this._supported){var a,b=document.body;this._isFullscreen?(this._frame&&(this._frameBody.style.height=this._frameBodyHeight,this._frameBody.style.margin=this._frameBodyMargin,this._frameBody.style.overflow=this._frameBodyOverflow,this._frameBody.style.padding=this._frameBodyPadding,this._frameBody.style.width=this._frameBodyWidth,this._frame.height=this._frameHeight,this._frame.style.height=this._frameHeightStyle,this._frame.style.left=this._frameLeft,this._frame.style.margin=this._frameMargin,this._frame.style.padding=this._framePadding,this._frame.style.position=this._framePosition,this._frame.style.top=this._frameTop,this._frame.style.width=this._frameWidthStyle,this._frame.style.zIndex=this._frameZindex,this._frame.width=this._frameWidth),b.style.margin=this._bodyMargin,b.style.overflow=this._bodyOverflow,b.style.padding=this._bodyPadding,this._container.style.left=this._containerLeft,this._container.style.position=this._containerPosition,this._container.style.top=this._containerTop,L.DomEvent.removeListener(document,"keyup",this._onKeyUp),this._isFullscreen=!1,L.DomUtil.removeClass(this._button,"exit"),L.DomUtil.addClass(this._button,"enter"),this._button.title="Enter fullscreen",this._map.fire("exitfullscreen"),this._frame&&window.postMessage&&(parent.postMessage("exitfullscreen","*"),this._frameBody&&(a=window.parent.NPMapUtils,a&&a.fullscreenControl&&a.fullscreenControl.listeners&&"function"==typeof a.fullscreenControl.listeners.exitfullscreen&&a.fullscreenControl.listeners.exitfullscreen()))):(this._frame&&(this._frameBodyHeight=this._frameBody.style.height,this._frameBodyMargin=this._frameBody.style.margin,this._frameBodyOverflow=this._frameBody.style.overflow,this._frameBodyPadding=this._frameBody.style.padding,this._frameBodyWidth=this._frameBody.style.width,this._frameBody.style.height="100%",this._frameBody.style.margin="0",this._frameBody.style.overflow="hidden",this._frameBody.style.padding="0",this._frameBody.style.width="100%",this._frameHeight=this._frame.height,this._frameHeightStyle=this._frame.style.height,this._frameLeft=this._frame.style.left,this._frameMargin=this._frame.style.margin,this._framePadding=this._frame.style.padding,this._framePosition=this._frame.style.position,this._frameTop=this._frame.style.top,this._frameWidth=this._frame.width,this._frameWidthStyle=this._frame.style.width,this._frameZindex=this._frame.style.zIndex,this._frame.height="100%",this._frame.style.height="100%",this._frame.style.left="0",this._frame.style.margin="0",this._frame.style.padding="0",this._frame.style.position="fixed",this._frame.style.top="0",this._frame.style.width="100%",this._frame.style.zIndex=9999999999,this._frame.width="100%"),this._bodyMargin=b.style.margin,this._bodyOverflow=b.style.overflow,this._bodyPadding=b.style.padding,b.style.margin="0",b.style.overflow="hidden",b.style.padding="0",this._containerLeft=this._container.style.left,this._containerPosition=this._container.style.position,this._containerTop=this._container.style.top,this._container.style.left="0",this._container.style.position="fixed",this._container.style.top="0",L.DomEvent.addListener(document,"keyup",this._onKeyUp,this),this._isFullscreen=!0,L.DomUtil.removeClass(this._button,"enter"),L.DomUtil.addClass(this._button,"exit"),this._button.title="Exit fullscreen",this._map.fire("enterfullscreen"),this._frame&&window.postMessage&&(parent.postMessage("enterfullscreen","*"),this._frameBody&&(a=window.parent.NPMapUtils,a&&a.fullscreenControl&&a.fullscreenControl.listeners&&"function"==typeof a.fullscreenControl.listeners.enterfullscreen&&a.fullscreenControl.listeners.enterfullscreen()))),this._map.invalidateSize()
}else window.alert("Sorry, but the fullscreen tool does not work for maps that are loaded in an iframe hosted from another domain.")}});L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){if(this.options.fullscreenControl){var a={};"object"==typeof this.options.fullscreenControl&&(a=this.options.fullscreenControl),this.fullscreenControl=L.npmap.control.fullscreen(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{"../util/util":78}],38:[function(a,b){"use strict";var c=a("../util/geocode"),d=a("reqwest"),e=a("../util/util"),f=L.Control.extend({includes:L.Mixin.Events,options:{position:"topright",provider:"esri"},statics:{ATTRIBUTIONS:{BING:"Geocoding by Microsoft",ESRI:"Geocoding by Esri",MAPQUEST:"Geocoding by MapQuest",NOMINATIM:["Geocoding by Nominatim","&copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors"]}},initialize:function(a){return L.Util.setOptions(this,a),this},onAdd:function(a){var b=f.ATTRIBUTIONS[this.options.provider.toUpperCase()],c=L.DomUtil.create("div","leaflet-control-geocoder"),d=this._button=L.DomUtil.create("button","search",c),e=this._input=L.DomUtil.create("input",null,c),g=L.DomEvent.stopPropagation,h=this._ul=L.DomUtil.create("ul","leaflet-control",c);if(this._initalizeNpsIndex(),L.DomEvent.disableClickPropagation(d),L.DomEvent.disableClickPropagation(e),L.DomEvent.disableClickPropagation(h),L.DomEvent.on(d,"click",this._geocodeRequest,this).on(d,"mousewheel",g).on(e,"focus",function(){this.value=this.value}).on(e,"mousewheel",g).on(h,"mousewheel",g),this._container=c,d.title="Search",e.setAttribute("aria-activedescendant",null),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-expanded",!1),e.setAttribute("aria-label","Geocode"),e.setAttribute("aria-owns","geocoder_listbox"),e.setAttribute("placeholder","Find a location"),e.setAttribute("role","combobox"),e.setAttribute("type","text"),h.setAttribute("id","geocoder_listbox"),h.setAttribute("role","listbox"),b)if(L.Util.isArray(b))for(var i=0;i<b.length;i++)a.attributionControl.addAttribution(b[i]);else a.attributionControl.addAttribution(b);return c},onRemove:function(a){var b=f.ATTRIBUTIONS[this.options.provider.toUpperCase()];if(b)if(L.Util.isArray(b))for(var c=0;c<b.length;c++)a.attributionControl.removeAttribution(b[c]);else a.attributionControl.removeAttribution(b)},_checkScroll:function(){if(this._selected){var a=e.getPosition(this._selected).top,b=a+e.getOuterDimensions(this._selected).height,c=this._ul.scrollTop,d=[c,c+e.getOuterDimensions(this._ul).height];a<d[0]?this._ul.scrollTop=a-10:b>d[1]&&(this._ul.scrollTop=a-10)}},_clearResults:function(){this._ul.innerHTML="",this._ul.scrollTop=0,this._ul.style.display="none",this._input.setAttribute("aria-activedescendant",null),this._input.setAttribute("aria-expanded",!1),this._selected=null,this._oldValue=""},_geocodeRequest:function(){var a=this._input.value;if(a.length){var b=this;b._clearResults(),L.DomEvent.off(b._button,"click",b._geocodeRequest),L.DomUtil.removeClass(b._button,"search"),L.DomUtil.addClass(b._button,"working"),c[b.options.provider](a,function(a){L.DomEvent.on(b._button,"click",b._geocodeRequest,b),L.DomUtil.addClass(b._button,"search"),L.DomUtil.removeClass(b._button,"working"),a&&a.success&&(a.results&&a.results.length?b._map.fitBounds(a.results[0].bounds):a.message)})}},_handleSelect:function(a){var b=a.id;this._clearResults(),this._isDirty=!1,this._input.value=this._oldValue=b,this._input.focus(),this._map.fitBounds(this._bounds[b]),this._input.setAttribute("aria-activedescendant",b)},_initalizeNpsIndex:function(){var a=this;d({jsonpCallbackName:"callback",success:function(b){a._bounds={},a._oldValue=a._input.value;for(var c in b){var d=b[c];d&&(a._bounds[c]=[[d[2],d[3]],[d[1],d[0]]])}L.DomEvent.on(a._input,"keyup",function(b){var c=this.value;if(c){var d=b.keyCode;if(13!==d&&27!==d&&38!==d&&40!==d&&c!==a._oldValue&&(a._isDirty=!0,a._oldValue=c,c.length)){var e=[];for(var f in a._bounds)-1!==f.toLowerCase().indexOf(c.toLowerCase())&&e.push({b:a._bounds[f],d:f});if(e.length>0){a._clearResults();for(var g=0;g<e.length;g++){var h=e[g].d,i=h.toLowerCase().indexOf(c.toLowerCase()),j=L.DomUtil.create("li",null,a._ul);j.id=h,j.innerHTML=h.slice(0,i)+"<strong>"+h.slice(i,i+c.length)+"</strong>"+h.slice(i+c.length),L.DomEvent.on(j,"click",function(){a._handleSelect(this)})}a._ul.style.display="block",a._input.setAttribute("aria-expanded",!0)}else a._clearResults()}}else a._clearResults()}),L.DomEvent.on(a._input,"keydown",function(b){switch(b.keyCode){case 13:a._selected?a._handleSelect(a._selected):a._geocodeRequest();break;case 27:a._clearResults();break;case 38:"block"===a._ul.style.display&&(a._selected&&(L.DomUtil.removeClass(a._selected,"selected"),a._selected=e.getPreviousSibling(a._selected)),a._selected||(a._selected=a._ul.childNodes[a._ul.childNodes.length-1]),L.DomUtil.addClass(a._selected,"selected"),a._checkScroll()),L.DomEvent.preventDefault(b);break;case 40:"block"===a._ul.style.display&&(a._selected&&(L.DomUtil.removeClass(a._selected,"selected"),a._selected=e.getNextSibling(a._selected)),a._selected||(a._selected=a._ul.childNodes[0]),L.DomUtil.addClass(a._selected,"selected"),a._checkScroll()),L.DomEvent.preventDefault(b)}})},type:"jsonp",url:"http://www.nps.gov/npmap/data/park-bounds.js"})}});L.Map.mergeOptions({geocoderControl:!1}),L.Map.addInitHook(function(){if(this.options.geocoderControl){var a={};"object"==typeof this.options.geocoderControl&&(a=this.options.geocoderControl),this.geocoderControl=L.npmap.control.geocoder(a).addTo(this)}}),b.exports=function(a){return new f(a)}},{"../util/geocode":73,"../util/util":78,reqwest:31}],39:[function(a,b){"use strict";var c=L.Control.extend({options:{position:"topleft"},initialize:function(a){return L.Util.extend(this.options,a),this},onAdd:function(){var a=L.DomUtil.create("div","leaflet-control-home leaflet-bar leaflet-control"),b=L.DomUtil.create("button","leaflet-bar-single",a);return b.title="Pan/zoom to initial extent",L.DomEvent.disableClickPropagation(b),L.DomEvent.on(b,"click",L.DomEvent.preventDefault).on(b,"click",this.toHome,this),a},toHome:function(){var a=this._map,b=a.options;a.setView(b.center,b.zoom),a.closePopup()}});L.Map.mergeOptions({homeControl:!0}),L.Map.addInitHook(function(){if(this.options.homeControl){var a={};"object"==typeof this.options.homeControl&&(a=this.options.homeControl),this.homeControl=L.npmap.control.home(a).addTo(this)}}),b.exports=function(a){return new c(a)}},{}],40:[function(a,b){var c=L.Control.extend({options:{position:"topright"},_html:null,initialize:function(a){L.Util.setOptions(this,a),this._container=L.DomUtil.create("div","leaflet-control-legend"),L.DomEvent.disableClickPropagation(this._container),a.html?"string"==typeof a.html?(this._html=a.html,this._container.innerHTML=this._html):"function"==typeof a.html?(this._html=a.html(),this._container.innerHTML=this._html):(this._html=a.html,this._container.appendChild(this._html)):a.overlays&&(this._html=this._createLegend(a.overlays),this._container.innerHTML=this._html)},onAdd:function(a){return this._map=a,!this._html,this._container},_createLegend:function(a){var b="",c=this.options;c.title&&(b+="<h3>"+c.title+"</h3>");for(var d=0;d<a.length;d++){var e=a[d];if(e.name&&(b+="<h4>"+e.name+"</h4>"),e.icons){b+="<ul>";for(var f in e.icons)b+='<li><span style="background-color:'+e.icons[f]+';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> '+f+"</li>"}}return b}});L.Map.mergeOptions({legendControl:!1}),L.Map.addInitHook(function(){if(this.options.legendControl){var a={};"object"==typeof this.options.legendControl&&(a=this.options.legendControl),this.legendControl=L.npmap.control.legend(a).addTo(this)}}),b.exports=function(a){return new c(a)}},{}],41:[function(a,b){"use strict";var c=L.Control.extend({options:{circlePadding:[0,0],circleStyle:{color:"#136aec",fillColor:"#136aec",fillOpacity:.15,opacity:.5,weight:2},drawCircle:!0,follow:!1,followCircleStyle:{},followMarkerStyle:{},locateOptions:{},markerStyle:{color:"#136aec",fillColor:"#2a93ee",fillOpacity:.7,opacity:.9,radius:5,weight:2},metric:!0,onLocationError:function(a){alert(a.message)},onLocationOutsideMapBounds:function(a){alert(a.options.strings.outsideMapBoundsMsg)},position:"topleft",setView:!0,stopFollowingOnDrag:!0,strings:{outsideMapBoundsMsg:"You seem to be located outside of the boundaries of the map",popup:"You are within {distance} {unit} of this point",title:"Show me where I am"}},onAdd:function(a){function b(){return void 0===k._event?!1:a.options.maxBounds&&!a.options.maxBounds.contains(k._event.latlng)}function c(){k.options.setView&&(k._locateOnNextLocationFound=!0),k._active||a.locate(k._locateOptions),k._active=!0,k.options.follow&&g(),k._event?j():(L.DomUtil.addClass(k._button,"requesting"),L.DomUtil.addClass(k._button,"pressed"),L.DomUtil.removeClass(k._button,"following"))}function d(a){3===a.code&&k._locateOptions.watch||(i(),k.options.onLocationError(a))}function e(a){k._event&&k._event.latlng.lat===a.latlng.lat&&k._event.latlng.lng===a.latlng.lng&&k._event.accuracy===a.accuracy||k._active&&(k._event=a,k.options.follow&&k._following&&(k._locateOnNextLocationFound=!0),j())}function f(){k._active=!1,k._following=!1,k._locateOnNextLocationFound=k.options.setView}function g(){a.fire("startfollowing"),k._following=!0,k.options.stopFollowingOnDrag&&a.on("dragstart",h)}function h(){a.fire("stopfollowing"),k._following=!1,k.options.stopFollowingOnDrag&&a.off("dragstart",h),j()}function i(){a.stopLocate(),a.off("dragstart",h),L.DomUtil.removeClass(k._button,"pressed"),L.DomUtil.removeClass(k._button,"following"),f(),k._layer.clearLayers(),k._circleMarker=void 0,k._circle=void 0}function j(){var c,d,e,f,g,h;if(void 0===k._event.accuracy&&(k._event.accuracy=0),f=k._event.accuracy,k._locateOnNextLocationFound&&(b()?k.options.onLocationOutsideMapBounds(k):a.fitBounds(k._event.bounds,{padding:k.options.circlePadding}),k._locateOnNextLocationFound=!1),k.options.drawCircle)if(g=k._following?k.options.followCircleStyle:k.options.circleStyle,k._circle){k._circle.setLatLng(k._event.latlng).setRadius(f);for(e in g)k._circle.options[e]=g[e]}else k._circle=L.circle(k._event.latlng,f,g).addTo(k._layer);if(k.options.metric?(c=f.toFixed(0),h="meters"):(c=(3.2808399*f).toFixed(0),h="feet"),d=k._following?k.options.followMarkerStyle:k.options.markerStyle,k._circleMarker){k._circleMarker.setLatLng(k._event.latlng);for(e in d)k._circleMarker.options[e]=d[e]}else k._circleMarker=L.circleMarker(k._event.latlng,d).addTo(k._layer);k._container&&(L.DomUtil.removeClass(k._button,"requesting"),L.DomUtil.addClass(k._button,"pressed"),k._following?L.DomUtil.addClass(k._button,"following"):L.DomUtil.removeClass(k._button,"following"))}var k=this,l={};return this._container=L.DomUtil.create("div","npmap-control-locate leaflet-bar leaflet-control"),this._event=void 0,this._layer=(new L.LayerGroup).addTo(a),this._locateOptions={watch:!0},L.extend(this._locateOptions,this.options.locateOptions),L.extend(this._locateOptions,{setView:!1}),L.extend(l,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=l,l={},L.extend(l,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=l,k._button=L.DomUtil.create("button","leaflet-bar-single",this._container),k._button.title=this.options.strings.title,L.DomEvent.on(k._button,"click",L.DomEvent.stopPropagation).on(k._button,"click",L.DomEvent.preventDefault).on(k._button,"click",function(){k._active&&(void 0===k._event||a.getBounds().contains(k._event.latlng)||!k.options.setView||b())?i():c()}).on(k._button,"dblclick",L.DomEvent.stopPropagation),f(),a.on("locationerror",d,k),a.on("locationfound",e,k),this.locate=c,this.stopFollowing=h,this.stopLocate=i,this._container}});L.Map.addInitHook(function(){if(this.options.locateControl){var a={};"object"==typeof this.options.locateControl&&(a=this.options.locateControl),this.locateControl=L.npmap.control.locate(a).addTo(this)}}),b.exports=function(a){return new c(a)}},{}],42:[function(a,b){"use strict";a("leaflet-draw");var c=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft"},onAdd:function(){var a,b;return this._container=L.DomUtil.create("div","npmap-control-measure leaflet-bar leaflet-control"),this._button=L.DomUtil.create("button","leaflet-bar-single",this._container),this._button.title="Measure distance or calculate area",this._menu=L.DomUtil.create("ul","",this._container),b=L.DomUtil.create("li","",this._menu),a=L.DomUtil.create("li","",this._menu),this._buttonArea=L.DomUtil.create("button","",a),this._buttonArea.innerHTML="Area",this._buttonDistance=L.DomUtil.create("button","pressed",b),this._buttonDistance.innerHTML="Distance",this._activeMode="distance",L.DomEvent.on(this._button,"click",L.DomEvent.stopPropagation).on(this._button,"click",L.DomEvent.preventDefault).on(this._button,"click",this._toggleMeasure,this).on(this._button,"dblclick",L.DomEvent.stopPropagation).on(this._buttonArea,"click",this._buttonAreaClick,this).on(this._buttonDistance,"click",this._buttonDistanceClick,this).on(this._menu,"click",L.DomEvent.stopPropagation).on(this._menu,"click",L.DomEvent.preventDefault).on(this._menu,"dblclick",L.DomEvent.stopPropagation),this._container},_activateMode:function(a){this._activeMode=a,"area"===a?(this._stopMeasuringDistance(),this._startMeasuringArea()):(this._stopMeasuringArea(),this._startMeasuringDistance())},_buttonAreaClick:function(){this._buttonClick(this._buttonArea)},_buttonClick:function(a){if(!L.DomUtil.hasClass(a,"pressed")){var b=this._buttonArea,c=a.innerHTML.toLowerCase(),d=this._buttonDistance;"distance"===c&&(b=this._buttonDistance,d=this._buttonArea),L.DomUtil.removeClass(d,"pressed"),L.DomUtil.addClass(b,"pressed"),this._activateMode(c)}},_buttonDistanceClick:function(){this._buttonClick(this._buttonDistance)},_clearLastShape:function(){var a;if(this._layerGroupPath&&(this._layerGroup.removeLayer(this._layerGroupPath),this._layerGroupPath=null),this._currentCircles.length)for(a=0;a<this._currentCircles.length;a++)this._layerGroup.removeLayer(this._currentCircles[a]);if(this._currentTooltips.length)for(a=0;a<this._currentTooltips.length;a++)this._layerGroup.removeLayer(this._currentTooltips[a]);this._resetArea(),this._resetDistance()},_createTooltip:function(a){return new L.Marker(a,{clickable:!1,icon:L.divIcon({className:"leaflet-measure-tooltip",iconAnchor:[-5,-5]})}).addTo(this._layerGroup)},_finishPathArea:function(){this._resetArea()},_finishPathDistance:function(){this._tooltip&&this._layerGroup.removeLayer(this._tooltip),this._resetDistance()},_keyDown:function(a){27===a.keyCode&&this._toggleMeasure()},_mouseClickArea:function(a){var b,c=a.latlng;c&&(this._layerGroupPath?this._layerGroupPath.addLatLng(c):this._layerGroupPath=new L.Polygon([c],{clickable:!1,color:"red",fillColor:"red",weight:2}).addTo(this._layerGroup),b=new L.CircleMarker(c,{clickable:!1,color:"red",fill:!0,fillOpacity:1,opacity:1,radius:2,weight:1}).addTo(this._layerGroup),this._currentCircles.push(b),this._lastPointArea=c,this._currentCircles.length>2&&(this._area=L.GeometryUtil.geodesicArea(this._layerGroupPath.getLatLngs()),this._tooltip||(this._tooltip=this._createTooltip(c)),this._updateTooltipPosition(c),this._updateTooltipArea(this._area)))},_mouseClickDistance:function(a){var b,c=a.latlng;if(c){if(this._lastPointDistance){var d;this._tooltip=this._createTooltip(c),this._currentTooltips.push(this._tooltip),this._distance||(this._distance=0),this._updateTooltipPosition(c),d=a.latlng.distanceTo(this._lastPointDistance),this._updateTooltipDistance(this._distance+d,d),this._distance+=d,this._layerGroupPath||(this._layerGroupPath=new L.Polyline([this._lastPointDistance],{clickable:!1,color:"red",weight:2}).addTo(this._layerGroup))}this._layerGroupPath&&this._layerGroupPath.addLatLng(c),b=new L.CircleMarker(c,{clickable:!1,color:"red",fill:!0,fillOpacity:1,opacity:1,radius:2,weight:1}).addTo(this._layerGroup),this._currentCircles.push(b),this._lastPointDistance=c}},_resetArea:function(){this._area=0,this._currentCircles=this._currentTooltips=[],this._lastPointArea=this._layerGroupPath=this._tooltip=void 0},_resetDistance:function(){this._currentCircles=this._currentTooltips=[],this._distance=0,this._lastPointDistance=this._layerGroupPath=this._tooltip=void 0},_startMeasuringArea:function(){var a=this._map;this._doubleClickZoom=a.doubleClickZoom.enabled(),a.doubleClickZoom.disable(),L.DomEvent.on(document,"keydown",this._keyDown,this).on(a,"click",this._mouseClickArea,this).on(a,"dblclick",this._finishPathArea,this),this._currentCircles=this._currentTooltips=[],this._layerGroup||(this._layerGroup=(new L.LayerGroup).addTo(a))},_startMeasuringDistance:function(){var a=this._map;this._doubleClickZoom=a.doubleClickZoom.enabled(),a.doubleClickZoom.disable(),L.DomEvent.on(document,"keydown",this._keyDown,this).on(a,"click",this._mouseClickDistance,this).on(a,"dblclick",this._finishPathDistance,this),this._currentCircles=this._currentTooltips=[],this._layerGroup||(this._layerGroup=(new L.LayerGroup).addTo(a))},_stopMeasuringArea:function(){var a=this._map;L.DomEvent.off(document,"keydown",this._keyDown,this).off(a,"click",this._mouseClickArea,this).off(a,"dblclick",this._finishPathArea,this),this._clearLastShape()},_stopMeasuringDistance:function(){var a=this._map;L.DomEvent.off(document,"keydown",this._keyDown,this).off(a,"click",this._mouseClickDistance,this).off(a,"dblclick",this._finishPathDistance,this),this._clearLastShape()},_toggleMeasure:function(){var a=this._map;L.DomUtil.hasClass(this._button,"pressed")?(L.DomUtil.removeClass(this._button,"pressed"),a._container.style.cursor="",a._controllingCursor=!0,a._controllingInteractivity=!0,this._menu.style.display="none","area"===this._activeMode?this._stopMeasuringArea():this._stopMeasuringDistance(),this._layerGroup.clearLayers(),this._layerGroupPath=null,this._doubleClickZoom&&a.doubleClickZoom.enable()):(L.DomUtil.addClass(this._button,"pressed"),a._container.style.cursor="crosshair",a._controllingCursor=!1,a._controllingInteractivity=!1,this._menu.style.display="block","area"===this._activeMode?this._startMeasuringArea():this._startMeasuringDistance())},_toAcres:function(a){return(a/4046.86).toFixed(2)},_toMiles:function(a){return(621371e-9*a).toFixed(2)},_updateTooltipArea:function(a){this._tooltip._icon.innerHTML='<div class="leaflet-measure-tooltip-total">'+this._toAcres(a)+" acres</div>"},_updateTooltipDistance:function(a,b){var c=this._toMiles(b),d=this._toMiles(a),e='<div class="leaflet-measure-tooltip-total">'+d+" mi</div>";c>0&&d!==c&&(e+='<div class="leaflet-measure-tooltip-difference">(+'+c+" mi)</div>"),this._tooltip._icon.innerHTML=e},_updateTooltipPosition:function(a){this._tooltip.setLatLng(a)}});L.Map.mergeOptions({measureControl:!1}),L.Map.addInitHook(function(){if(this.options.measureControl){var a={};"object"==typeof this.options.measureControl&&(a=this.options.measureControl),this.measureControl=L.npmap.control.measure(a).addTo(this)}}),b.exports=function(a){return new c(a)}},{"leaflet-draw":25}],43:[function(a,b){"use strict";var c=a("../preset/baselayers.json"),d=a("../util/util"),e=L.Control.extend({options:{autoToggleDisplay:!1,height:150,position:"bottomright",toggleDisplay:!0,width:150,zoomAnimation:!1,zoomLevelFixed:!1,zoomLevelOffset:-5},addTo:function(a){return L.Control.prototype.addTo.call(this,a),this._miniMap.setView(this._mainMap.getCenter(),this._decideZoom(!0)),this._setDisplay(this._decideMinimized()),this},initialize:function(a){if(d.strict(a,"object"),"string"==typeof a.layer){var b=a.layer.split("-");a.layer=c[b[0]][b[1]]}return L.Util.setOptions(this,a),this._layer=a.layer.L=L.npmap.layer[a.layer.type](a.layer),this},onAdd:function(a){return this._mainMap=a,this._attributionContainer=this._mainMap.attributionControl._container,this._container=L.DomUtil.create("div","leaflet-control-overview"),this._container.style.margin="0 0 "+-this._attributionContainer.offsetHeight+"px 0",this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",L.DomEvent.disableClickPropagation(this._container),L.DomEvent.on(this._container,"mousewheel",L.DomEvent.stopPropagation),this._miniMap=this.L=new L.Map(this._container,{attributionControl:!1,autoToggleDisplay:this.options.autoToggleDisplay,boxZoom:!this.options.zoomLevelFixed,crs:a.options.crs,doubleClickZoom:!this.options.zoomLevelFixed,homeControl:!1,scrollWheelZoom:!this.options.zoomLevelFixed,smallzoomControl:!1,touchZoom:!this.options.zoomLevelFixed,zoomAnimation:this.options.zoomAnimation,zoomControl:!1}),this._attributionContainer.style.marginRight=this.options.width+3+"px",this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(L.Util.bind(function(){this._aimingRect=L.rectangle(this._mainMap.getBounds(),{clickable:!1,color:"#d29700",weight:3}).addTo(this._miniMap),this._shadowRect=L.rectangle(this._mainMap.getBounds(),{clickable:!1,color:"#454545",fillOpacity:0,opacity:0,weight:3}).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},onRemove:function(){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer),this._attributionContainer.style.marginRight="0px"},_addToggleButton:function(){this._toggleDisplayButton=this._createButton("","Hide Overview",null,this._container,this._toggleDisplayButtonClicked,this),this._toggleDisplayButtonImage=L.DomUtil.create("span",null,this._toggleDisplayButton)},_createButton:function(a,b,c,d,e,f){var g=L.DomUtil.create("button",c,d),h=L.DomEvent.stopPropagation;return g.innerHTML=a,g.title=b,L.DomEvent.on(g,"click",h).on(g,"mousedown",h).on(g,"dblclick",h).on(g,"click",L.DomEvent.preventDefault).on(g,"click",e,f),g},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?this._mainMap.getBounds().contains(this._miniMap.getBounds())?!0:!1:this._minimized},_decideZoom:function(a){if(this.options.zoomLevelFixed)return a?this.options.zoomLevelFixed:this._mainMap.getZoom();if(a)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var b,c=this._miniMap.getZoom()-this._mainMap.getZoom(),d=this._miniMap.getZoom()-this.options.zoomLevelOffset;return c>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(b=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):b=this._mainMap.getZoom():b=d,this._lastMiniMapZoom=this._miniMap.getZoom(),b},_minimize:function(){var a=this;this._toggleDisplayButton.style.display="none",this._toggleDisplayButton.style.height="47px",this._toggleDisplayButton.style.width="47px",this._toggleDisplayButtonImage.className+=" minimized",this._toggleDisplayButtonImage.style.bottom="auto",this._toggleDisplayButtonImage.style.right="auto",this._toggleDisplayButtonImage.style.left="10px",this._toggleDisplayButtonImage.style.top="10px",this._container.style.width="47px",this._container.style.height="47px",this._attributionContainer.style.marginRight="50px",this._minimized=!0,setTimeout(function(){a._toggleDisplayButton.style.display="block",a._aimingRect.setStyle({fillOpacity:0,opacity:0}),a._miniMap.invalidateSize()},200)},_onMainMapMoved:function(){this._miniMapMoving?this._miniMapMoving=!1:(this._mainMapMoving=!0,this._miniMap.setView(this._mainMap.getCenter(),this._decideZoom(!0)),this._setDisplay(this._decideMinimized())),this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoved:function(){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({fillOpacity:0,opacity:0}))},_onMiniMapMoveStarted:function(){var a=this._aimingRect.getBounds();this._lastAimingRectPosition={sw:this._miniMap.latLngToContainerPoint(a.getSouthWest()),ne:this._miniMap.latLngToContainerPoint(a.getNorthEast())}},_onMiniMapMoving:function(){!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new L.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({fillOpacity:.3,opacity:1}))},_restore:function(){var a=this;this._toggleDisplayButton.style.display="none",this._toggleDisplayButton.style.height="20px",this._toggleDisplayButton.style.bottom="0",this._toggleDisplayButton.style.left="auto",this._toggleDisplayButton.style.position="absolute",this._toggleDisplayButton.style.right="0",this._toggleDisplayButton.style.top="auto",this._toggleDisplayButton.style.width="20px",this._toggleDisplayButtonImage.className=this._toggleDisplayButtonImage.className.replace(/(?:^|\s)minimized(?!\S)/g,""),this._toggleDisplayButtonImage.style.bottom="10px",this._toggleDisplayButtonImage.style.left="auto",this._toggleDisplayButtonImage.style.right="10px",this._toggleDisplayButtonImage.style.top="auto",this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._attributionContainer.style.marginRight=this.options.width+3+"px",this._minimized=!1,setTimeout(function(){a._toggleDisplayButton.style.display="block",a._aimingRect.setStyle({fillOpacity:.2,opacity:.5}),a._miniMap.invalidateSize()},200)},_setDisplay:function(a){a!==this._minimized&&(this._minimized?this._restore():this._minimize())},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?(this._restore(),this._toggleDisplayButton.title="Hide Overview"):(this._minimize(),this._toggleDisplayButton.title="Show Overview")}});L.Map.mergeOptions({overviewControl:!1}),L.Map.addInitHook(function(){if(this.options.overviewControl){var a={};"object"==typeof this.options.overviewControl&&(a=this.options.overviewControl),this.overviewControl=new L.npmap.control.overview(a).addTo(this)}}),b.exports=function(a){return new e(a)}},{"../preset/baselayers.json":69,"../util/util":78}],44:[function(a,b){"use strict";var c=a("../util/util"),d=L.Control.extend({initialize:function(){return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","print",this._li),this._button.title="Print the map",L.DomEvent.addListener(this._button,"click",this.print,this),this},addTo:function(a){var b=c.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._map=a,c.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="26px",this},_escapeHtml:function(a){a.popup&&("string"==typeof a.popup?a.popup=c.escapeHtml(a.popup):("string"==typeof a.popup.description&&(a.popup.description=c.escapeHtml(a.popup.description)),"string"==typeof a.popup.title&&(a.popup.title=c.escapeHtml(a.popup.title)))),a.tooltip&&(a.tooltip=c.escapeHtml(a.popup))},print:function(){var a,b,c,d,e=this._map,f=this,g=e.options,h=e.getCenter(),i=g.center,j=e.getZoom(),k={b:{baseLayers:[],center:{lat:i.lat,lng:i.lng},overlays:[],zoom:g.zoom},c:JSON.stringify({lat:h.lat,lng:h.lng}),z:j};for(b=0;b<g.baseLayers.length;b++)if(c=g.baseLayers[b],"object"==typeof c.L){a=L.extend({},c),delete a.L,f._escapeHtml(a),k.b.baseLayers.push(a);break}for(b=0;b<g.overlays.length;b++)c=g.overlays[b],"object"==typeof c.L&&(a=L.extend({},c),delete a.L,f._escapeHtml(a),k.b.overlays.push(a));k.b=JSON.stringify(k.b),d=window.open("http://www.nps.gov/maps/print.html"+L.Util.getParamString(k),"_blank"),d.focus()}});L.Map.mergeOptions({printControl:!1}),L.Map.addInitHook(function(){if(this.options.printControl){var a={};"object"==typeof this.options.printControl&&(a=this.options.printControl),this.printControl=L.npmap.control.print(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{"../util/util":78}],45:[function(a,b){"use strict";var c=L.Control.Scale.extend({options:{metric:!1}});L.Map.mergeOptions({scaleControl:!1}),L.Map.addInitHook(function(){if(this.options.scaleControl){var a={};"object"==typeof this.options.scaleControl&&(a=this.options.scaleControl),this.scaleControl=L.npmap.control.scale(a).addTo(this)}}),b.exports=function(a){return new c(a)}},{}],46:[function(a,b){"use strict";var c=a("../util/util"),d=L.Control.extend({initialize:function(){return this._li=L.DomUtil.create("li",""),this._button=L.DomUtil.create("button","share",this._li),this._button.title="Share the map",L.DomEvent.addListener(this._button,"click",this.share,this),this},addTo:function(a){var b=c.getChildElementsByClassName(a.getContainer().parentNode.parentNode,"npmap-toolbar")[0];return b.childNodes[1].appendChild(this._li),b.style.display="block",this._container=b.parentNode.parentNode,this._map=a,c.getChildElementsByClassName(this._container.parentNode,"npmap-map-wrapper")[0].style.top="26px",this},share:function(){window.alert("The share tool has not yet been implemented.")}});L.Map.mergeOptions({shareControl:!1}),L.Map.addInitHook(function(){if(this.options.shareControl){var a={};"object"==typeof this.options.shareControl&&(a=this.options.shareControl),this.shareControl=L.npmap.control.share(a).addTo(this)}}),b.exports=function(a){return new d(a)}},{"../util/util":78}],47:[function(a,b){"use strict";var c=L.Control.extend({options:{position:"topleft"},initialize:function(a){return L.Util.extend(this.options,a),this},onAdd:function(a){return this._container=L.DomUtil.create("div","leaflet-control-zoom leaflet-bar"),this._zoomInButton=this._createButton("Zoom in","in",this._container,this._zoomIn,this),this._zoomOutButton=this._createButton("Zoom out","out",this._container,this._zoomOut,this),a.on("zoomend zoomlevelschange",this._updateDisabled,this),this._updateDisabled(),this._container},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_createButton:function(a,b,c,d,e){var f=L.DomUtil.create("button",b,c);return f.title=a,L.DomEvent.disableClickPropagation(f),L.DomEvent.on(f,"click",L.DomEvent.preventDefault).on(f,"click",d,e),f},_updateDisabled:function(){var a="leaflet-disabled",b=this._map;L.DomUtil.removeClass(this._zoomInButton,a),L.DomUtil.removeClass(this._zoomOutButton,a),b._zoom===b.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,a),b._zoom===b.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,a)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)}});L.Map.mergeOptions({smallzoomControl:!0}),L.Map.addInitHook(function(){if(this.options.smallzoomControl){var a={};"object"==typeof this.options.smallzoomControl&&(a=this.options.smallzoomControl),this.smallzoomControl=L.npmap.control.smallzoom(a).addTo(this)}}),b.exports=function(a){return new c(a)}},{}],48:[function(a,b){"use strict";var c=a("../util/util"),d=L.Control.extend({options:{position:"topright"},statics:{SELECTED_ID:"basemap_listbox_selected"},initialize:function(a){this._baseLayers=a},_addLi:function(a){var b=L.DomUtil.create("li",a.visible?"selected":null);a.visible&&(b.setAttribute("id",d.SELECTED_ID),this._active.setAttribute("aria-activedescendant",d.SELECTED_ID)),b.innerHTML=a.name,b.layerId=L.stamp(a),this._list.appendChild(b)},_initLayout:function(){var a=this._container=L.DomUtil.create("div","npmap-control-switcher");L.Browser.touch?L.DomEvent.on(a,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(a),L.DomEvent.on(a,"mousewheel",L.DomEvent.stopPropagation)),this._active=L.DomUtil.create("div",null,a),this._active.setAttribute("aria-expanded",!1),this._active.setAttribute("aria-haspopup",!0),this._active.setAttribute("aria-label","Switch base maps"),this._active.setAttribute("aria-owns","basemap_listbox"),this._active.setAttribute("role","combobox"),this._list=L.DomUtil.create("ul",null,a),this._list.setAttribute("id","basemap_listbox"),this._list.setAttribute("role","listbox"),this._list.style.display="none",this._activeIcon=L.DomUtil.create("span",null,this._active),L.DomUtil.create("ico",null,this._activeIcon),this._activeText=L.DomUtil.create("div",null,this._active),this._activeDropdown=L.DomUtil.create("span",null,this._active),L.DomEvent.addListener(this._active,"click",this._toggleList,this)
},_onLayerChange:function(a){var b,c=this._baseLayers[L.stamp(a.layer)];c&&(c.overlay||(b="layeradd"===a.type?"baselayerchange":null),b&&this._map.fire(b,c))},_onClick:function(a){var b=c.getEventObjectTarget(a);if(!L.DomUtil.hasClass(b,"selected")){var e,f=!1,g=c.getChildElementsByNodeName(this._list,"li"),h=!1;for(e=0;e<g.length;e++){var i=g[e];if(L.DomUtil.hasClass(i,"selected")){i.removeAttribute("id"),L.DomUtil.removeClass(i,"selected");break}}for(b.setAttribute("id",d.SELECTED_ID),this._active.setAttribute("aria-activedescendant",d.SELECTED_ID),e=0;e<this._baseLayers.length;e++){var j=this._baseLayers[e];if(j.L?(this._map.removeLayer(j.L),j.visible=!1,h=!0,delete j.L):b.layerId===j._leaflet_id&&(j.visible=!0,j.L="arcgisserver"===j.type?L.npmap.layer[j.type][j.tiled===!0?"tiled":"dynamic"](j):L.npmap.layer[j.type](j),this._map.addLayer(j.L,!0),L.DomUtil.addClass(b,"selected"),this._setActive(j),f=!0),f&&h)break}}this._toggleList()},_setActive:function(a){var b=this._activeIcon.childNodes[0],c=a.icon;c||(c="generic"),b.className="",L.DomUtil.addClass(b,c+"-small"),this._activeText.innerHTML=a.name},_toggleList:function(){this._list.style.display&&"none"===this._list.style.display?(this._list.style.display="block",L.DomUtil.addClass(this._activeDropdown,"open")):(this._list.style.display="none",L.DomUtil.removeClass(this._activeDropdown,"open"))},_update:function(){var a,b;for(this._activeIcon.childNodes[0].innerHTML="",this._activeText.innerHTML="",this._list.innerHTML="",b=0;b<this._baseLayers.length;b++){var d=this._baseLayers[b];this._addLi(d),d.visible&&this._setActive(d)}for(a=c.getChildElementsByNodeName(this._list,"li"),b=0;b<a.length;b++)L.DomEvent.addListener(a[b],"click",this._onClick,this)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)}});L.Map.addInitHook(function(){this.options.baseLayers&&this.options.baseLayers.length>1&&(this.switcherControl=L.npmap.control.switcher(this.options.baseLayers).addTo(this))}),b.exports=function(a){return new d(a)}},{"../util/util":78}],49:[function(a,b){"use strict";var c=a("../util/util"),d=L.Icon.extend({options:{"marker-color":"#000000","marker-size":"medium"},statics:{CSS_TEMPLATE:"url(https://a.tiles.mapbox.com/v3/marker/pin-{{size}}{{symbol}}+{{color}}{{retina}}.png)"},initialize:function(a){a=a||{};var b=a["marker-size"]||"medium",c={large:{iconAnchor:[17.5,49],iconSize:[35,55],popupAnchor:[2,-45]},medium:{iconAnchor:[14,36],iconSize:[28,41],popupAnchor:[2,-34]},small:{iconAnchor:[10,24],iconSize:[20,30],popupAnchor:[2,-24]}};L.Util.extend(a,c[b]),L.setOptions(this,a)},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:document.createElement("div"),e=this.options;return this._setIconStyles(b,"icon"),b.style.backgroundImage=c.handlebars(d.CSS_TEMPLATE,{color:e["marker-color"].replace("#",""),retina:L.Browser.retina?"@2x":"",size:e["marker-size"].slice(0,1),symbol:e["marker-symbol"]?"-"+e["marker-symbol"]:""}),b},createShadow:function(){return null}});L.Marker.mergeOptions({icon:new d}),b.exports=function(a){return new d(a)}},{"../util/util":78}],50:[function(a,b){"use strict";var c=a("../util/util"),d=L.Icon.extend({options:{"marker-color":"#000000","marker-size":"medium"},statics:{MAKI_TEMPLATE:"url(https://a.tiles.mapbox.com/v3/marker/pin-{{size}}+{{color}}{{retina}}.png)"},initialize:function(a){a=a||{};var b=a["marker-size"]||"medium",c={large:{iconAnchor:[17.5,49],iconSize:[35,55],popupAnchor:[2,-45]},medium:{iconAnchor:[14,36],iconSize:[28,41],popupAnchor:[2,-34]},small:{iconAnchor:[10,24],iconSize:[20,30],popupAnchor:[2,-24]}};L.Util.extend(a,c[b]),L.Util.setOptions(this,a)},createIcon:function(a){var b=this.options,e=L.DomUtil.create("div","npmaki-icon "+b["marker-size"]+" "+b["marker-symbol"]+"-"+b["marker-size"]+(L.Browser.retina?"-2x":"")),f=a&&"DIV"===a.tagName?a:document.createElement("div");return this._setIconStyles(f,"icon"),f.style.backgroundImage=c.handlebars(d.MAKI_TEMPLATE,{color:b["marker-color"].replace("#",""),retina:L.Browser.retina?"@2x":"",size:b["marker-size"].slice(0,1)}),f.appendChild(e),f},createShadow:function(){return null}});b.exports=function(a){return new d(a)}},{"../util/util":78}],51:[function(a,b){var c=a("../../util/util"),d=L.Class.extend({includes:[a("../../mixin/esri")],options:{opacity:1,position:"front"},_defaultLayerParams:{bboxSR:3857,f:"image",format:"png24",imageSR:3857,layers:"",transparent:!0},initialize:function(a){c.strict(a.url,"string"),this._layerParams=L.Util.extend({},this._defaultLayerParams),this._serviceUrl=this._cleanUrl(a.url);for(var b in a)this._defaultLayerParams.hasOwnProperty(b)&&(this._layerParams[b]=a[b]);this._parseLayers(),L.Util.setOptions(this,a),this._layerParams.transparent||(this.options.opacity=1),a.clickable===!1&&(this._hasInteractivity=!1),this._getMetadata()},onAdd:function(a){if(this._map=a,this._moveHandler=this._debounce(this._update,150,this),a.options.crs&&a.options.crs.code){var b=a.options.crs.code.split(":")[1];this._layerParams.bboxSR=b,this._layerParams.imageSR=b}a.on("moveend",this._moveHandler,this),this._update()},onRemove:function(a){this._currentImage&&this._map.removeLayer(this._currentImage),a.off("moveend",this._moveHandler,this)},_debounce:function(a,b){var c=null;return function(){var d=this||d,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},_getImageUrl:function(){var a=this._map,b=a.getBounds(),c=a.options.crs,d=this._layerParams,e=a.getSize(),f=c.project(b._northEast),g=this.options,h=c.project(b._southWest);return d.bbox=[h.x,h.y,f.x,f.y].join(","),d.size=e.x+","+e.y,g.edit&&(d.nocache=(new Date).getTime()),g.token&&(d.token=g.token),this._serviceUrl+"export"+L.Util.getParamString(d)},_parseLayers:function(){if("undefined"==typeof this._layerParams.layers)return void delete this._layerParams.layerOption;var a=this._layerParams.layerOption||null,b=this._layerParams.layers||null,c="show",d=["exclude","hide","include","show"];if(delete this._layerParams.layerOption,a)-1!==d.indexOf(a)&&(c=a),this._layerParams.layers=c+":"+b;else if(L.Util.isArray(b))this._layerParams.layers=c+":"+b.join(",");else if("string"==typeof b){var e=b.match(":");e&&(b=b.split(e[0]),Number(b[1].split(",")[0])&&(-1!==d.indexOf(b[0])&&(c=b[0]),b=b[1])),this._layerParams.layers=c+":"+b}},_update:function(){var a,b,c;this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress||(c=this._map.getZoom(),c>this.options.maxZoom||c<this.options.minZoom||(a=this._map.getBounds(),a._southWest.wrap(),a._northEast.wrap(),b=new L.ImageOverlay(this._getImageUrl(),a,{opacity:0}).addTo(this._map),b.on("load",function(b){var c=b.target,d=this._currentImage;c._bounds.equals(a)?(this._currentImage=c,"front"===this.options.position?this._currentImage.bringToFront():this._currentImage.bringToBack(),this._currentImage.setOpacity(this.options.opacity),d&&this._map.removeLayer(d)):this._map.removeLayer(c)},this)))},bringToBack:function(){return this.options.position="back",this._currentImage.bringToBack(),this},bringToFront:function(){return this.options.position="front",this._currentImage.bringToFront(),this},getLayers:function(){return this._layerParams.layers},redraw:function(){this._update()},setLayers:function(a){"number"==typeof a&&(a=a.toString()),this._layerParams.layers=a,this._parseLayers(),this._map.removeLayer(this._currentImage),this._update()},setOpacity:function(a){this.options.opacity=a,this._currentImage.setOpacity(a)}});b.exports=function(a){return new d(a)}},{"../../mixin/esri":66,"../../util/util":78}],52:[function(a,b){"use strict";var c=a("../../util/util"),d=L.TileLayer.extend({includes:[a("../../mixin/esri")],options:{errorTileUrl:L.Util.emptyImageUrl},initialize:function(a){L.Util.setOptions(this,a),c.strict(a.url,"string"),this._serviceUrl=this._cleanUrl(a.url),this.tileUrl=this._cleanUrl(a.url)+"tile/{z}/{y}/{x}",a.clickable===!1&&(this._hasInteractivity=!1),L.TileLayer.prototype.initialize.call(this,this.tileUrl,a),this._getMetadata()}});b.exports=function(a){return new d(a)}},{"../../mixin/esri":66,"../../util/util":78}],53:[function(a,b){"use strict";var c=L.TileLayer.extend({options:{attribution:"Bing",culture:"en-US",layer:"aerial",subdomains:[0,1,2,3]},initialize:function(a){L.Util.setOptions(this,a),this._key="Ag4-2f0g7bcmcVgKeNYvH_byJpiPQSx4F9l0aQaz9pDYMORbeBFZ0N3C3A5LSf65",this._url=null,this.meta={},this.loadMetadata()},onRemove:function(a){for(var b=0;b<this._providers.length;b++){var c=this._providers[b];c.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(c.attrib),c.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[a])},_update:function(){null!=this._url&&this._map&&(this._updateAttribution(),L.TileLayer.prototype._update.apply(this,[]))},_updateAttribution:function(){for(var a=this._map.getBounds(),b=this._map.getZoom(),c=0;c<this._providers.length;c++){var d=this._providers[c];b<=d.zoomMax&&b>=d.zoomMin&&a.intersects(d.bounds)?(!d.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(d.attrib),d.active=!0):(d.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(d.attrib),d.active=!1)}},getTileUrl:function(a){var b=this.options.subdomains,c=this.options.subdomains[Math.abs((a.x+a.y)%b.length)],d=this._getZoomForUrl();return this._url.replace("{subdomain}",c).replace("{quadkey}",this.tile2quad(a.x,a.y,d)).replace("http:",document.location.protocol).replace("{culture}",this.options.culture)},initMetadata:function(){var a=this.meta.resourceSets[0].resources[0];if(this.options.subdomains=a.imageUrlSubdomains,this._url=a.imageUrl,this._providers=[],a.imageryProviders)for(var b=0;b<a.imageryProviders.length;b++)for(var c=a.imageryProviders[b],d=0;d<c.coverageAreas.length;d++){var e=c.coverageAreas[d],f={zoomMin:e.zoomMin,zoomMax:e.zoomMax,active:!1},g=new L.LatLngBounds(new L.LatLng(e.bbox[0]+.01,e.bbox[1]+.01),new L.LatLng(e.bbox[2]-.01,e.bbox[3]-.01));f.bounds=g,f.attrib=c.attribution,this._providers.push(f)}this._update()},loadMetadata:function(){var a="_bing_metadata_"+L.Util.stamp(this),b=this,c=document.createElement("script");window[a]=function(c){var d=document.getElementById(a);return b.meta=c,window[a]=void 0,d.parentNode.removeChild(d),c.errorDetails?void(window.console&&console.error("Error: "+c.errorDetails)):void b.initMetadata()},c.src=document.location.protocol+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.layer+"?include=ImageryProviders&jsonp="+a+"&key="+this._key,c.id=a,document.getElementsByTagName("head")[0].appendChild(c)},tile2quad:function(a,b,c){for(var d="",e=c;e>0;e--){var f=0,g=1<<e-1;0!==(a&g)&&(f+=1),0!==(b&g)&&(f+=2),d+=f}return d}});b.exports=function(a){return new c(a)}},{}],54:[function(a,b){"use strict";var c=a("reqwest"),d=a("../util/utfgrid"),e=a("../util/util"),f=L.TileLayer.extend({options:{errorTileUrl:L.Util.emptyImageUrl,format:"png",subdomains:[0,1,2,3]},initialize:function(a){L.Browser.retina&&a.detectRetina||(a.detectRetina=!1),L.Util.setOptions(this,a),e.strict(this.options.table,"string"),e.strict(this.options.user,"string"),L.TileLayer.prototype.initialize.call(this,void 0,this.options),this._build()},_update:function(){this._urlTile&&L.TileLayer.prototype._update.call(this)},_build:function(){var a=this;this._urlApi="https://"+this.options.user+".cartodb.com/api/v2/sql",c({success:function(b){var f;if(a._hasInteractivity=!1,a._interactivity=null,a.options.interactivity)a._interactivity=a.options.interactivity.split(",");else if(a.options.clickable!==!1&&b.fields){a._interactivity=[];for(var g in b.fields)"geometry"!==b.fields[g].type&&a._interactivity.push(g);a._interactivity.length&&(a._hasInteractivity=!0)}f=a.options.cartocss?a.options.cartocss:a.options.styles?a._stylesToCartoCss(a.options.styles):"#layer{line-color:#d39800;line-opacity:0.8;line-width:3;marker-fill:#d39800;marker-height:8;polygon-fill:#d39800;polygon-opacity:0.2;}",a._cartocss=f,a._sql=a.options.sql||"SELECT * FROM "+a.options.table+";",c({success:function(b){var c="http://{s}.api.cartocdn.com/"+a.options.user+"/tiles/layergroup/"+b.layergroupid,e="{z}/{x}/{y}";return a._hasInteractivity&&a._interactivity.length&&(a._urlGrid=c+"/0/"+e+".grid.json",a._grid=new d(a)),a._urlTile=c+"/"+e+".png",a.setUrl(a._urlTile),a.redraw(),a},type:"jsonp",url:e.buildUrl("http://"+a.options.user+".cartodb.com/tiles/layergroup",{config:JSON.stringify({layers:[{options:{cartocss:a._cartocss,cartocss_version:"2.1.0",interactivity:a._interactivity,sql:a._sql},stat_tag:"API",type:"cartodb"}],version:"1.0.0"})})})},type:"jsonp",url:e.buildUrl(this._urlApi,{q:"select * from "+this.options.table+" limit 1;"})})},_getGridData:function(a,b){var c=this;this._urlGrid?this._grid.getTileGrid(L.Util.template(this._urlGrid,L.Util.extend({s:this.options.subdomains[Math.floor(Math.random()*this.options.subdomains.length)]},this._grid.getTileCoords(a))),a,function(a,d){b(d?{layer:c,results:[d]}:null)}):b(null)},_handleClick:function(a,b){this._getGridData(a,b)},_handleMousemove:function(a,b){this._getGridData(a,b)},_stylesToCartoCss:function(a){var b={},c={fill:"polygon-fill","fill-opacity":"polygon-opacity","marker-color":"marker-fill","marker-size":function(a){var c=8;"large"===a?c=16:"medium"===a&&(c=12),b["marker-height"]=c,b["marker-width"]=c},stroke:"line-color","stroke-opacity":"line-opacity","stroke-width":"line-width"};for(var d in a){var e=a[d];"function"==typeof c[d]?c[d](e):"string"==typeof c[d]&&(b[c[d]]=e)}return"#layer"+JSON.stringify(b).replace(/"/g,"").replace(/,/g,";")}});b.exports=function(a){return new f(a)}},{"../util/utfgrid":77,"../util/util":78,reqwest:31}],55:[function(a,b){"use strict";a("leaflet.markercluster");var c=L.MarkerClusterGroup.extend({options:{showCoverageOnHover:!1},initialize:function(a){var b=this;return L.Util.setOptions(this,a),a.cluster===!0&&(a.cluster={}),a.cluster.iconCreateFunction=new this.createCustomIconFunction(a.cluster.clusterIcon),L.Util.setOptions(this,a.cluster),a.clustered=a.cluster.iconCreateFunction("getInfo"),delete a.cluster,this.L=L.npmap.layer[a.type](a),this._currentShownBounds=null,this._featureGroup=new L.FeatureGroup,this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._queue=[],this.L.on("ready",function(a){b.addLayer(a.target)},this),this},onAdd:function(a){this._map=a,this._addAttribution(),L.MarkerClusterGroup.prototype.onAdd.call(this,a)},onRemove:function(){delete this._map,this._removeAttribution(),L.MarkerClusterGroup.prototype.onRemove.call(this)},_addAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.addAttribution(a)},_removeAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(a)},createCustomIconFunction:function(a){function b(){for(var a=document.createElement("style"),b=0;b<i.length;b++){var c=d(i[b]);for(var e in c)a.textContent+=".marker-cluster-custom-"+i[b].maxNodes.toString()+" "+("main"===e?"":e)+" {"+c[e]+"}\n"}a.type="text/css",a.textContent+=".leaflet-cluster-anim .leaflet-marker-icon, .leaflet-cluster-anim .leaflet-marker-shadow {",a.textContent+="-webkit-transition: -webkit-transform 0.2s ease-out, opacity 0.2s ease-in;",a.textContent+="-moz-transition: -moz-transform 0.2s ease-out, opacity 0.2s ease-in;",a.textContent+="-o-transition: -o-transform 0.2s ease-out, opacity 0.2s ease-in;",a.textContent+="transition: transform 0.2s ease-out, opacity 0.2s ease-in;",a.textContent+="}",document.getElementsByTagName("head")[0].appendChild(a)}function c(a){if("[object Array]"!==Object.prototype.toString.call(a)&&(a=f(a)),a){var b=(299*a[0]+587*a[1]+144*a[2])/1e3;return b>127?"#000":"#fff"}return!1}function d(a){function b(a){var b=[];for(var c in a)b.push(c+": "+a[c]+"; ");return b.join("")}function c(a,b){var c={};for(var d in a)c[d]=b(a[d]);return c}var d={main:{"background-clip":"padding-box","background-color":g("rgba("+f(a.color)[0]+", "+f(a.color)[1]+", "+f(a.color)[2]+", 0.4)"),"border-radius":.5*(a.size+a.outerRing)+"px"},div:{"text-align":"center","background-color":g("rgba("+f(a.color)[0]+", "+f(a.color)[1]+", "+f(a.color)[2]+", 0.9)"),width:a.size+"px",height:a.size+"px","margin-left":a.outerRing/2+"px","margin-top":a.outerRing/2+"px","border-radius":a.size/2+"px"},span:{font:'12px Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif',color:"rgb("+f(a.fontColor)[0]+", "+f(a.fontColor)[1]+", "+f(a.fontColor)[2]+")","line-height":a.size+"px"}};return c(d,b)}function e(a){if("getInfo"===a)return i;for(var b,c,d=a.getChildCount(),e=0;e<i.length;e++)if(d<=i[e].maxNodes){b="marker-cluster-custom-"+i[e].maxNodes.toString(),c=i[e].size+i[e].outerRing;break}return new L.DivIcon({html:"<div><span>"+d+"</span></div>",className:b,iconSize:new L.Point(c,c)})}function f(a){var b=!1;return"string"==typeof a&&(a=a.replace("#",""),3===a.length&&(a=a.replace(/(.)(.)(.)/g,"$1$1$2$2$3$3")),a.match(/[\da-fA-F]{6}$/)&&(b=[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)])),b}function g(a){var b,c=!1,d="rgba(0,0,0,0.1)",e=document.createElement("div");return e.style.color=d,"rgba"===e.style.color.substr(0,4)&&(c=!0),a?c?a:(b=a.replace(/^rgba\(/g,"rgb(,").replace(")","").split(","),b[1]=Math.floor(parseInt(b[1],10)+255*(1-parseFloat(b[4],10))),b[2]=Math.floor(parseInt(b[2],10)+255*(1-parseFloat(b[4],10))),b[3]=Math.floor(parseInt(b[3],10)+255*(1-parseFloat(b[4],10))),b[1]>255&&(b[1]=255),b[2]>255&&(b[2]=255),b[3]>255&&(b[3]=255),b=b.slice(0,4).join(",").replace("(,","(")+")"):c}function h(a){for(var b=0;b<i.length;b++)i[b].name&&a[i[b].name]&&(L.Util.extend(i[b],a[i[b].name]),!a[i[b].name].fontColor&&a[i[b].name].color&&(i[b].fontColor=c(f(a[i[b].name].color))))}var i=[{name:"small",maxNodes:9,color:"#7A904F",size:20,outerRing:22,fontColor:"#fff"},{name:"medium",maxNodes:99,color:"#D49900",size:35,outerRing:24,fontColor:"#fff"},{name:"large",maxNodes:1/0,color:"#814705",size:50,outerRing:24,fontColor:"#fff"}];return a&&("string"==typeof a?h({small:{color:a},medium:{color:a},large:{color:a}}):"[object Object]"===Object.prototype.toString.call(a)?h(a):"[object Array]"===Object.prototype.toString.call(a)&&(i=a)),b(),e}});b.exports=function(a){return new c(a)}},{"leaflet.markercluster":26}],56:[function(a,b){"use strict";var c=(a("reqwest"),a("csv2geojson")),d=a("../util/util"),e=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){var b=this;if(L.Util.setOptions(this,this._toLeaflet(a)),"string"==typeof a.data)return b._create(a,a.data),this;var c=a.url;d.strict(c,"string"),d.loadFile(c,"text",function(c){c&&b._create(a,c)})},_create:function(a,b){var d=this;c.csv2geojson(b,{},function(b,c){return L.GeoJSON.prototype.initialize.call(d,c,a),d.fire("ready"),d})}});b.exports=function(a){return a=a||{},a.cluster?L.npmap.layer._cluster(a):new e(a)}},{"../mixin/geojson":67,"../util/util":78,csv2geojson:6,reqwest:31}],57:[function(a,b){"use strict";var c=(a("reqwest"),a("../util/util")),d=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){if(L.Util.setOptions(this,this._toLeaflet(a)),"object"==typeof a.data)this._create(a,a.data);else{var b=this,d=a.url;c.strict(d,"string"),c.loadFile(d,"json",function(c){c&&b._create(a,c)})}},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,b,a),this.fire("ready"),this}});b.exports=function(a){return a=a||{},a.cluster?L.npmap.layer._cluster(a):new d(a)}},{"../mixin/geojson":67,"../util/util":78,reqwest:31}],58:[function(a,b){"use strict";var c=a("reqwest"),d=a("../util/util"),e=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){if(L.Util.setOptions(this,this._toLeaflet(a)),"object"==typeof a.data)this._create(a,a.data);else{var b=a.branch||"master",e=this;d.strict(a.path,"string"),d.strict(a.repo,"string"),d.strict(a.user,"string"),c({success:function(b){e._create(a,JSON.parse(d.base64.decode(b.data.content.replace(/\n|\r/g,""))))},type:"jsonp",url:"https://api.github.com/repos/"+a.user+"/"+a.repo+"/contents/"+a.path+"?ref="+b})}},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,b,a),this.fire("ready"),this}});b.exports=function(a){return a=a||{},a.cluster?L.npmap.layer._cluster(a):new e(a)}},{"../mixin/geojson":67,"../util/util":78,reqwest:31}],59:[function(a,b){"use strict";var c=(a("reqwest"),a("togeojson")),d=a("../util/util"),e=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){var b=this;if(L.Util.setOptions(this,this._toLeaflet(a)),"string"==typeof a.data)return b._create(a,a.data),this;var c=a.url;d.strict(c,"string"),d.loadFile(c,"xml",function(c){c&&b._create(a,c)})},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,c.kml((new DOMParser).parseFromString(b,"text/xml")),a),this.fire("ready"),this}});b.exports=function(a){return a=a||{},a.cluster?L.npmap.layer._cluster(a):new e(a)}},{"../mixin/geojson":67,"../util/util":78,reqwest:31,togeojson:32}],60:[function(a,b){"use strict";var c=a("reqwest"),d=a("../util/utfgrid"),e=a("../util/util"),f=L.TileLayer.extend({options:{errorTileUrl:L.Util.emptyImageUrl,format:"png",subdomains:["a","b","c","d"]},statics:{FORMATS:["jpg70","jpg80","jpg90","png","png32","png64","png128","png256"]},initialize:function(a){var b;if(!a.id&&!a.tileJson)throw new Error('MapBox layers require either an "id" or "tileJson" property.');a.format&&e.strictOneOf(a.format,f.FORMATS),L.Browser.retina&&a.retinaVersion?(b=a.retinaVersion,a.detectRetina=!0):(b=a.tileJson||a.id,L.Browser.retina&&a.detectRetina||(a.detectRetina=!1)),L.Util.setOptions(this,a),L.TileLayer.prototype.initialize.call(this,void 0,a),this._hasInteractivity=!1,this._loadTileJson(b)},getTileUrl:function(a){var b=this.options.tiles,c=L.Util.template(b[Math.floor(Math.abs(a.x+a.y)%b.length)],a);return c?c.replace(".png",(this._autoScale()?"@2x":"")+"."+this.options.format):c},onAdd:function(a){this._map=a,L.TileLayer.prototype.onAdd.call(this,a)},onRemove:function(){L.TileLayer.prototype.onRemove.call(this,this._map)},_autoScale:function(){return L.Browser.retina&&this.options.autoscale&&this.options.detectRetina},_getGridData:function(a,b){var c=this;this._grid.getTileGrid(this._getTileGridUrl(a),a,function(a,d){b(d?{layer:c,results:[d]}:null)})},_getTileGridUrl:function(a){var b=this.options.grids,c=this._grid.getTileCoords(a);return L.Util.template(b[Math.floor(Math.abs(c.x+c.y)%b.length)],c)},_handleClick:function(a,b){this._getGridData(a,b)},_handleMousemove:function(a,b){this._getGridData(a,b)},_loadTileJson:function(a){if("string"==typeof a){var b=this;-1===a.indexOf("/")&&(a=function(a){var b=function(){for(var a=["a.tiles.mapbox.com/v3/","b.tiles.mapbox.com/v3/","c.tiles.mapbox.com/v3/","d.tiles.mapbox.com/v3/"],b=0;b<a.length;b++)a[b]=[document.location.protocol,"//",a[b]].join("");return a}();return void 0===a||"number"!=typeof a?b[0]:b[a%b.length]}()+a+".json"),c({error:function(a){b.fire("error",{error:a})},success:function(a){a?(b._setTileJson(a),b.fire("ready")):b.fire("error",{error:"Error"})},type:"jsonp",url:function(a){return"https:"!==document.location.protocol?a:a.match(/(\?|&)secure/)?a:-1!==a.indexOf("?")?a+"&secure":a+"?secure"}(a)})}else"object"==typeof _&&this._setTileJson(a)},_setTileJson:function(a){var b,c=this;return e.strict(a,"object"),b={attribution:function(){return c.options.attribution?c.options.attribution:a.attribution?a.attribution:null}(),autoscale:a.autoscale||!1,bounds:a.bounds?this._toLeafletBounds(a.bounds):null,grids:a.grids?a.grids:null,maxZoom:a.maxzoom,minZoom:a.minzoom,tiles:a.tiles,tms:"tms"===a.scheme},"undefined"==typeof this.options.attribution&&(b.attribution=a.attribution),this.options.clickable!==!1&&(this._hasInteractivity="object"==typeof a.grids,this._hasInteractivity&&(this._grid=new d(this))),"undefined"==typeof this.options.maxZoom&&(b.maxZoom=a.maxzoom),"undefined"==typeof this.options.minZoom&&(b.minZoom=a.minzoom),L.extend(this.options,b),this.tileJson=a,this.redraw(),this},_toLeafletBounds:function(a){return new L.LatLngBounds([[a[1],a[0]],[a[3],a[2]]])},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}});b.exports=function(a){return new f(a)}},{"../util/utfgrid":77,"../util/util":78,reqwest:31}],61:[function(a,b){"use strict";var c=a("reqwest"),d=a("../util/util"),e=L.GeoJSON.extend({includes:[a("../mixin/geojson")],initialize:function(a){var b=this;return d.strict(a.id,"string"),L.Util.setOptions(this,this._toLeaflet(a)),c({success:function(a){if(a=a.response,a&&a.feedMessageResponse&&a.feedMessageResponse.messages&&a.feedMessageResponse.messages.message){for(var c={features:[],type:"FeatureCollection"},d=a.feedMessageResponse.messages.message,e=0;e<d.length;e++){var f=d[e];c.features.push({geometry:{coordinates:[f.longitude,f.latitude],type:"Point"},properties:f,type:"Feature"})}c.features.length&&b._create(b.options,c)}},type:"jsonp",url:"https://api.findmespot.com/spot-main-web/consumer/rest-api/2.0/public/feed/"+a.id+"/message?callback=?&dir=DESC&sort=timeInMili"}),this},_create:function(a,b){return L.GeoJSON.prototype.initialize.call(this,b,a),a.zoomToBounds&&this._map.fitBounds(this.getBounds()),this.fire("ready"),this}});b.exports=function(a){return new e(a)}},{"../mixin/geojson":67,"../util/util":78,reqwest:31}],62:[function(a,b){"use strict";var c=a("../util/util"),d=L.TileLayer.extend({options:{errorTileUrl:L.Util.emptyImageUrl},initialize:function(a){return c.strict(a.url,"string"),L.Util.setOptions(this,a),L.TileLayer.prototype.initialize.call(this,a.url,a),this}});b.exports=function(a){return new d(a)}},{"../util/util":78}],63:[function(a,b){"use strict";var c=a("../util/util"),d=L.TileLayer.WMS.extend({initialize:function(a){return c.strict(a.layers,"string"),c.strict(a.url,"string"),L.Util.setOptions(this,a),L.TileLayer.WMS.prototype.initialize.call(this,a.url,a),this}});b.exports=function(a){return new d(a)}},{"../util/util":78}],64:[function(a,b){"use strict";var c=a("../util/util"),d=L.TileLayer.extend({options:{continuousWorld:!0,tolerance:.8},initialize:function(a){var b,d;for(a=L.setOptions(this,a),c.strict(a.height,"number"),c.strict(a.url,"string"),c.strict(a.width,"number"),this._url=a.url,b=new L.Point(a.width,a.height),d=a.tileSize,this._imageSize=[b],this._gridSize=[this._getGridSize(b)];parseInt(b.x,10)>d||parseInt(b.y,10)>d;)b=b.divideBy(2).floor(),this._imageSize.push(b),this._gridSize.push(this._getGridSize(b));this._imageSize.reverse(),this._gridSize.reverse(),this.options.maxZoom=this._gridSize.length-1},getTileUrl:function(a){return this._url+"TileGroup"+this._getTileGroup(a)+"/"+this._map.getZoom()+"-"+a.x+"-"+a.y+".jpg"},onAdd:function(a){var b=this._getBestFitZoom(a.getSize()),c=this._imageSize[b],d=a.options.crs.pointToLatLng(L.point(c.x/2,c.y/2),b);L.TileLayer.prototype.onAdd.call(this,a),a.options.center=d,a.options.zoom=b-1,a.setView(d,b-1,!0)},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile(),e=this._map.getZoom(),f=this._imageSize[e],g=this._gridSize[e],h=this.options.tileSize;a.x===g.x-1&&(d.style.width=f.x-h*(g.x-1)+"px"),a.y===g.y-1&&(d.style.height=f.y-h*(g.y-1)+"px"),L.DomUtil.setPosition(d,c,L.Browser.chrome||L.Browser.android23),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getBestFitZoom:function(a){for(var b,c=this.options.tolerance,d=this._imageSize.length-1;d;){if(b=this._imageSize[d],b.x*c<a.x&&b.y*c<a.y)return d;d--}return d},_getGridSize:function(a){var b=this.options.tileSize;return L.point(Math.ceil(a.x/b),Math.ceil(a.y/b))},_getTileGroup:function(a){for(var b,c=this._map.getZoom(),d=0,e=0;c>e;e++)b=this._gridSize[e],d+=b.x*b.y;return d+=a.y*this._gridSize[c].x+a.x,Math.floor(d/256)},_tileShouldBeLoaded:function(a){var b=this._gridSize[this._map.getZoom()];return a.x>=0&&a.x<b.x&&a.y>=0&&a.y<b.y}});b.exports=function(a){return new d(a)}},{"../util/util":78}],65:[function(a,b){"use strict";var c=a("./preset/baselayers.json"),d=a("./preset/colors.json"),e=a("humane-js"),f=a("nanobar"),g=a("./preset/overlays.json"),h=a("./util/util");a("./popup.js"),function(){var a=d.gold;L.Circle.mergeOptions(a),L.CircleMarker.mergeOptions(a),L.Control.Attribution.mergeOptions({prefix:'<a href="http://www.nps.gov/npmap/disclaimer.html" target="_blank">Disclaimer</a>'}),L.Map.addInitHook(function(){function a(){var a=b.getContainer(),c=h.getOuterDimensions(h.getChildElementsByClassName(a,"leaflet-control-container")[0].childNodes[2]).width;c&&(c+=20),h.getChildElementsByClassName(a,"leaflet-control-attribution")[0].style["max-width"]=h.getOuterDimensions(a).width-c+"px"}var b=this;this.options.attributionControl&&(this.attributionControl._update=function(){var a=[],b=[];for(var c in this._attributions)if(this._attributions[c]>0){var d=-1;if(c){for(var e=0;e<a.length;e++)if(a[e]===c){d=e;break}-1===d&&a.push(c)}}this.options.prefix&&b.push(this.options.prefix),a.length&&b.push(a.join(" | ")),this._container.innerHTML=b.join(" | ")},this.on("resize",a),a())}),L.Polygon.mergeOptions(a),L.Polyline.mergeOptions({color:a.color,opacity:a.opacity,weight:a.weight})}();var i=L.Map.extend({initialize:function(a){var b=!1,c=L.DomUtil.create("div","npmap-container"),d=L.DomUtil.create("div","npmap-map"),g=L.DomUtil.create("div","npmap-map-wrapper"),h=this,i=L.DomUtil.create("div","npmap-modules"),j=L.DomUtil.create("div","npmap"+(L.Browser.ie6||L.Browser.ie7?" npmap-oldie":"")+(L.Browser.retina?" npmap-retina":"")),k=L.DomUtil.create("div","npmap-toolbar"),l=L.DomUtil.create("ul","left"),m=L.DomUtil.create("ul","right"),n=!1;if(a=h._toLeaflet(a),a.div.insertBefore(j,a.div.hasChildNodes()?a.div.childNodes[0]:null),j.appendChild(i),j.appendChild(c),k.appendChild(l),k.appendChild(m),c.appendChild(k),c.appendChild(g),g.appendChild(d),a.div=d,a.zoomControl=!1,L.Map.prototype.initialize.call(h,a.div,a),h._controllingCursor=!0,h._controllingInteractivity=!0,h._defaultCursor=h.getContainer().style.cursor,h.on("autopanstart",function(){h._setCursor("")}),this._notify=e.create({baseCls:"humane-bootstrap",container:d}),this._notify.danger=this._notify.spawn({addnCls:"humane-bootstrap-danger"}),this._notify.info=this._notify.spawn({addnCls:"humane-bootstrap-info"}),this._notify.success=this._notify.spawn({addnCls:"humane-bootstrap-success"}),this._notify.warning=this._notify.spawn({addnCls:"humane-bootstrap-warning"}),this._progress=new f({bg:"#d29700",id:"npmap-progress",target:d}),h._loaded||h.setView(a.center,a.zoom),a.baseLayers.length){var o,p,q=[];for(p=0;p<a.baseLayers.length;p++)o=a.baseLayers[p],"zoomify"===o.type&&q.push(o);if(q.length){for(n=!0,p=0;p<q.length;p++)if(o=q[p],o.visible||"undefined"==typeof o.visible){o.visible=!0,o.L=L.npmap.layer.zoomify(o).addTo(h);break}}else for(p=0;p<a.baseLayers.length;p++)o=a.baseLayers[p],o.zIndex=0,b||!o.visible&&"undefined"!=typeof o.visible?o.visible=!1:(o.visible=!0,b=!0,o.L="arcgisserver"===o.type?L.npmap.layer[o.type][o.tiled===!0?"tiled":"dynamic"](o):L.npmap.layer[o.type](o),h.addLayer(o.L))}if(!n&&a.overlays.length)for(var r=1,s=0;s<a.overlays.length;s++){var t=a.overlays[s];if("zoomify"===t.type)throw new Error('Zoomify layers can only be added in the "baseLayers" config property.');t.visible||"undefined"==typeof t.visible?(t.visible=!0,t.zIndex=r,t.L="arcgisserver"===t.type?L.npmap.layer[t.type][t.tiled===!0?"tiled":"dynamic"](t):L.npmap.layer[t.type](t),h.addLayer(t.L),r++):t.visible=!1
}return h._initializeModules(),h._setupPopup(),h._setupTooltip(),this},_initializeModules:function(){if(this.options&&this.options.modules&&L.Util.isArray(this.options.modules)&&this.options.modules.length){var a,b,c=null,d=this,e=this.options.modules;for(this._divWrapper=this._container.parentNode.parentNode,this._divModules=h.getChildElementsByClassName(this._divWrapper.parentNode.parentNode,"npmap-modules")[0],this._divModuleButtons=L.DomUtil.create("div","npmap-modules-buttons",this._container.parentNode),this._buttonCloseModules=L.DomUtil.create("button","npmap-modules-buttons-button",this._divModuleButtons),this._buttonCloseModules.style["background-image"]="url("+NPMap.path+"/images/font-awesome/times"+(L.Browser.retina?"@2x":"")+".png)",this._buttonCloseModules.title="Close",L.DomEvent.addListener(this._buttonCloseModules,"click",d.closeModules,this),b=0;b<e.length;b++){var f=e[b],g=f.title,i=L.DomUtil.create("div","module",this._divModules);a=L.DomUtil.create("button","npmap-modules-buttons-button",this._divModuleButtons),a.id="npmap-modules-buttons|"+g.replace(/ /g,"_"),a.title=g,a.style["background-image"]="url("+NPMap.path+"/images/font-awesome/"+f.icon+(L.Browser.retina?"@2x":"")+".png)",i.id="npmap-module|"+g.replace(/ /g,"_"),"custom"===f.type&&(i.innerHTML='<h2 class="title">'+g+'</h2><div class="content">'+f.content+"</div>"),L.DomEvent.addListener(a,"click",function(){d.showModule(this.id.replace("npmap-modules-buttons|",""))}),c||f.visible!==!0||(c=f.title)}if(c)this.showModule(c);else for(b=1;b<this._divModuleButtons.childNodes.length;b++)a=this._divModuleButtons.childNodes[b],a.style.display="inline-block"}},_setCursor:function(a){this._container.style.cursor=a},_setupPopup:function(){function a(){k.off("click",c).off("dragstart",d).off("movestart",d).off("zoomstart",d),g&&k._progress.go(100)}function b(b){var i=[];e=!1,f=!1,k.on("click",c).on("dragstart",d).on("movestart",d).on("zoomstart",d);for(var j in k._layers)m=k._layers[j],"object"!=typeof m.options||"undefined"!=typeof m.options.popup&&m.options.popup===!1||"function"!=typeof m._handleClick||m._hasInteractivity===!1||i.push(m);if(i.length){var l,n,o=0,p=0,q=b.latlng.wrap(),r=[];for(g=!1,l=0;l<i.length;l++)m=i[l],m.options&&"arcgisserver"===m.options.type&&(g=!0),m._handleClick(q,function(a){a&&r.push(a),o++});g&&k._progress.go(1),n=setInterval(function(){if(p++,g&&k._progress.go(p),e||f)clearInterval(n),a();else if((i.length===o||p>98)&&(clearInterval(n),a(),r.length)){var b=L.npmap.popup({autoPanPaddingTopLeft:h._getAutoPanPaddingTopLeft(k.getContainer()),maxHeight:h._getAvailableVerticalSpace(k)-74});b.setContent(b._handleResults(r)).setLatLng(q).openOn(k)}},100)}}function c(){e=!0}function d(){f=!0}var e,f,g,i=0,j=!1,k=this;for(var l in k._layers){var m=k._layers[l];if("object"==typeof m.options&&"arcgisserver"===m.options.type){j=!0;break}}j&&k.on("dblclick",function(){i++}),k.on("click",function(a){i=0,k._controllingInteractivity&&(j?setTimeout(function(){i||b(a)},200):b(a))})},_setupTooltip:function(){var a=[],b=this,c=L.npmap.tooltip({map:b,padding:"7px 10px"});b._tooltips=[],L.DomEvent.on(h.getChildElementsByClassName(b.getContainer(),"leaflet-popup-pane")[0],"mousemove",function(a){L.DomEvent.stopPropagation(a),c.hide()}),b.on("mousemove",function(d){if(this._controllingCursor){var e=!1,f=d.latlng.wrap(),g=[];c.hide(),"wait"!==b.getContainer().style.cursor&&b._setCursor("");for(var i=0;i<b._tooltips.length;i++)-1===a.indexOf(b._tooltips[i])&&g.push(b._tooltips[i]);a=[],b._tooltips=g;for(var j in b._layers){var k=b._layers[j];"function"==typeof k._handleMousemove&&k._hasInteractivity!==!1&&k._handleMousemove(f,function(c){if(c){var d=c.layer;if(e=!0,d.options&&d.options.tooltip)for(var f=0;f<c.results.length;f++){var g,i=c.results[f];"function"==typeof d.options.tooltip?g=h.handlebars(d.options.tooltip(i)):"string"==typeof d.options.tooltip&&(g=h.unescapeHtml(h.handlebars(d.options.tooltip,i))),g&&(b._tooltips.push(g),a.push(g))}}})}e&&b._setCursor("pointer"),b._tooltips.length&&c.show(d.containerPoint,b._tooltips.join("<br>"))}}),b.on("mouseout",function(){c.hide()})},_toLeaflet:function(a){if(!a.div)throw new Error("The map config object must have a div property");if("string"!=typeof a.div&&"object"!=typeof a.div)throw new Error("The map config object must be either a string or object");if(a.baseLayers=a.baseLayers===!1||L.Util.isArray(a.baseLayers)&&!a.baseLayers.length?[]:function(){var b=!1;if(a.baseLayers&&L.Util.isArray(a.baseLayers)&&a.baseLayers.length)for(var d=0;d<a.baseLayers.length;d++){var e=a.baseLayers[d];if("string"==typeof e){var f=e.split("-");e=f[1]?c[f[0]][f[1]]:c[f]}e.visible===!0||"undefined"==typeof e.visible?b?e.visible=!1:(e.visible=!0,b=!0):e.visible=!1,e.zIndex=0,a.baseLayers[d]=e}if(b)return a.baseLayers;var g=c.nps.lightStreets;return g.visible=!0,g.zIndex=0,[g]}(),a.center=function(){var b=a.center;return b?new L.LatLng(b.lat,b.lng):new L.LatLng(39,-96)}(),"string"==typeof a.div&&(a.div=document.getElementById(a.div)),a.layers&&L.Util.isArray(a.layers)&&a.layers.length){a.overlays=a.layers;for(var b=0;b<a.overlays.length;b++){var d=a.overlays[b];"string"==typeof d&&(d=a.overlays[b]=g[d])}}else a.overlays&&L.Util.isArray(a.overlays)||(a.overlays=[]);return delete a.layers,a.zoom="number"==typeof a.zoom?a.zoom:4,a},closeModules:function(){var a=this._divModuleButtons.childNodes;this._buttonCloseModules.style.display="none",this._divWrapper.style.left="0",this._divModules.style.display="none";for(var b=1;b<a.length;b++){var c=a[b];L.DomUtil.removeClass(c,"active"),c.style.display="inline-block"}this.invalidateSize()},showModule:function(a){var b,c=this._divModules,d=c.childNodes,e=this.options.modules;for(a=a.replace(/_/g," "),b=0;b<e.length;b++){var f=e[b],g="none";f.title===a&&(g="block"),f.visible="block"===g,d[b].style.display=g}for(c.style.display="block",this._divWrapper.style.left="300px",this.invalidateSize(),b=0;b<this._divModuleButtons.childNodes.length;b++){var h=this._divModuleButtons.childNodes[b];h.style.display=0===b?"inline-block":e.length>1?"inline-block":"none",h.id.replace("npmap-modules-buttons|","").replace(/_/g," ")===a?L.DomUtil.addClass(h,"active"):L.DomUtil.removeClass(h,"active")}},showModules:function(){var a=this._divModuleButtons.childNodes;this._buttonCloseModules.style.display="inline-block",this._divWrapper.style.left="300px",this._divModules.style.display="block";for(var b=1;b<a.length;b++)a[b].style.display="inline-block";this.invalidateSize()}});b.exports=function(a){return new i(a)}},{"./popup.js":68,"./preset/baselayers.json":69,"./preset/colors.json":70,"./preset/overlays.json":71,"./util/util":78,"humane-js":24,nanobar:29}],66:[function(a,b){"use strict";var c=a("reqwest");b.exports={_boundsToExtent:function(a){var b=a.getNorthEast(),c=a.getSouthWest();return{spatalReference:{wkid:4326},xmax:b.lng,xmin:c.lng,ymax:b.lat,ymin:c.lat}},_cleanUrl:function(a){return a=L.Util.trim(a),"/"!==a[a.length-1]&&(a+="/"),a},_getMetadata:function(){var a=this;c({success:function(b){if(!b.error){var c=b.capabilities;"string"==typeof c&&-1===c.toLowerCase().indexOf("query")&&(a._hasInteractivity=!1),a._metadata=b}},type:"jsonp",url:a._serviceUrl+"?f=json"})},_handleClick:function(a,b){var c=this;c.identify(a,function(a){if(a){var d=a.results;if(d&&d.length){for(var e={layer:c,subLayers:[]},f=0;f<d.length;f++){for(var g,h=d[f],i=0;i<e.subLayers.length;i++)if(e.subLayers[i].name===h.layerName){g=e.subLayers[i];break}if(g)g.results.push(h.attributes);else{var j="{{"+h.displayFieldName+"}}";e.subLayers.push({name:h.layerName,popup:{description:{format:"table"},more:j,title:j},results:[h.attributes]})}}b(e)}else b(null)}else b(null)})},_updateAttribution:function(){var a=this._map,b=a.getBounds(),c=[],d=a.getZoom();this.options.attribution&&this._map.attributionControl.removeAttribution(this.options.attribution);for(var e=0;e<this._dynamicAttributionData.length;e++)for(var f=this._dynamicAttributionData[e],g=0;g<f.coverageAreas.length;g++){var h=f.coverageAreas[g],i=h.bbox;if(d>=h.zoomMin&&d<=h.zoomMax&&b.intersects(L.latLngBounds(L.latLng(i[0],i[3]),L.latLng(i[2],i[1])))){c.push(f.attribution);break}}c.length&&(this.options.attribution=c.join(", "),a.attributionControl.addAttribution(this.options.attribution))},identify:function(a,b){var d=this._map,e=d.getSize(),f={f:"json",geometry:JSON.stringify({spatialReference:{wkid:4326},x:a.lng,y:a.lat}),geometryType:"esriGeometryPoint",imageDisplay:e.x+","+e.y+",96",layers:"visible:"+this.getLayers().split(":")[1],mapExtent:JSON.stringify(this._boundsToExtent(d.getBounds())),returnGeometry:!1,sr:"4326",tolerance:5};c({data:f,error:function(){b(null)},success:function(a){b(a)},type:"jsonp",url:this._serviceUrl+"identify"})}}},{reqwest:31}],67:[function(a,b){"use strict";var c=a("../util/topojson"),d=a("../util/util");b.exports={addData:function(a){if(/\btopology\b/i.test(a.type))for(var b in a.objects)L.GeoJSON.prototype.addData.call(this,c.feature(a,a.objects[b]));else L.GeoJSON.prototype.addData.call(this,a)},onAdd:function(a){this._map=a,this._addAttribution(),L.GeoJSON.prototype.onAdd.call(this,a)},onRemove:function(){delete this._map,this._removeAttribution(),L.GeoJSON.prototype.onRemove.call(this)},_addAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.addAttribution(a)},_removeAttribution:function(){var a=this.options.attribution;a&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(a)},_toLeaflet:function(a){var b,c={fill:"fillColor","fill-opacity":"fillOpacity",stroke:"color","stroke-opacity":"opacity","stroke-width":"weight"};if("undefined"==typeof a.clickable||a.clickable===!0){var e,f;a.onEachFeature=function(b,c){c.on("click",function(c){var e,g=c.target,h=g._map,i=h.getContainer(),j=d._getAutoPanPaddingTopLeft(i),k=L.npmap.popup({autoPanPaddingTopLeft:j,maxHeight:d._getAvailableVerticalSpace(h)-74}),l=b.properties;e=k._resultToHtml(l,a.popup),f&&(f.closePopup().unbindPopup(),f=g),e&&("string"==typeof e&&(e=d.unescapeHtml(e)),"Point"===b.geometry.type?(k.setContent(e),g.bindPopup(k).openPopup(),f=g):k.setContent(e).setLatLng(c.latlng.wrap()).openOn(g._map))}),c.on("mouseout",function(a){if(e){var b=a.target._map._tooltips;b.splice(b.indexOf(e),1)}}),c.on("mouseover",function(c){var f=a.tooltip;if(f){var g,h=b.properties;"function"==typeof f?g=f(h):"string"==typeof f&&(g=d.handlebars(f,h)),g&&(c.target._map._tooltips.push(g),e=g)}})}}return a.pointToLayer=function(b,c){var d,e,f,g={"marker-color":"#000000","marker-size":"medium","marker-library":"maki","marker-symbol":null},h=b.properties;if(d="function"==typeof a.styles?a.styles(h):a.styles,d&&d.point)if(d="function"==typeof d.point?d.point(h):d.point)if("string"==typeof d.iconUrl)g=new L.Icon(d);else{for(e in g)f=d[e],f&&(g[e]=f);if(!d.ignoreFeatureStyles)for(e in g)f=h[e],f&&(g[e]=f);g=L.npmap.icon[g["marker-library"]](g)}else{if(!d.ignoreFeatureStyles)for(e in g)f=h[e],f&&(g[e]=f);g=L.npmap.icon[g["marker-library"]](g)}else{for(e in g)f=h[e],f&&(g[e]=f);g=L.npmap.icon[g["marker-library"]](g)}return new L.Marker(c,L.extend(a,{icon:g}))},a.style=function(d){var e=function(){var a=d.geometry.type.toLowerCase();return-1!==a.indexOf("line")?"line":-1!==a.indexOf("point")?"point":-1!==a.indexOf("polygon")?"polygon":void 0}();if("point"!==e){var f,g=0,h=d.properties,i={};for(f in c)"undefined"!=typeof h[f]&&null!==h[f]&&""!==h[f]&&(i[c[f]]=h[f]);if(b="function"==typeof a.styles?a.styles(h):a.styles,b&&(b="function"==typeof b[e]?b[e](h):b[e]))for(f in c)"undefined"!=typeof b[f]&&null!==b[f]&&""!==b[f]&&(i[c[f]]=b[f]);for(f in i){g++;break}if(g)return i}},a}}},{"../util/topojson":76,"../util/util":78}],68:[function(a,b){"use strict";var c=a("./util/util"),d=L.Popup.extend({options:{autoPanPaddingBottomRight:[20,20],autoPanPaddingTopLeft:[20,20],offset:[1,-3]},_data:[],_html:null,_results:[],onAdd:function(a){var b=this._content;window.addEventListener&&b.addEventListener("DOMMouseScroll",this._handleMouseWheel,!1),b.onmousewheel=this._handleMouseWheel,L.Popup.prototype.onAdd.apply(this,[a])},_back:function(){this.setContent(this._html).update(),this._html=null},_createAction:function(a,b,d){var e=document.createElement("a"),f=document.createElement("li");if(f.appendChild(e),e.innerHTML=c.handlebars(a.text,b),a.menu){for(var g=L.DomUtil.create("ul","menu",d),h=0;h<a.menu.length;h++){var i=a.menu[h],j=document.createElement("a"),k=document.createElement("li");j.innerHTML=c.handlebars(i.text,b),L.DomEvent.addListener(j,"click",function(){var a=null;try{a=this.parentNode.parentNode.parentNode.parentNode.npmap_data}catch(b){}g.style.display="none",i.handler(a)}),k.appendChild(j),g.appendChild(k)}L.DomEvent.addListener(e,"click",function(a){this._toggleMenu(g,a)},this)}else a.handler&&L.DomEvent.addListener(e,"click",function(){var b=null;try{b=this.parentNode.parentNode.parentNode.parentNode.npmap_data}catch(c){}a.handler(b)});return f},_handleMouseWheel:function(a){var b=a.wheelDelta,d=this.parentNode;L.DomUtil.hasClass(d,"leaflet-popup-scrolled")&&(0===d.scrollTop&&b>0?c.cancelEvent():d.scrollTop===d.scrollHeight-c.getOuterDimensions(d).height&&0>b&&c.cancelEvent())},_handleResults:function(a){function b(a){return a.options&&a.options.popup?a.options.popup:null}var c;if(a.length>1)c=this._resultsToHtml(a);else{var d,e=[],f=a[0];if(f.results&&f.results.length)for(d=0;d<f.results.length;d++)e.push({layerConfig:b(f.layer),result:f.results[d],resultConfig:null});else if(f.subLayers&&f.subLayers.length)for(d=0;d<f.subLayers.length;d++){var g=f.subLayers[d];if(g.results&&g.results.length)for(var h=0;h<g.results.length;h++)e.push({layerConfig:b(f.layer),result:g.results[h],resultConfig:g.popup||null})}if(1===e.length){var i=e[0];c=this._resultToHtml(i.result,i.layerConfig,i.resultConfig)}else c=this._resultsToHtml(a)}return c},_more:function(a){this._html=this.getContent(),this.setContent(this._results[a]).update()},_resultsToHtml:function(a){function b(){f._more(this.id)}for(var d=document.createElement("div"),e=0,f=this,g=0;g<a.length;g++){var h,i,j,k,l,m,n,o,p,q=L.DomUtil.create("div","layer",d),r=L.DomUtil.create("div","title",q),s=a[g],t=null,u=null;if(s.layer.options&&(s.layer.options.popup&&(t=s.layer.options.popup),r.innerHTML=s.layer.options.name?s.layer.options.name:"Unnamed"),s.results&&s.results.length)for(j=L.DomUtil.create("div","content",q),p=document.createElement("ul"),k=0;k<s.results.length;k++){var v=s.results[k];if(h=document.createElement("a"),m=document.createElement("li"),o=this._resultToHtml(v,t,u,!0),t&&"string"==typeof t.more)n=c.unescapeHtml(c.handlebars(t.more,v));else if(u&&"string"==typeof u.more)n=c.unescapeHtml(c.handlebars(u.more,v));else for(l=0;l<o.childNodes.length;l++)if(i=o.childNodes[l],L.DomUtil.hasClass(i,"title")){n=c.stripHtml(i.innerHTML);break}n||(n="Untitled"),L.DomEvent.addListener(h,"click",function(){f._more(this.id)}),this._results[e]=o,h.id=e,h.innerHTML=n,m.appendChild(h),p.appendChild(m),j.appendChild(p),e++}else if(s.subLayers&&s.subLayers.length)for(j=L.DomUtil.create("div","content",q),k=0;k<s.subLayers.length;k++){var w=L.DomUtil.create("div","sublayer",j),x=L.DomUtil.create("div","title",w),y=L.DomUtil.create("div","content",w),z=s.subLayers[k];for(x.innerHTML=z.name,p=document.createElement("ul"),y.appendChild(p),l=0;l<z.results.length;l++){var A=z.results[l];if(z.popup&&(u=z.popup),h=document.createElement("a"),m=document.createElement("li"),o=this._resultToHtml(A,t,u,!0),t&&"string"==typeof t.more)n=c.unescapeHtml(c.handlebars(t.more,A));else if(u&&"string"==typeof u.more)n=c.unescapeHtml(c.handlebars(u.more,A));else for(l=0;l<o.childNodes.length;l++)if(i=o.childNodes[l],L.DomUtil.hasClass(i,"title")){n=c.stripHtml(i.innerHTML);break}n||(n="Untitled"),L.DomEvent.addListener(h,"click",b),this._results[e]=o,h.id=e,h.innerHTML=n,m.appendChild(h),p.appendChild(m),e++}}}return d},_resultToHtml:function(a,b,d,e){var f,g,h,i,j,k,l,m=b,n=L.DomUtil.create("div","layer");if(n.npmap_data=a,m||(m=d?d:{description:{format:"table"}}),"string"==typeof m)n.innerHTML=c.unescapeHtml(c.handlebars(m,a));else if("function"==typeof m)n.innerHTML=c.unescapeHtml(c.handlebars(m(a),a));else{if(m.title&&(j=null,j="function"==typeof m.title?m.title(a):m.title,j&&"string"==typeof j&&(k=L.DomUtil.create("div","title",n),k.innerHTML=c.unescapeHtml(c.handlebars(j,a)))),m.description&&(h=L.DomUtil.create("div","content",n),j=null,j="function"==typeof m.description?m.description(a):m.description,j&&"object"==typeof j&&(j="list"===j.format?c.dataToList(a,j.fields):c.dataToTable(a,j.fields)),j&&(g=L.DomUtil.create("div","description",h),"string"==typeof j?g.innerHTML=c.unescapeHtml(c.handlebars(j,a)):"nodeType"in j&&g.appendChild(j))),m.media){var o,p;h||(h=L.DomUtil.create("div","content",n)),i=[];for(var q=0;q<m.media.length;q++)a[m.media[q].id]&&i.push(m.media[q]);i.length&&(o=c.mediaToList(a,i),o&&(p=L.DomUtil.create("div","media clearfix",h),p.appendChild(o)))}if(m.actions&&(j=null,j="function"==typeof m.actions?m.actions(a):m.actions))if(f=L.DomUtil.create("div","actions",n),L.Util.isArray(j)){l=document.createElement("ul"),f.appendChild(l);for(var r=0;r<j.length;r++)l.appendChild(this._createAction(j[r],a,f))}else"string"==typeof j?f.innerHTML=c.unescapeHtml(c.handlebars(j,a)):"nodeType"in j&&f.appendChild(j)}if(e){var s=document.createElement("a"),t=document.createElement("li");L.DomEvent.addListener(s,"click",this._back,this),s.innerHTML="&#171; Back",t.appendChild(s),f?f.childNodes[0].insertBefore(t,f.childNodes[0].childNodes[0]):(l=document.createElement("ul"),l.appendChild(t),L.DomUtil.create("div","actions",n).appendChild(l))}return n},_toggleMenu:function(a,b){if(a.style.display&&"none"!==a.style.display)a.style.display="none";else{var c=b.toElement;a.style.display="block",a.style.left=c.offsetLeft+"px",a.style.top=c.offsetTop+18+"px"}}});b.exports=function(a){return new d(a)}},{"./util/util":78}],69:[function(a,b){b.exports={bing:{aerial:{icon:"aerial",layer:"aerial",maxZoom:19,minZoom:0,name:"Bing Aerial",type:"bing"},aerialLabels:{icon:"aerial",layer:"aerialwithlabels",maxZoom:19,minZoom:0,name:"Bing Aerial w/Labels",type:"bing"},roads:{icon:"street",layer:"road",maxZoom:19,minZoom:0,name:"Bing Roads",type:"bing"}},esri:{gray:{attribution:"Copyright: &copy;2013 Esri, DeLorme, NAVTEQ",maxZoom:16,minZoom:1,name:"Esri Light Gray",tiled:!0,type:"arcgisserver",url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},grayLabels:{attribution:"Copyright: &copy;2013 Esri, DeLorme, NAVTEQ",maxZoom:16,minZoom:1,name:"Esri Light Gray Labels",tiled:!0,type:"arcgisserver",url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer"},imagery:{attribution:"Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",icon:"aerial",maxZoom:19,minZoom:1,name:"Esri Imagery",popup:!1,tiled:!0,type:"arcgisserver",url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},imageryLabels:{attribution:"Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",maxZoom:19,minZoom:1,popup:!1,name:"Esri Boundaries & Places",tiled:!0,type:"arcgisserver",url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"},nationalGeographic:{attribution:"Esri",maxZoom:16,minZoom:1,name:"Esri National Geographic",popup:!1,tiled:!0,type:"arcgisserver",url:"http://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"},oceans:{attribution:"Esri",dynamicAttribution:"http://static.arcgis.com/attribution/World_Street_Map?f=json",maxZoom:16,minZoom:1,name:"Esri Oceans",tiled:!0,type:"arcgisserver",url:"http://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"},streets:{attribution:"Esri",dynamicAttribution:"http://static.arcgis.com/attribution/World_Street_Map?f=json",icon:"street",maxZoom:19,minZoom:1,name:"Esri Streets",tiled:!0,type:"arcgisserver",url:"http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"},topographic:{attribution:"Esri",dynamicAttribution:"http://static.arcgis.com/attribution/World_Street_Map?f=json",icon:"topo",maxZoom:17,minZoom:1,name:"Esri Topo",popup:!1,tiled:!0,type:"arcgisserver",url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}},mapbox:{light:{attribution:"<a href='http://mapbox.com/about/maps' target='_blank'>MapBox</a>, &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"street",id:"nps.map-sligp1fr",name:"MapBox Light",type:"mapbox"},satellite:{attribution:"<a href='http://mapbox.com/about/maps' target='_blank'>MapBox</a>",detectRetina:!0,icon:"aerial",id:"nps.map-n9nxe12m",name:"MapBox Satellite",type:"mapbox"},satelliteLabels:{attribution:"<a href='http://mapbox.com/about/maps' target='_blank'>MapBox</a>, &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"aerial",id:"nps.map-r3ilza09",name:"MapBox Satellite w/Labels",type:"mapbox"},streets:{attribution:"<a href='http://mapbox.com/about/maps' target='_blank'>MapBox</a>, &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"street",id:"nps.map-06dnxzq5",name:"MapBox Streets",type:"mapbox"},terrain:{attribution:"<a href='http://mapbox.com/about/maps' target='_blank'>MapBox</a>, &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"topo",id:"nps.map-lj6szvbq",name:"MapBox Terrain",type:"mapbox"}},nps:{darkStreets:{attribution:"&copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"nps",id:"nps.gajjemg7",name:"NPS Dark",type:"mapbox"},lightStreets:{attribution:"&copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"nps",id:"nps.g9ndno9j",name:"NPS Light",type:"mapbox"},neutralTerrain:{attribution:"&copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"nps",id:"nps.g9nccg3d",name:"NPS Neutral Terrain",type:"mapbox"},satelliteNight:{attribution:"&copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",detectRetina:!0,icon:"nps",id:"nps.g9o0im10",name:"NPS Satellite at Night",type:"mapbox"}},openstreetmap:{attribution:"&copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors",icon:"street",name:"OpenStreetMap",type:"tiled",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},stamen:{toner:{attribution:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors.",icon:"street",maxZoom:20,minZoom:0,name:"Stamen Toner",subdomains:"abcd",type:"tiled",url:"http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png"},watercolor:{attribution:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data &copy; <a href='http://openstreetmap.org/copyright'>OpenStreetMap</a> contributors.",maxZoom:16,minZoom:3,name:"Stamen Watercolor",subdomains:"abcd",type:"tiled",url:"http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg"}}}},{}],70:[function(a,b){b.exports={chesnut:{color:"#bf815d",fill:!0,fillColor:"#bf815d",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},chill:{color:"#1b99aa",colorBlindGroups:["a","b"],fill:!0,fillColor:"#1b99aa",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},currant:{color:"#5f3663",colorBlindGroups:["a","b","c"],fill:!0,fillColor:"#5f3663",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},eucalyptus:{color:"#558877",colorBlindGroups:["a","b"],fill:!0,fillColor:"#558877",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},gold:{color:"#d39800",colorBlindGroups:["a","b","c"],fill:!0,fillColor:"#d39800",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},lilac:{color:"#896c9c",fill:!0,fillColor:"#896c9c",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},mustard:{color:"#d98d38",colorBlindGroups:["a","b","c"],fill:!0,fillColor:"#d98d38",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},parks:{color:"#7a9052",colorBlindGroups:["a"],fill:!0,fillColor:"#7a9052",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},rose:{color:"#d46655",colorBlindGroups:["a","c"],fill:!0,fillColor:"#d46655",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},russett:{color:"#7a4810",colorBlindGroups:["a","b"],fill:!0,fillColor:"#7a4810",fillOpacity:.2,opacity:.5,stroke:!0,weight:3},black:{color:"#000000"}}},{}],71:[function(a,b){b.exports={}},{}],72:[function(a,b){"use strict";var c=a("./util/util"),d=L.Class.extend({options:{fadeAnimation:!1,hideDelay:0,maxWidth:"",minWidth:"",mouseOffset:L.point(15,0),padding:"2px 4px",showDelay:0,trackMouse:!0,width:"auto"},initialize:function(a){L.setOptions(this,a),this._createTip()},_bindTarget:function(a){L.DomEvent.on(a,"mouseover",this._onTargetMouseover,this).on(a,"mouseout",this._onTargetMouseout,this).on(a,"mousemove",this._onTargetMousemove,this)},_createTip:function(){if(this._map=this.options.map,!this._map)throw new Error("No map configured for tooltip");this._container=L.DomUtil.create("div","leaflet-tooltip"),this._container.style.maxWidth=this._isNumeric(this.options.maxWidth)?this.options.maxWidth+"px":this.options.maxWidth,this._container.style.minWidth=this._isNumeric(this.options.minWidth)?this.options.minWidth+"px":this.options.minWidth,this._container.style.padding=this._isNumeric(this.options.padding)?this.options.padding+"px":this.options.padding,this._container.style.position="absolute",this._container.style.width=this._isNumeric(this.options.width)?this.options.width+"px":this.options.width,this.options.html&&this.setHtml(this.options.html),this.options.target&&this.setTarget(this.options.target),this._map._tooltipContainer.appendChild(this._container)},_delay:function(a,b,c){var d=this;this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){a.call(b),delete d._timeout},c)},_getElementSize:function(a){var b=this._size;return(!b||this._sizeChanged)&&(b={},a.style.left="-999999px",a.style.right="auto",a.style.display="inline-block",b.x=a.offsetWidth,b.y=a.offsetHeight,a.style.left="auto",a.style.display="none",this._sizeChanged=!1),b},_hide:function(){this._timeout&&clearTimeout(this._timeout),L.DomUtil.removeClass(this._container,"leaflet-tooltip-fade"),this._container.style.display="none",this.showing=!1,this._map.activeTip===this&&delete this._map.activeTip},_isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_onTargetMousemove:function(a){L.DomEvent.stopPropagation(a),this.options.trackMouse&&this.setPosition(this._map.mouseEventToContainerPoint(a))},_onTargetMouseout:function(){this.hide()},_onTargetMouseover:function(a){this.show(this._map.mouseEventToContainerPoint(a))},_show:function(){this._container.style.display="inline-block",L.DomUtil.addClass(this._container,"leaflet-tooltip-fade"),this._showing=!0},_unbindTarget:function(a){L.DomEvent.off(a,"mouseover",this._onTargetMouseover,this).off(a,"mouseout",this._onTargetMouseout,this).off(a,"mousemove",this._onTargetMousemove,this)},hide:function(){this.options.hideDelay?this._delay(this._hide,this,this.options.hideDelay):this._hide()},isVisible:function(){return this._showing},remove:function(){this._container.parentNode.removeChild(this._container),delete this._container,this._target&&this._unbindTarget(this._target)},setHtml:function(a){if("string"==typeof a)this._container.innerHTML=c.unescapeHtml(a);else{for(;this._container.hasChildNodes();)this._container.removeChild(this._container.firstChild);this._container.appendChild(this._content)}this._sizeChanged=!0},setPosition:function(a){var b=this._container,c=this._getElementSize(this._container),d=this._map.getSize(),e=this.options.mouseOffset||{x:0,y:0};a.x+c.x>d.x-e.x-5?(b.style.left="auto",b.style.right=d.x-a.x+(e.x-5)+"px"):(b.style.left=a.x+e.x+"px",b.style.right="auto"),a.y+c.y>d.y?(b.style.top="auto",b.style.bottom=d.y-a.y+"px"):(b.style.top=a.y+"px",b.style.bottom="auto")},setTarget:function(a){a._icon&&(a=a._icon),a!==this._target&&(this._target&&this._unbindTarget(this._target),this._bindTarget(a),this._target=a)},show:function(a,b){this._map.activeTip&&this._map.activeTip!==this&&this._map.activeTip._hide(),this._map.activeTip=this,b&&this.setHtml(b),this.setPosition(a),this.options.showDelay?this._delay(this._show,this,this.options.hideDelay):this._show()}});L.Map.addInitHook(function(){this._tooltipContainer=L.DomUtil.create("div","leaflet-tooltip-container",this._container)}),b.exports=function(a){return new d(a)}},{"./util/util":78}],73:[function(a,b){"use strict";var c=a("reqwest"),d=a("../util/util");b.exports={_formatBingResult:function(a){var b=a.bbox,c=a.geocodePoints[0].coordinates;return{bounds:[[b[0],b[1]],[b[2],b[3]]],latLng:[c[0],c[1]],name:a.name}},_formatEsriResult:function(a){var b=a.extent,c=a.feature.geometry;return{bounds:[[b.ymin,b.xmin],[b.ymax,b.xmax]],latLng:[c.y,c.x],name:a.name}},_formatMapquestResult:function(a){var b=a.adminArea5||null,c=a.adminArea4||null,d=a.adminArea1||null,e=(a.postalCode||null,a.street||null),f=a.adminArea3||null,g=(e?e+", ":"")+(b?b:c)+", "+f+" "+d;return{bounds:null,latLng:[a.latLng.lat,a.latLng.lng],name:g}},_formatNominatimResult:function(a){var b=a.boundingbox;return{bounds:[[b[0],b[3]],[b[1],b[2]]],latLng:[a.lat,a.lon],name:a.display_name}},bing:function(a,b){var e=this,f={include:"queryParse",includeNeighborhood:1,key:"Ag4-2f0g7bcmcVgKeNYvH_byJpiPQSx4F9l0aQaz9pDYMORbeBFZ0N3C3A5LSf65",query:a};c({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},jsonpCallback:"jsonp",success:function(a){var c={};if(a){for(var d=[],f=0;f<a.resourceSets[0].resources.length;f++)d.push(e._formatBingResult(a.resourceSets[0].resources[f]));c.results=d,c.success=!0}else c.message="The response from the Bing service was invalid. Please try again.",c.success=!1;b(c)},type:"jsonp",url:d.buildUrl("https://dev.virtualearth.net/REST/v1/Locations",f)})},esri:function(a,b,e){var f=this,g={f:"json",text:a};e=e?L.extend(g,e):g,c({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},success:function(a){var c={};if(a){for(var d=[],e=0;e<a.locations.length;e++)d.push(f._formatEsriResult(a.locations[e]));c.results=d,c.success=!0}else c.message="The response from the Esri service was invalid. Please try again.",c.success=!1;b(c)},type:"jsonp",url:d.buildUrl("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find",e)})},mapquest:function(a,b){var d=this;c({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},success:function(a){if(a)if(a.results&&a.results[0]&&a.results[0].locations&&a.results[0].locations.length){for(var c=[],e=0;e<a.results[0].locations.length;e++)c.push(d._formatMapquestResult(a.results[0].locations[e]));b({results:c,success:!0})}else b({message:"No locations found.",success:!0});else b({message:"The geocode failed. Please try again.",success:!1})},type:"jsonp",url:"https://www.mapquestapi.com/geocoding/v1/address?location="+a+"&key=Gmjtd%7Cluubn1u1nq%2C85%3Do5-lr7x9&thumbMaps=false"})},nominatim:function(a,b){var d=this;c({error:function(){b({message:"The location search failed. Please check your network connection.",success:!1})},jsonpCallback:"json_callback",success:function(a){var c={};if(a){for(var e=[],f=0;f<a.length;f++)e.push(d._formatNominatimResult(a[f]));c.results=e,c.success=!0}else c.message="The response from the Nominatim service was invalid. Please try again.",c.success=!1;
b(c)},type:"jsonp",url:"https://open.mapquestapi.com/nominatim/v1/search.php?format=json&addressdetails=1&dedupe=1&q="+a+"&key=Gmjtd%7Cluubn1u1nq%2C85%3Do5-lr7x9"})}}},{"../util/util":78,reqwest:31}],74:[function(a,b){b.exports=function(a,b){function c(a){a=a.toLowerCase();var b=a.indexOf("js");return a=a.indexOf("css"),-1===b&&-1===a?!1:b>a?"js":"css"}function d(a){var b=document.createElement("link");b.href=a,b.rel="stylesheet",b.type="text/css",b.onload=f,b.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&f()},document.getElementsByTagName("head")[0].appendChild(b)}function e(a){try{document.styleSheets[a].cssRules?f():document.styleSheets[a].rules&&document.styleSheets[a].rules.length?f():setTimeout(function(){e(a)},250)}catch(b){setTimeout(function(){e(a)},250)}}function f(){h--,0===h&&b&&b()}for(var g,h=0,i=document.styleSheets.length-1,j=0;j<a.length;j++)if(h++,g=a[j],"css"===c(g)&&(d(g),i++,!window.opera&&-1===navigator.userAgent.indexOf("MSIE")&&e(i)),"js"===c(g)){var k=document.createElement("script");k.type="text/javascript",k.src=g,k.onload=f,document.getElementsByTagName("head")[0].appendChild(k)}}},{}],75:[function(a,b){"use strict";b.exports={lat2tile:function(a,b){return Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*Math.pow(2,b))},long2tile:function(a,b){return Math.floor((a+180)/360*Math.pow(2,b))},tile2lat:function(a,b){var c=Math.PI-2*Math.PI*a/Math.pow(2,b);return 180/Math.PI*Math.atan(.5*(Math.exp(c)-Math.exp(-c)))},tile2long:function(a,b){return a/Math.pow(2,b)*360-180}}},{}],76:[function(a,b){b.exports=function(){function a(a,b){function c(b){var c=a.arcs[b],d=c[0],e=[0,0];return c.forEach(function(a){e[0]+=a[0],e[1]+=a[1]}),[d,e]}var d={},e={};b.forEach(function(a){var b,f,g=c(a),h=g[0],i=g[1];if(b=e[h])if(delete e[b.end],b.push(a),b.end=i,f=d[i]){delete d[f.start];var j=f===b?b:b.concat(f);d[j.start=b.start]=e[j.end=f.end]=j}else if(f=e[i]){delete d[f.start],delete e[f.end];var j=b.concat(f.map(function(a){return~a}).reverse());d[j.start=b.start]=e[j.end=f.start]=j}else d[b.start]=e[b.end]=b;else if(b=d[i])if(delete d[b.start],b.unshift(a),b.start=h,f=e[h]){delete e[f.end];var k=f===b?b:f.concat(b);d[k.start=f.start]=e[k.end=b.end]=k}else if(f=d[h]){delete d[f.start],delete e[f.end];var k=f.map(function(a){return~a}).reverse().concat(b);d[k.start=f.end]=e[k.end=b.end]=k}else d[b.start]=e[b.end]=b;else if(b=d[h])if(delete d[b.start],b.unshift(~a),b.start=i,f=e[i]){delete e[f.end];var k=f===b?b:f.concat(b);d[k.start=f.start]=e[k.end=b.end]=k}else if(f=d[i]){delete d[f.start],delete e[f.end];var k=f.map(function(a){return~a}).reverse().concat(b);d[k.start=f.end]=e[k.end=b.end]=k}else d[b.start]=e[b.end]=b;else if(b=e[i])if(delete e[b.end],b.push(~a),b.end=h,f=e[h]){delete d[f.start];var j=f===b?b:b.concat(f);d[j.start=b.start]=e[j.end=f.end]=j}else if(f=d[h]){delete d[f.start],delete e[f.end];var j=b.concat(f.map(function(a){return~a}).reverse());d[j.start=b.start]=e[j.end=f.start]=j}else d[b.start]=e[b.end]=b;else b=[a],d[b.start=h]=e[b.end=i]=b});var f=[];for(var g in e)f.push(e[g]);return f}function b(b,c,d){function f(a){0>a&&(a=~a),(l[a]||(l[a]=[])).push(k)}function g(a){a.forEach(f)}function h(a){a.forEach(g)}function i(a){"GeometryCollection"===a.type?a.geometries.forEach(i):a.type in m&&(k=a,m[a.type](a.arcs))}var j=[];if(arguments.length>1){var k,l=[],m={LineString:g,MultiLineString:h,Polygon:h,MultiPolygon:function(a){a.forEach(h)}};i(c),l.forEach(arguments.length<3?function(a,b){j.push(b)}:function(a,b){d(a[0],a[a.length-1])&&j.push(b)})}else for(var n=0,o=b.arcs.length;o>n;++n)j.push(n);return e(b,{type:"MultiLineString",arcs:a(b,j)})}function c(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return d(a,b)})}:d(a,b)}function d(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:e(a,b)};return null==b.id&&delete c.id,c}function e(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[0>a?~a:a],e=0,g=d.length;g>e;++e)b.push(c=d[e].slice()),j(c,e);0>a&&f(b,g)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function g(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function h(a){return a.map(g)}function i(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(i)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=m(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return h(a.arcs)},MultiPolygon:function(a){return a.arcs.map(h)}};return i(b)}function f(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function g(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function h(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=f[o])[i=g(n,p)]!==p&&n.splice(i,0,p),(n=f[p])[i=g(n,o)]!==o&&n.splice(i,0,o)}return f}function i(a,b){function c(a){g.remove(a),a[1][2]=b(a),g.push(a)}var d,e=m(a.transform),f=n(a.transform),g=l(k),h=0;for(b||(b=j),a.arcs.forEach(function(a){var c=[];a.forEach(e);for(var f=1,h=a.length-1;h>f;++f)d=a.slice(f-1,f+2),d[1][2]=b(d),c.push(d),g.push(d);a[0][2]=a[h][2]=1/0;for(var f=0,h=c.length;h>f;++f)d=c[f],d.previous=c[f-1],d.next=c[f+1]});d=g.pop();){var i=d.previous,o=d.next;d[1][2]<h?d[1][2]=h:h=d[1][2],i&&(i.next=o,i[2]=d[2],c(i)),o&&(o.previous=i,o[0]=d[0],c(o))}return a.arcs.forEach(function(a){a.forEach(f)}),a}function j(a){return Math.abs((a[0][0]-a[2][0])*(a[1][1]-a[0][1])-(a[0][0]-a[1][0])*(a[2][1]-a[0][1]))}function k(a,b){return a[1][2]-b[1][2]}function l(a){function b(b){for(var c=e[b];b>0;){var d=(b+1>>1)-1,f=e[d];if(a(c,f)>=0)break;e[f.index=b]=f,e[c.index=b=d]=c}}function c(b){for(var c=e[b];;){var d=b+1<<1,f=d-1,g=b,h=e[g];if(f<e.length&&a(e[f],h)<0&&(h=e[g=f]),d<e.length&&a(e[d],h)<0&&(h=e[g=d]),g===b)break;e[h.index=b]=h,e[c.index=b=g]=c}}var d={},e=[];return d.push=function(){for(var a=0,c=arguments.length;c>a;++a){var d=arguments[a];b(d.index=e.push(d)-1)}return e.length},d.pop=function(){var a=e[0],b=e.pop();return e.length&&(e[b.index=0]=b,c(0)),a},d.remove=function(d){var f=d.index,g=e.pop();return f!==e.length&&(e[g.index=f]=g,(a(g,d)<0?b:c)(f)),f},d}function m(a){if(!a)return o;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function n(a){if(!a)return o;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function o(){}return{version:"1.4.0",mesh:b,feature:c,neighbors:h,presimplify:i}}()},{}],77:[function(a,b){var c=a("reqwest"),d=a("../util/tilemath");b.exports=function(a){var b={};return{getTileCoords:function(b){var c=a._map.getZoom();return{x:d.long2tile(b.lng,c),y:d.lat2tile(b.lat,c),z:c}},getTileGrid:function(a,d,e){if(b[a]){var f=b[a];"empty"===f||"loading"===f?e(null,null):e(f,this.getTileGridPoint(d,f))}else{var g=this;b[a]="loading",c({error:function(){b[a]="empty",e(null,null)},success:function(c){c?(b[a]=c,e(c,g.getTileGridPoint(d,c))):(b[a]="empty",e(null,null))},timeout:2e3,type:"jsonp",url:a})}},getTileGridPoint:function(b,c){var d=a._map;if(d){var e=d.project(b.wrap()),f=4,g=256,h=d.options.crs.scale(d.getZoom())/g,i=Math.floor(e.x/g),j=Math.floor(e.y/g);return i=(i+h)%h,j=(j+h)%h,c.data[c.keys[this.utfDecode(c.grid[Math.floor((e.y-j*g)/f)].charCodeAt(Math.floor((e.x-i*g)/f)))]]}return null},hasUtfData:function(a,b){var d=c.getCache(a),e={cursor:"default"};return d&&("success"===d.cacheStatus&&d.response?e=this.getTileGridPoint(b,d.response)?{cursor:"pointer"}:!1:"error"===d.cacheStatus&&(e=!1)),e},utfDecode:function(a){return a>=93&&a--,a>=35&&a--,a-32}}}},{"../util/tilemath":75,reqwest:31}],78:[function(a,b){"use strict";var c=a("handlebars"),d=a("reqwest");c.registerHelper("toLowerCase",function(a){return a.toLowerCase()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),function(){function a(a){var b,d,e,f,g,h,i;for(h=a.length,g=0,i="";h>g;){do b=c[255&a.charCodeAt(g++)];while(h>g&&-1===b);if(-1===b)break;do d=c[255&a.charCodeAt(g++)];while(h>g&&-1===d);if(-1===d)break;i+=String.fromCharCode(b<<2|(48&d)>>4);do{if(e=255&a.charCodeAt(g++),61===e)return i;e=c[e]}while(h>g&&-1===e);if(-1===e)break;i+=String.fromCharCode((15&d)<<4|(60&e)>>2);do{if(f=255&a.charCodeAt(g++),61===f)return i;f=c[f]}while(h>g&&-1===f);if(-1===f)break;i+=String.fromCharCode((3&e)<<6|f)}return i}function b(a){var b,c,e,f,g,h;for(g=a.length,f=0,h="";g>f;){if(b=255&a.charCodeAt(f++),f===g){h+=d.charAt(b>>2),h+=d.charAt((3&b)<<4),h+="==";break}if(c=a.charCodeAt(f++),f===g){h+=d.charAt(b>>2),h+=d.charAt((3&b)<<4|(240&c)>>4),h+=d.charAt((15&c)<<2),h+="=";break}e=a.charCodeAt(f++),h+=d.charAt(b>>2),h+=d.charAt((3&b)<<4|(240&c)>>4),h+=d.charAt((15&c)<<2|(192&e)>>6),h+=d.charAt(63&e)}return h}var c=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";window.btoa||(window.btoa=b),window.atob||(window.atob=a)}(),b.exports={_checkDisplay:function(a,b){a.style&&"none"===a.style.display&&(b.push(a),a.style.display="block")},_getAutoPanPaddingTopLeft:function(a){var b=this.getChildElementsByClassName(a,"leaflet-top");return[this.getOuterDimensions(b[0]).width+20,this.getOuterDimensions(b[1]).height+20]},_getAvailableVerticalSpace:function(a){var b,c=a.getContainer(),d=this.getChildElementsByClassName(c,"leaflet-bottom")[0],e=this.getChildElementsByClassName(c,"leaflet-bottom")[1],f=this.getOuterDimensions(d).height;return this.getOuterDimensions(e).height>f&&(f=this.getOuterDimensions(e).height),b=this.getOuterDimensions(c).height-f-this.getOuterDimensions(this.getChildElementsByClassName(c,"leaflet-top")[1]).height,b>149?b:150},_lazyLoader:a("./lazyloader.js"),_parseLocalUrl:function(a){return a.replace(location.origin,"")},appendCssFile:function(a,b){"string"==typeof a&&(a=[a]),this._lazyLoader(a,b)},appendJsFile:function(a,b){"string"==typeof a&&(a=[a]),this._lazyLoader(a,b)},buildUrl:function(a,b){var c=[];if(!b)return a;c.push(a+"?");for(var d in b)c.push(encodeURIComponent(d)),c.push("="),c.push(encodeURIComponent(b[d])),c.push("&");return c.pop(),c.join("")},cancelEvent:function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1},dataToList:function(a,b){var c=document.createElement("dl");for(var d in a){var e=!0;if(b&&L.Util.isArray(b)&&-1===b.indexOf(d)&&(e=!1),e){var f=document.createElement("dd"),g=document.createElement("dt");g.innerHTML=d,f.innerHTML=a[d],c.appendChild(g),c.appendChild(f)}}return c},dataToTable:function(a,b){var c,d,e=document.createElement("table"),f=document.createElement("tbody");if(e.appendChild(f),L.Util.isArray(b)){d={};for(var g=0;g<b.length;g++)c=b[g],"string"==typeof c?d[c]={title:c}:d[c.field]=c}for(var h in a){var i=!1;if(d){for(c in d)if(c===h){i=!0;break}}else i=!0;if(i){var j=document.createElement("td"),k=document.createElement("td"),l=document.createElement("tr");j.style.paddingRight="10px",j.innerHTML=d?d[h].title:h,k.innerHTML=d&&d[h]&&d[h].separator?a[h].replace(d[h].separator,"<br/>"):a[h],d&&d[h]&&d[h].process&&(k.innerHTML=d[h].process(k.innerHTML)),l.appendChild(j),l.appendChild(k),f.appendChild(l)}}return e},escapeHtml:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},getChildElementsByClassName:function(a,b){function c(a){var d=a.children;if("string"==typeof a.className&&-1!==a.className.indexOf(b))for(var f=a.className.split(" "),g=0;g<f.length;g++)if(f[g]===b){e.push(a);break}if(d&&d.length)for(var h=0;h<d.length;h++)c(d[h])}for(var d=a.childNodes,e=[],f=0;f<d.length;f++)c(d[f]);return e},getChildElementsByNodeName:function(a,b){function c(a){var d=a.children;if("string"==typeof a.nodeName&&a.nodeName.toLowerCase()===b&&e.push(a),d&&d.length)for(var f=0;f<d.length;f++)c(d[f])}var d=a.childNodes,e=[];b=b.toLowerCase();for(var f=0;f<d.length;f++)c(d[f]);return e},getElementsByClassName:function(a){for(var b=[],c=new RegExp("(^|\\s)"+a+"(\\s|$)"),d=document.getElementsByTagName("*"),e=0;e<d.length;e++)c.test(d[e].className)&&b.push(d[e]);return b},getEventObject:function(a){return a||(a=window.event),a},getEventObjectTarget:function(a){var b;return b=a.target?a.target:a.srcElement,3===b.nodeType&&(b=b.parentNode),b},getNextSibling:function(a){do a=a.nextSibling;while(a&&1!==a.nodeType);return a},getOffset:function(a){for(var b=0,c=0;null!==a;b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent);return{left:b,top:c}},getOuterDimensions:function(a){var b=0,c=0;if(a){var d=[],e=a.parentNode;if(this._checkDisplay(a,d),"npmap"!==a.id&&e)for(this._checkDisplay(e,d);e.id&&"npmap"!==e.id&&"npmap-map"!==e.id;)e=e.parentNode,e&&this._checkDisplay(e,d);b=a.offsetHeight,c=a.offsetWidth,d.reverse();for(var f=0;f<d.length;f++)d[f].style.display="none"}return{height:b,width:c}},getOuterHtml:function(a){if(!a||!a.tagName)return"";var b,c,d=document.createElement("div");return d.appendChild(a.cloneNode(!1)),c=d.innerHTML,b=c.indexOf(">")+1,c=c.substring(0,b)+a.innerHTML+c.substring(b),d=null,c},getPosition:function(a){var b={left:0,top:0},c=this.getOffset(a),d=this.getOffset(a.parentNode);return b.left=c.left-d.left,b.top=c.top-d.top,b},getPreviousSibling:function(a){do a=a.previousSibling;while(a&&1!==a.nodeType);return a},getPropertyCount:function(a){if(Object.keys)return Object.keys(a).length;var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c.length},handlebars:function(a,b){return(a=c.compile(a))(b)},isLocalUrl:function(a){return 0===a.indexOf(location.origin)?!0:!/^(?:[a-z]+:)?\/\//i.test(a)},linkify:function(a,b,c){var d="\\b(https?://[-A-Z0-9+&@#/%?=~_|!:,.;]*[A-Z0-9+&@#/%=~_|])",e=new RegExp(d,"gi"),f=new RegExp(">"+d+"</a>","gi"),g=a.replace(e,'<a href="$1"'+(c?' target="'+c+'"':"")+">$1</a>");if(b){var h=g.match(f);if(h)for(var i=0;i<h.length;i++){var j=h[i].substr(1,h[i].length-5).replace(/https?:\/\//gi,""),k=j.substr(0,b)+(j.length>b?"&hellip;":"");j.length-1===b&&(k=k.substr(0,b)+j.substr(b,1)),g=g.replace(h[i],">"+k+"</a>")}}return g},loadFile:function(a,b,c){if(this.isLocalUrl(a))if("xml"===b){var e=new XMLHttpRequest;e.onload=function(){var a=this.responseText;c(a?a:!1)},e.open("get",this._parseLocalUrl(a),!0),e.send()}else d({error:function(){c(!1)},success:function(a){c(a?"text"===b?a.responseText:a:!1)},type:b,url:this._parseLocalUrl(a)});else d({error:function(){c(!1)},success:function(a){c(a?a:!1)},type:"jsonp",url:"http://npmap-proxy.herokuapp.com?callback=?&type="+b+"&url="+a})},mediaToList:function(a,b){function c(a){var b,c,e,f=k.childNodes,g=f.length,h=d.childNodes[1],i=d.childNodes[0];for(c=0;c<f.length;c++)if(e=f[c],"none"!==e.style.display){b=c;break}if(g>b+a&&b+a>-1)for(c=0;c<f.length;c++)e=f[c],e.style.display=c===b+a?"inherit":"none";0>=b+a?L.DomUtil.addClass(i,"disabled"):L.DomUtil.removeClass(i,"disabled"),b+a+1>=g?L.DomUtil.addClass(h,"disabled"):L.DomUtil.removeClass(h,"disabled")}var d,e,f,g,h,i=[],j=[],k=document.createElement("ul"),l={focus:function(a){var b,c,d,e=[],f=new RegExp("[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}(}){0,1}","g");for(c=a.match(f),d=0;d<c.length;d++)b={src:"http://focus.nps.gov/GetAsset/"+c[d]+"/proxy/lores",href:"http://focus.nps.gov/AssetDetail?assetID="+c[d]},e.push(b);return e}},m=document.createElement("div");for(f=0;f<b.length;f++){var n=[],o=[];if(l[b[f].type]){e=l[b[f].type](a[b[f].id]);for(var p=0;p<e.length;p++)j.push(document.createElement("li")),j[p].style.float="left",j[p].style.display=p>0?"none":"inherit",i.push(document.createElement("div")),i[p].style.width="250px",i[p].style.height="187.5px",i[p].style.marginLeft="auto",i[p].style.marginRight="auto",n.push(document.createElement("a")),n[p].href=e[p].href,o.push(document.createElement("img")),o[p].src=e[p].src,n[p].appendChild(o[p]),i[p].appendChild(n[p]),j[p].appendChild(i[p]),k.appendChild(j[p])}}return k.className="clearfix",m.appendChild(k),d=document.createElement("div"),d.style.float="right",h=document.createElement("button"),h.setAttribute("class","btn btn-circle disabled prev"),h.innerHTML="&lt;",g=document.createElement("button"),g.setAttribute("class","btn btn-circle next"),g.innerHTML="&gt;",L.DomEvent.addListener(h,"click",function(){c(-1)}),L.DomEvent.addListener(g,"click",function(){c(1)}),d.appendChild(h),d.appendChild(g),e.length>1&&m.appendChild(d),m},parseDomainFromUrl:function(a){var b=a.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return b&&b[1]},putCursorAtEndOfInput:function(a){if(a.setSelectionRange){var b=2*a.value.length;a.setSelectionRange(b,b)}else a.value=a.value},reqwest:d,strict:function(a,b){if(typeof a!==b)throw new Error("Invalid argument: "+b+" expected")},strictInstance:function(a,b,c){if(!(a instanceof b))throw new Error("Invalid argument: "+c+" expected")},strictOneOf:function(a,b){if(-1===b.indexOf(a))throw new Error("Invalid argument: "+a+" given, valid values are "+b.join(", "))},stripHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText||""},unescapeHtml:function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}}},{"./lazyloader.js":74,handlebars:23,reqwest:31}]},{},[2]);